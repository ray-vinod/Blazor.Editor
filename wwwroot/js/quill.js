/*! For license information please see quill.js.LICENSE.txt */ !function (t, e) { "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Quill = e() : t.Quill = e() }(self, function () {
    return function () {
        var t = {
            9698: function (t, e, i) { "use strict"; i.d(e, { Ay: function () { return u }, Ji: function () { return d }, mG: function () { return h }, zo: function () { return c } }); var r = i(6003), n = i(5232), s = i.n(n), l = i(3036), o = i(4850), a = i(5508); class u extends r.BlockBlot { cache = {}; delta() { return null == this.cache.delta && (this.cache.delta = h(this)), this.cache.delta } deleteAt(t, e) { super.deleteAt(t, e), this.cache = {} } formatAt(t, e, i, n) { e <= 0 || (this.scroll.query(i, r.Scope.BLOCK) ? t + e === this.length() && this.format(i, n) : super.formatAt(t, Math.min(e, this.length() - t - 1), i, n), this.cache = {}) } insertAt(t, e, i) { if (null != i) return super.insertAt(t, e, i), void (this.cache = {}); if (0 === e.length) return; let r = e.split("\n"), n = r.shift(); n.length > 0 && (t < this.length() - 1 || null == this.children.tail ? super.insertAt(Math.min(t, this.length() - 1), n) : this.children.tail.insertAt(this.children.tail.length(), n), this.cache = {}); let s = this; r.reduce((t, e) => ((s = s.split(t, !0)).insertAt(0, e), e.length), t + n.length) } insertBefore(t, e) { let { head: i } = this.children; super.insertBefore(t, e), i instanceof l.A && i.remove(), this.cache = {} } length() { return null == this.cache.length && (this.cache.length = super.length() + 1), this.cache.length } moveChildren(t, e) { super.moveChildren(t, e), this.cache = {} } optimize(t) { super.optimize(t), this.cache = {} } path(t) { return super.path(t, !0) } removeChild(t) { super.removeChild(t), this.cache = {} } split(t) { let e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (e && (0 === t || t >= this.length() - 1)) { let i = this.clone(); return 0 === t ? (this.parent.insertBefore(i, this), this) : (this.parent.insertBefore(i, this.next), i) } let r = super.split(t, e); return this.cache = {}, r } } u.blotName = "block", u.tagName = "P", u.defaultChild = l.A, u.allowedChildren = [l.A, o.A, r.EmbedBlot, a.A]; class c extends r.EmbedBlot { attach() { super.attach(), this.attributes = new r.AttributorStore(this.domNode) } delta() { return (new (s())).insert(this.value(), { ...this.formats(), ...this.attributes.values() }) } format(t, e) { let i = this.scroll.query(t, r.Scope.BLOCK_ATTRIBUTE); null != i && this.attributes.attribute(i, e) } formatAt(t, e, i, r) { this.format(i, r) } insertAt(t, e, i) { if (null != i) return void super.insertAt(t, e, i); let r = e.split("\n"), n = r.pop(), s = r.map(t => { let e = this.scroll.create(u.blotName); return e.insertAt(0, t), e }), l = this.split(t); s.forEach(t => { this.parent.insertBefore(t, l) }), n && this.parent.insertBefore(this.scroll.create("text", n), l) } } function h(t) { let e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; return t.descendants(r.LeafBlot).reduce((t, i) => 0 === i.length() ? t : t.insert(i.value(), d(i, {}, e)), new (s())).insert("\n", d(t)) } function d(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; return null == t ? e : ("formats" in t && "function" == typeof t.formats && (e = { ...e, ...t.formats() }, i && delete e["code-token"]), null == t.parent || "scroll" === t.parent.statics.blotName || t.parent.statics.scope !== t.statics.scope ? e : d(t.parent, e, i)) } c.scope = r.Scope.BLOCK_BLOT }, 3036: function (t, e, i) { "use strict"; var r = i(6003); class n extends r.EmbedBlot { static value() { } optimize() { (this.prev || this.next) && this.remove() } length() { return 0 } value() { return "" } } n.blotName = "break", n.tagName = "BR", e.A = n }, 580: function (t, e, i) { "use strict"; var r = i(6003); class n extends r.ContainerBlot { } e.A = n }, 4541: function (t, e, i) { "use strict"; var r = i(6003), n = i(5508); class s extends r.EmbedBlot { static blotName = "cursor"; static className = "ql-cursor"; static tagName = "span"; static CONTENTS = "\uFEFF"; static value() { } constructor(t, e, i) { super(t, e), this.selection = i, this.textNode = document.createTextNode(s.CONTENTS), this.domNode.appendChild(this.textNode), this.savedLength = 0 } detach() { null != this.parent && this.parent.removeChild(this) } format(t, e) { if (0 !== this.savedLength) return void super.format(t, e); let i = this, n = 0; for (; null != i && i.statics.scope !== r.Scope.BLOCK_BLOT;)n += i.offset(i.parent), i = i.parent; null != i && (this.savedLength = s.CONTENTS.length, i.optimize(), i.formatAt(n, s.CONTENTS.length, t, e), this.savedLength = 0) } index(t, e) { return t === this.textNode ? 0 : super.index(t, e) } length() { return this.savedLength } position() { return [this.textNode, this.textNode.data.length] } remove() { super.remove(), this.parent = null } restore() { if (this.selection.composing || null == this.parent) return null; let t = this.selection.getNativeRange(); for (; null != this.domNode.lastChild && this.domNode.lastChild !== this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode); let e = this.prev instanceof n.A ? this.prev : null, i = e ? e.length() : 0, r = this.next instanceof n.A ? this.next : null, l = r ? r.text : "", { textNode: o } = this, a = o.data.split(s.CONTENTS).join(""), u; if (o.data = s.CONTENTS, e) u = e, (a || r) && (e.insertAt(e.length(), a + l), r && r.remove()); else if (r) u = r, r.insertAt(0, a); else { let c = document.createTextNode(a); u = this.scroll.create(c), this.parent.insertBefore(u, this) } if (this.remove(), t) { let h = (t, n) => e && t === e.domNode ? n : t === o ? i + n - 1 : r && t === r.domNode ? i + a.length + n : null, d = h(t.start.node, t.start.offset), f = h(t.end.node, t.end.offset); if (null !== d && null !== f) return { startNode: u.domNode, startOffset: d, endNode: u.domNode, endOffset: f } } return null } update(t, e) { if (t.some(t => "characterData" === t.type && t.target === this.textNode)) { let i = this.restore(); i && (e.range = i) } } optimize(t) { super.optimize(t); let { parent: e } = this; for (; e;) { if ("A" === e.domNode.tagName) { this.savedLength = s.CONTENTS.length, e.isolate(this.offset(e), this.length()).unwrap(), this.savedLength = 0; break } e = e.parent } } value() { return "" } } e.A = s }, 746: function (t, e, i) { "use strict"; var r = i(6003), n = i(5508); class s extends r.EmbedBlot { constructor(t, e) { super(t, e), this.contentNode = document.createElement("span"), this.contentNode.setAttribute("contenteditable", "false"), Array.from(this.domNode.childNodes).forEach(t => { this.contentNode.appendChild(t) }), this.leftGuard = document.createTextNode("\uFEFF"), this.rightGuard = document.createTextNode("\uFEFF"), this.domNode.appendChild(this.leftGuard), this.domNode.appendChild(this.contentNode), this.domNode.appendChild(this.rightGuard) } index(t, e) { return t === this.leftGuard ? 0 : t === this.rightGuard ? 1 : super.index(t, e) } restore(t) { let e, i = null, r = t.data.split("\uFEFF").join(""); if (t === this.leftGuard) { if (this.prev instanceof n.A) { let s = this.prev.length(); this.prev.insertAt(s, r), i = { startNode: this.prev.domNode, startOffset: s + r.length } } else e = document.createTextNode(r), this.parent.insertBefore(this.scroll.create(e), this), i = { startNode: e, startOffset: r.length } } else t === this.rightGuard && (this.next instanceof n.A ? (this.next.insertAt(0, r), i = { startNode: this.next.domNode, startOffset: r.length }) : (e = document.createTextNode(r), this.parent.insertBefore(this.scroll.create(e), this.next), i = { startNode: e, startOffset: r.length })); return t.data = "\uFEFF", i } update(t, e) { t.forEach(t => { if ("characterData" === t.type && (t.target === this.leftGuard || t.target === this.rightGuard)) { let i = this.restore(t.target); i && (e.range = i) } }) } } e.A = s }, 4850: function (t, e, i) { "use strict"; var r = i(6003), n = i(3036), s = i(5508); class l extends r.InlineBlot { static allowedChildren = [l, n.A, r.EmbedBlot, s.A]; static order = ["cursor", "inline", "link", "underline", "strike", "italic", "bold", "script", "code"]; static compare(t, e) { let i = l.order.indexOf(t), r = l.order.indexOf(e); return i >= 0 || r >= 0 ? i - r : t === e ? 0 : t < e ? -1 : 1 } formatAt(t, e, i, n) { if (0 > l.compare(this.statics.blotName, i) && this.scroll.query(i, r.Scope.BLOT)) { let s = this.isolate(t, e); n && s.wrap(i, n) } else super.formatAt(t, e, i, n) } optimize(t) { if (super.optimize(t), this.parent instanceof l && l.compare(this.statics.blotName, this.parent.statics.blotName) > 0) { let e = this.parent.isolate(this.offset(), this.length()); this.moveChildren(e), e.wrap(this) } } } e.A = l }, 5508: function (t, e, i) { "use strict"; i.d(e, { A: function () { return n }, X: function () { return s } }); var r = i(6003); class n extends r.TextBlot { } function s(t) { return t.replace(/[&<>"']/g, t => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" })[t]) } }, 3729: function (t, e, i) { "use strict"; i.d(e, { default: function () { return S } }); var r = i(6142), n = i(9698), s = i(3036), l = i(580), o = i(4541), a = i(746), u = i(4850), c = i(6003), h = i(5232), d = i.n(h), f = i(5374); function $(t) { return t instanceof n.Ay || t instanceof n.zo } function _(t) { return "function" == typeof t.updateContent } class p extends c.ScrollBlot { static blotName = "scroll"; static className = "ql-editor"; static tagName = "DIV"; static defaultChild = n.Ay; static allowedChildren = [n.Ay, n.zo, l.A]; constructor(t, e, i) { let { emitter: r } = i; super(t, e), this.emitter = r, this.batch = !1, this.optimize(), this.enable(), this.domNode.addEventListener("dragstart", t => this.handleDragStart(t)) } batchStart() { Array.isArray(this.batch) || (this.batch = []) } batchEnd() { if (!this.batch) return; let t = this.batch; this.batch = !1, this.update(t) } emitMount(t) { this.emitter.emit(f.A.events.SCROLL_BLOT_MOUNT, t) } emitUnmount(t) { this.emitter.emit(f.A.events.SCROLL_BLOT_UNMOUNT, t) } emitEmbedUpdate(t, e) { this.emitter.emit(f.A.events.SCROLL_EMBED_UPDATE, t, e) } deleteAt(t, e) { let [i, r] = this.line(t), [l] = this.line(t + e); if (super.deleteAt(t, e), null != l && i !== l && r > 0) { if (i instanceof n.zo || l instanceof n.zo) return void this.optimize(); let o = l.children.head instanceof s.A ? null : l.children.head; i.moveChildren(l, o), i.remove() } this.optimize() } enable() { let t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; this.domNode.setAttribute("contenteditable", t ? "true" : "false") } formatAt(t, e, i, r) { super.formatAt(t, e, i, r), this.optimize() } insertAt(t, e, i) { if (t >= this.length()) { if (null == i || null == this.scroll.query(e, c.Scope.BLOCK)) { let r = this.scroll.create(this.statics.defaultChild.blotName); this.appendChild(r), null == i && e.endsWith("\n") ? r.insertAt(0, e.slice(0, -1), i) : r.insertAt(0, e, i) } else { let n = this.scroll.create(e, i); this.appendChild(n) } } else super.insertAt(t, e, i); this.optimize() } insertBefore(t, e) { if (t.statics.scope === c.Scope.INLINE_BLOT) { let i = this.scroll.create(this.statics.defaultChild.blotName); i.appendChild(t), super.insertBefore(i, e) } else super.insertBefore(t, e) } insertContents(t, e) { let i = this.deltaToRenderBlocks(e.concat((new (d())).insert("\n"))), r = i.pop(); if (null == r) return; this.batchStart(); let s = i.shift(); if (s) { let l = "block" === s.type && (0 === s.delta.length() || !this.descendant(n.zo, t)[0] && t < this.length()), o = "block" === s.type ? s.delta : (new (d())).insert({ [s.key]: s.value }); g(this, t, o); let a = "block" === s.type ? 1 : 0, u = t + o.length() + a; l && this.insertAt(u - 1, "\n"); let c = (0, n.Ji)(this.line(t)[0]), f = h.AttributeMap.diff(c, s.attributes) || {}; Object.keys(f).forEach(t => { this.formatAt(u - 1, 1, t, f[t]) }), t = u } let [$, _] = this.children.find(t); i.length && ($ && ($ = $.split(_), _ = 0), i.forEach(t => { if ("block" === t.type) g(this.createBlock(t.attributes, $ || void 0), 0, t.delta); else { let e = this.create(t.key, t.value); this.insertBefore(e, $ || void 0), Object.keys(t.attributes).forEach(i => { e.format(i, t.attributes[i]) }) } })), "block" === r.type && r.delta.length() && g(this, $ ? $.offset($.scroll) + _ : this.length(), r.delta), this.batchEnd(), this.optimize() } isEnabled() { return "true" === this.domNode.getAttribute("contenteditable") } leaf(t) { let e = this.path(t).pop(); if (!e) return [null, -1]; let [i, r] = e; return i instanceof c.LeafBlot ? [i, r] : [null, -1] } line(t) { return t === this.length() ? this.line(t - 1) : this.descendant($, t) } lines() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE, i = (t, e, r) => { let n = [], s = r; return t.children.forEachAt(e, r, (t, e, r) => { $(t) ? n.push(t) : t instanceof c.ContainerBlot && (n = n.concat(i(t, e, s))), s -= r }), n }; return i(this, t, e) } optimize() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; this.batch || (super.optimize(t, e), t.length > 0 && this.emitter.emit(f.A.events.SCROLL_OPTIMIZE, t, e)) } path(t) { return super.path(t).slice(1) } remove() { } update(t) { if (this.batch) return void (Array.isArray(t) && (this.batch = this.batch.concat(t))); let e = f.A.sources.USER; "string" == typeof t && (e = t), Array.isArray(t) || (t = this.observer.takeRecords()), (t = t.filter(t => { let { target: e } = t, i = this.find(e, !0); return i && !_(i) })).length > 0 && this.emitter.emit(f.A.events.SCROLL_BEFORE_UPDATE, e, t), super.update(t.concat([])), t.length > 0 && this.emitter.emit(f.A.events.SCROLL_UPDATE, e, t) } updateEmbedAt(t, e, i) { let [r] = this.descendant(t => t instanceof n.zo, t); r && r.statics.blotName === e && _(r) && r.updateContent(i) } handleDragStart(t) { t.preventDefault() } deltaToRenderBlocks(t) { let e = [], i = new (d()); return t.forEach(t => { let r = t?.insert; if (r) { if ("string" == typeof r) { let n = r.split("\n"); n.slice(0, -1).forEach(r => { i.insert(r, t.attributes), e.push({ type: "block", delta: i, attributes: t.attributes ?? {} }), i = new (d()) }); let s = n[n.length - 1]; s && i.insert(s, t.attributes) } else { let l = Object.keys(r)[0]; if (!l) return; this.query(l, c.Scope.INLINE) ? i.push(t) : (i.length() && e.push({ type: "block", delta: i, attributes: {} }), i = new (d()), e.push({ type: "blockEmbed", key: l, value: r[l], attributes: t.attributes ?? {} })) } } }), i.length() && e.push({ type: "block", delta: i, attributes: {} }), e } createBlock(t, e) { let i, r = {}; Object.entries(t).forEach(t => { let [e, n] = t; null != this.query(e, c.Scope.BLOCK & c.Scope.BLOT) ? i = e : r[e] = n }); let n = this.create(i || this.statics.defaultChild.blotName, i ? t[i] : void 0); this.insertBefore(n, e || void 0); let s = n.length(); return Object.entries(r).forEach(t => { let [e, i] = t; n.formatAt(0, s, e, i) }), n } } function g(t, e, i) { i.reduce((e, i) => { let r = h.Op.length(i), s = i.attributes || {}; if (null != i.insert) { if ("string" == typeof i.insert) { let l = i.insert; t.insertAt(e, l); let [o] = t.descendant(c.LeafBlot, e), a = (0, n.Ji)(o); s = h.AttributeMap.diff(a, s) || {} } else if ("object" == typeof i.insert) { let u = Object.keys(i.insert)[0]; if (null == u) return e; if (t.insertAt(e, u, i.insert[u]), null != t.scroll.query(u, c.Scope.INLINE)) { let [d] = t.descendant(c.LeafBlot, e), f = (0, n.Ji)(d); s = h.AttributeMap.diff(f, s) || {} } } } return Object.keys(s).forEach(i => { t.formatAt(e, r, i, s[i]) }), e + r }, e) } var m = i(5508), b = i(584), y = i(4266); class v extends y.A { static DEFAULTS = { delay: 1e3, maxStack: 100, userOnly: !1 }; lastRecorded = 0; ignoreChange = !1; stack = { undo: [], redo: [] }; currentRange = null; constructor(t, e) { super(t, e), this.quill.on(r.Ay.events.EDITOR_CHANGE, (t, e, i, n) => { t === r.Ay.events.SELECTION_CHANGE ? e && n !== r.Ay.sources.SILENT && (this.currentRange = e) : t === r.Ay.events.TEXT_CHANGE && (this.ignoreChange || (this.options.userOnly && n !== r.Ay.sources.USER ? this.transform(e) : this.record(e, i)), this.currentRange = x(this.currentRange, e)) }), this.quill.keyboard.addBinding({ key: "z", shortKey: !0 }, this.undo.bind(this)), this.quill.keyboard.addBinding({ key: ["z", "Z"], shortKey: !0, shiftKey: !0 }, this.redo.bind(this)), /Win/i.test(navigator.platform) && this.quill.keyboard.addBinding({ key: "y", shortKey: !0 }, this.redo.bind(this)), this.quill.root.addEventListener("beforeinput", t => { "historyUndo" === t.inputType ? (this.undo(), t.preventDefault()) : "historyRedo" === t.inputType && (this.redo(), t.preventDefault()) }) } change(t, e) { if (0 === this.stack[t].length) return; let i = this.stack[t].pop(); if (!i) return; let n = this.quill.getContents(), s = i.delta.invert(n); this.stack[e].push({ delta: s, range: x(i.range, s) }), this.lastRecorded = 0, this.ignoreChange = !0, this.quill.updateContents(i.delta, r.Ay.sources.USER), this.ignoreChange = !1, this.restoreSelection(i) } clear() { this.stack = { undo: [], redo: [] } } cutoff() { this.lastRecorded = 0 } record(t, e) { if (0 === t.ops.length) return; this.stack.redo = []; let i = t.invert(e), r = this.currentRange, n = Date.now(); if (this.lastRecorded + this.options.delay > n && this.stack.undo.length > 0) { let s = this.stack.undo.pop(); s && (i = i.compose(s.delta), r = s.range) } else this.lastRecorded = n; 0 !== i.length() && (this.stack.undo.push({ delta: i, range: r }), this.stack.undo.length > this.options.maxStack && this.stack.undo.shift()) } redo() { this.change("redo", "undo") } transform(t) { A(this.stack.undo, t), A(this.stack.redo, t) } undo() { this.change("undo", "redo") } restoreSelection(t) { if (t.range) this.quill.setSelection(t.range, r.Ay.sources.USER); else { let e = function (t, e) { let i = e.reduce((t, e) => t + (e.delete || 0), 0), r = e.length() - i; return function (t, e) { let i = e.ops[e.ops.length - 1]; return null != i && (null != i.insert ? "string" == typeof i.insert && i.insert.endsWith("\n") : null != i.attributes && Object.keys(i.attributes).some(e => null != t.query(e, c.Scope.BLOCK))) }(t, e) && (r -= 1), r }(this.quill.scroll, t.delta); this.quill.setSelection(e, r.Ay.sources.USER) } } } function A(t, e) { let i = e; for (let r = t.length - 1; r >= 0; r -= 1) { let n = t[r]; t[r] = { delta: i.transform(n.delta, !0), range: n.range && x(n.range, i) }, i = n.delta.transform(i), 0 === t[r].delta.length() && t.splice(r, 1) } } function x(t, e) { if (!t) return t; let i = e.transformPosition(t.index); return { index: i, length: e.transformPosition(t.index + t.length) - i } } var N = i(8123); class E extends y.A { constructor(t, e) { super(t, e), t.root.addEventListener("drop", e => { e.preventDefault(); let i = null; if (document.caretRangeFromPoint) i = document.caretRangeFromPoint(e.clientX, e.clientY); else if (document.caretPositionFromPoint) { let r = document.caretPositionFromPoint(e.clientX, e.clientY); (i = document.createRange()).setStart(r.offsetNode, r.offset), i.setEnd(r.offsetNode, r.offset) } let n = i && t.selection.normalizeNative(i); if (n) { let s = t.selection.normalizedToRange(n); e.dataTransfer?.files && this.upload(s, e.dataTransfer.files) } }) } upload(t, e) { let i = []; Array.from(e).forEach(t => { t && this.options.mimetypes?.includes(t.type) && i.push(t) }), i.length > 0 && this.options.handler.call(this, t, i) } } E.DEFAULTS = { mimetypes: ["image/png", "image/jpeg"], handler(t, e) { if (!this.quill.scroll.query("image")) return; let i = e.map(t => new Promise(e => { let i = new FileReader; i.onload = () => { e(i.result) }, i.readAsDataURL(t) })); Promise.all(i).then(e => { let i = e.reduce((t, e) => t.insert({ image: e }), (new (d())).retain(t.index).delete(t.length)); this.quill.updateContents(i, f.A.sources.USER), this.quill.setSelection(t.index + e.length, f.A.sources.SILENT) }) } }; let w = ["insertText", "insertReplacementText"]; class q extends y.A { constructor(t, e) { super(t, e), t.root.addEventListener("beforeinput", t => { this.handleBeforeInput(t) }), /Android/i.test(navigator.userAgent) || t.on(r.Ay.events.COMPOSITION_BEFORE_START, () => { this.handleCompositionStart() }) } deleteRange(t) { (0, N.Xo)({ range: t, quill: this.quill }) } replaceText(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ""; if (0 === t.length) return !1; if (e) { let i = this.quill.getFormat(t.index, 1); this.deleteRange(t), this.quill.updateContents((new (d())).retain(t.index).insert(e, i), r.Ay.sources.USER) } else this.deleteRange(t); return this.quill.setSelection(t.index + e.length, 0, r.Ay.sources.SILENT), !0 } handleBeforeInput(t) { var e; if (this.quill.composition.isComposing || t.defaultPrevented || !w.includes(t.inputType)) return; let i = t.getTargetRanges ? t.getTargetRanges()[0] : null; if (!i || !0 === i.collapsed) return; let r = "string" == typeof (e = t).data ? e.data : e.dataTransfer?.types.includes("text/plain") ? e.dataTransfer.getData("text/plain") : null; if (null == r) return; let n = this.quill.selection.normalizeNative(i), s = n ? this.quill.selection.normalizedToRange(n) : null; s && this.replaceText(s, r) && t.preventDefault() } handleCompositionStart() { let t = this.quill.getSelection(); t && this.replaceText(t) } } let k = /Mac/i.test(navigator.platform); class L extends y.A { isListening = !1; selectionChangeDeadline = 0; constructor(t, e) { super(t, e), this.handleArrowKeys(), this.handleNavigationShortcuts() } handleArrowKeys() { this.quill.keyboard.addBinding({ key: ["ArrowLeft", "ArrowRight"], offset: 0, shiftKey: null, handler(t, e) { let { line: i, event: n } = e; if (!(i instanceof c.ParentBlot && i.uiNode)) return !0; let s = "rtl" === getComputedStyle(i.domNode).direction; return !!(s && "ArrowRight" !== n.key || !s && "ArrowLeft" !== n.key) || (this.quill.setSelection(t.index - 1, t.length + (n.shiftKey ? 1 : 0), r.Ay.sources.USER), !1) } }) } handleNavigationShortcuts() { this.quill.root.addEventListener("keydown", t => { var e; t.defaultPrevented || "ArrowLeft" !== (e = t).key && "ArrowRight" !== e.key && "ArrowUp" !== e.key && "ArrowDown" !== e.key && "Home" !== e.key && (!k || "a" !== e.key || !0 !== e.ctrlKey) || this.ensureListeningToSelectionChange() }) } ensureListeningToSelectionChange() { this.selectionChangeDeadline = Date.now() + 100, this.isListening || (this.isListening = !0, document.addEventListener("selectionchange", () => { this.isListening = !1, Date.now() <= this.selectionChangeDeadline && this.handleSelectionChange() }, { once: !0 })) } handleSelectionChange() { let t = document.getSelection(); if (!t) return; let e = t.getRangeAt(0); if (!0 !== e.collapsed || 0 !== e.startOffset) return; let i = this.quill.scroll.find(e.startContainer); if (!(i instanceof c.ParentBlot && i.uiNode)) return; let r = document.createRange(); r.setStartAfter(i.uiNode), r.setEndAfter(i.uiNode), t.removeAllRanges(), t.addRange(r) } } r.Ay.register({ "blots/block": n.Ay, "blots/block/embed": n.zo, "blots/break": s.A, "blots/container": l.A, "blots/cursor": o.A, "blots/embed": a.A, "blots/inline": u.A, "blots/scroll": p, "blots/text": m.A, "modules/clipboard": b.Ay, "modules/history": v, "modules/keyboard": N.Ay, "modules/uploader": E, "modules/input": q, "modules/uiNode": L }); var S = r.Ay }, 5374: function (t, e, i) { "use strict"; i.d(e, { A: function () { return l } }); var r = i(8920), n = i(7356); let s = (0, i(6078).A)("quill:events");["selectionchange", "mousedown", "mouseup", "click"].forEach(t => { document.addEventListener(t, function () { for (var t = arguments.length, e = Array(t), i = 0; i < t; i++)e[i] = arguments[i]; Array.from(document.querySelectorAll(".ql-container")).forEach(t => { let i = n.A.get(t); i && i.emitter && i.emitter.handleDOM(...e) }) }) }); var l = class extends r { static events = { EDITOR_CHANGE: "editor-change", SCROLL_BEFORE_UPDATE: "scroll-before-update", SCROLL_BLOT_MOUNT: "scroll-blot-mount", SCROLL_BLOT_UNMOUNT: "scroll-blot-unmount", SCROLL_OPTIMIZE: "scroll-optimize", SCROLL_UPDATE: "scroll-update", SCROLL_EMBED_UPDATE: "scroll-embed-update", SELECTION_CHANGE: "selection-change", TEXT_CHANGE: "text-change", COMPOSITION_BEFORE_START: "composition-before-start", COMPOSITION_START: "composition-start", COMPOSITION_BEFORE_END: "composition-before-end", COMPOSITION_END: "composition-end" }; static sources = { API: "api", SILENT: "silent", USER: "user" }; constructor() { super(), this.domListeners = {}, this.on("error", s.error) } emit() { for (var t = arguments.length, e = Array(t), i = 0; i < t; i++)e[i] = arguments[i]; return s.log.call(s, ...e), super.emit(...e) } handleDOM(t) { for (var e = arguments.length, i = Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++)i[r - 1] = arguments[r]; (this.domListeners[t.type] || []).forEach(e => { let { node: r, handler: n } = e; (t.target === r || r.contains(t.target)) && n(t, ...i) }) } listenDOM(t, e, i) { this.domListeners[t] || (this.domListeners[t] = []), this.domListeners[t].push({ node: e, handler: i }) } } }, 7356: function (t, e) { "use strict"; e.A = new WeakMap }, 6078: function (t, e) { "use strict"; let i = ["error", "warn", "log", "info"], r = "warn"; function n(t) { if (r && i.indexOf(t) <= i.indexOf(r)) { for (var e = arguments.length, n = Array(e > 1 ? e - 1 : 0), s = 1; s < e; s++)n[s - 1] = arguments[s]; console[t](...n) } } function s(t) { return i.reduce((e, i) => (e[i] = n.bind(console, i, t), e), {}) } s.level = t => { r = t }, n.level = s.level, e.A = s }, 4266: function (t, e) { "use strict"; e.A = class { static DEFAULTS = {}; constructor(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; this.quill = t, this.options = e } } }, 6142: function (t, e, i) { "use strict"; i.d(e, { Ay: function () { return O } }); var r = i(8347), n = i(6003), s = i(5232), l = i.n(s), o = i(3707), a = i(5123), u = i(9698), c = i(3036), h = i(4541), d = i(5508), f = i(8298); let $ = /^[ -~]*$/; function _(t, e, i) { let r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; if ("html" in t && "function" == typeof t.html) return t.html(e, i); if (t instanceof d.A) return (0, d.X)(t.value().slice(e, e + i)); if (t instanceof n.ParentBlot) { if ("list-container" === t.statics.blotName) { let s = []; return t.children.forEachAt(e, i, (t, e, i) => { let r = "formats" in t && "function" == typeof t.formats ? t.formats() : {}; s.push({ child: t, offset: e, length: i, indent: r.indent || 0, type: r.list }) }), function t(e, i, r) { if (0 === e.length) { let [n] = g(r.pop()); return i <= 0 ? `</li></${n}>` : `</li></${n}>${t([], i - 1, r)}` } let [{ child: s, offset: l, length: o, indent: a, type: u }, ...c] = e, [h, d] = g(u); if (a > i) return r.push(u), a === i + 1 ? `<${h}><li${d}>${_(s, l, o)}${t(c, a, r)}` : `<${h}><li>${t(e, i + 1, r)}`; let f = r[r.length - 1]; if (a === i && u === f) return `</li><li${d}>${_(s, l, o)}${t(c, a, r)}`; let [$] = g(r.pop()); return `</li></${$}>${t(e, i - 1, r)}` }(s, -1, []) } let l = []; if (t.children.forEachAt(e, i, (t, e, i) => { l.push(_(t, e, i)) }), r || "list" === t.statics.blotName) return l.join(""); let { outerHTML: o, innerHTML: a } = t.domNode, [u, c] = o.split(`>${a}<`); return "<table" === u ? `<table style="border: 1px solid #000;">${l.join("")}<${c}` : `${u}>${l.join("")}<${c}` } return t.domNode instanceof Element ? t.domNode.outerHTML : "" } function p(t, e) { return Object.keys(e).reduce((i, r) => { if (null == t[r]) return i; let n = e[r]; return n === t[r] ? i[r] = n : Array.isArray(n) ? 0 > n.indexOf(t[r]) ? i[r] = n.concat([t[r]]) : i[r] = n : i[r] = [n, t[r]], i }, {}) } function g(t) { let e = "ordered" === t ? "ol" : "ul"; switch (t) { case "checked": return [e, ' data-list="checked"']; case "unchecked": return [e, ' data-list="unchecked"']; default: return [e, ""] } } function m(t) { return t.reduce((t, e) => { if ("string" == typeof e.insert) { let i = e.insert.replace(/\r\n/g, "\n").replace(/\r/g, "\n"); return t.insert(i, e.attributes) } return t.push(e) }, new (l())) } function b(t, e) { let { index: i, length: r } = t; return new f.Q(i + e, r) } var y = class { constructor(t) { this.scroll = t, this.delta = this.getDelta() } applyDelta(t) { this.scroll.update(); let e = this.scroll.length(); this.scroll.batchStart(); let i = m(t), o = new (l()); return (function (t) { let e = []; return t.forEach(t => { "string" == typeof t.insert ? t.insert.split("\n").forEach((i, r) => { r && e.push({ insert: "\n", attributes: t.attributes }), i && e.push({ insert: i, attributes: t.attributes }) }) : e.push(t) }), e })(i.ops.slice()).reduce((t, i) => { let l = s.Op.length(i), a = i.attributes || {}, c = !1, h = !1; if (null != i.insert) { if (o.retain(l), "string" == typeof i.insert) { let f = i.insert; h = !f.endsWith("\n") && (e <= t || !!this.scroll.descendant(u.zo, t)[0]), this.scroll.insertAt(t, f); let [$, _] = this.scroll.line(t), p = (0, r.A)({}, (0, u.Ji)($)); if ($ instanceof u.Ay) { let [g] = $.descendant(n.LeafBlot, _); g && (p = (0, r.A)(p, (0, u.Ji)(g))) } a = s.AttributeMap.diff(p, a) || {} } else if ("object" == typeof i.insert) { let m = Object.keys(i.insert)[0]; if (null == m) return t; let b = null != this.scroll.query(m, n.Scope.INLINE); if (b) (e <= t || this.scroll.descendant(u.zo, t)[0]) && (h = !0); else if (t > 0) { let [y, v] = this.scroll.descendant(n.LeafBlot, t - 1); y instanceof d.A ? "\n" !== y.value()[v] && (c = !0) : y instanceof n.EmbedBlot && y.statics.scope === n.Scope.INLINE_BLOT && (c = !0) } if (this.scroll.insertAt(t, m, i.insert[m]), b) { let [A] = this.scroll.descendant(n.LeafBlot, t); if (A) { let x = (0, r.A)({}, (0, u.Ji)(A)); a = s.AttributeMap.diff(x, a) || {} } } } e += l } else if (o.push(i), null !== i.retain && "object" == typeof i.retain) { let N = Object.keys(i.retain)[0]; if (null == N) return t; this.scroll.updateEmbedAt(t, N, i.retain[N]) } Object.keys(a).forEach(e => { this.scroll.formatAt(t, l, e, a[e]) }); let E = c ? 1 : 0, w = h ? 1 : 0; return e += E + w, o.retain(E), o.delete(w), t + l + E + w }, 0), o.reduce((t, e) => "number" == typeof e.delete ? (this.scroll.deleteAt(t, e.delete), t) : t + s.Op.length(e), 0), this.scroll.batchEnd(), this.scroll.optimize(), this.update(i) } deleteText(t, e) { return this.scroll.deleteAt(t, e), this.update((new (l())).retain(t).delete(e)) } formatLine(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; this.scroll.update(), Object.keys(i).forEach(r => { this.scroll.lines(t, Math.max(e, 1)).forEach(t => { t.format(r, i[r]) }) }), this.scroll.optimize(); let r = (new (l())).retain(t).retain(e, (0, o.A)(i)); return this.update(r) } formatText(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; Object.keys(i).forEach(r => { this.scroll.formatAt(t, e, r, i[r]) }); let r = (new (l())).retain(t).retain(e, (0, o.A)(i)); return this.update(r) } getContents(t, e) { return this.delta.slice(t, t + e) } getDelta() { return this.scroll.lines().reduce((t, e) => t.concat(e.delta()), new (l())) } getFormat(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = [], r = []; 0 === e ? this.scroll.path(t).forEach(t => { let [e] = t; e instanceof u.Ay ? i.push(e) : e instanceof n.LeafBlot && r.push(e) }) : (i = this.scroll.lines(t, e), r = this.scroll.descendants(n.LeafBlot, t, e)); let [s, l] = [i, r].map(t => { let e = t.shift(); if (null == e) return {}; let i = (0, u.Ji)(e); for (; Object.keys(i).length > 0;) { let r = t.shift(); if (null == r) break; i = p((0, u.Ji)(r), i) } return i }); return { ...s, ...l } } getHTML(t, e) { let [i, r] = this.scroll.line(t); if (i) { let n = i.length(); return i.length() >= r + e && (0 !== r || e !== n) ? _(i, r, e, !0) : _(this.scroll, t, e, !0) } return "" } getText(t, e) { return this.getContents(t, e).filter(t => "string" == typeof t.insert).map(t => t.insert).join("") } insertContents(t, e) { let i = m(e), r = (new (l())).retain(t).concat(i); return this.scroll.insertContents(t, i), this.update(r) } insertEmbed(t, e, i) { return this.scroll.insertAt(t, e, i), this.update((new (l())).retain(t).insert({ [e]: i })) } insertText(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; return e = e.replace(/\r\n/g, "\n").replace(/\r/g, "\n"), this.scroll.insertAt(t, e), Object.keys(i).forEach(r => { this.scroll.formatAt(t, e.length, r, i[r]) }), this.update((new (l())).retain(t).insert(e, (0, o.A)(i))) } isBlank() { if (0 === this.scroll.children.length) return !0; if (this.scroll.children.length > 1) return !1; let t = this.scroll.children.head; if (t?.statics.blotName !== u.Ay.blotName) return !1; let e = t; return !(e.children.length > 1) && e.children.head instanceof c.A } removeFormat(t, e) { let i = this.getText(t, e), [r, n] = this.scroll.line(t + e), s = 0, o = new (l()); null != r && (s = r.length() - n, o = r.delta().slice(n, n + s - 1).insert("\n")); let a = this.getContents(t, e + s).diff((new (l())).insert(i).concat(o)), u = (new (l())).retain(t).concat(a); return this.applyDelta(u) } update(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, r = this.delta; if (1 === e.length && "characterData" === e[0].type && e[0].target.data.match($) && this.scroll.find(e[0].target)) { let n = this.scroll.find(e[0].target), s = (0, u.Ji)(n), o = n.offset(this.scroll), c = e[0].oldValue.replace(h.A.CONTENTS, ""), d = (new (l())).insert(c), f = (new (l())).insert(n.value()), _ = i && { oldRange: b(i.oldRange, -o), newRange: b(i.newRange, -o) }; t = (new (l())).retain(o).concat(d.diff(f, _)).reduce((t, e) => e.insert ? t.insert(e.insert, s) : t.push(e), new (l())), this.delta = r.compose(t) } else this.delta = this.getDelta(), t && (0, a.A)(r.compose(t), this.delta) || (t = r.diff(this.delta, i)); return t } }, v = i(5374), A = i(7356), x = i(6078), N = i(4266), E = i(746), w = i(9609); let q = t => { let e = t.getBoundingClientRect(), i = "offsetWidth" in t && Math.abs(e.width) / t.offsetWidth || 1, r = "offsetHeight" in t && Math.abs(e.height) / t.offsetHeight || 1; return { top: e.top, right: e.left + t.clientWidth * i, bottom: e.top + t.clientHeight * r, left: e.left } }, k = t => { let e = parseInt(t, 10); return Number.isNaN(e) ? 0 : e }, L = (t, e, i, r, n, s) => t < i && e > r ? 0 : t < i ? -(i - t + n) : e > r ? e - t > r - i ? t + n - i : e - r + s : 0, S = ["block", "break", "cursor", "inline", "scroll", "text"], T = (0, x.A)("quill"), C = new n.Registry; n.ParentBlot.uiClass = "ql-ui"; class O { static DEFAULTS = { bounds: null, modules: { clipboard: !0, keyboard: !0, history: !0, uploader: !0 }, placeholder: "", readOnly: !1, registry: C, theme: "default" }; static events = v.A.events; static sources = v.A.sources; static version = "2.0.2"; static imports = { delta: l(), parchment: n, "core/module": N.A, "core/theme": w.A }; static debug(t) { !0 === t && (t = "log"), x.A.level(t) } static find(t) { let e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return A.A.get(t) || C.find(t, e) } static import(t) { return null == this.imports[t] && T.error(`Cannot import ${t}. Are you sure it was registered?`), this.imports[t] } static register() { if ("string" != typeof (arguments.length <= 0 ? void 0 : arguments[0])) { let t = arguments.length <= 0 ? void 0 : arguments[0], e = !!(arguments.length <= 1 ? void 0 : arguments[1]), i = "attrName" in t ? t.attrName : t.blotName; "string" == typeof i ? this.register(`formats/${i}`, t, e) : Object.keys(t).forEach(i => { this.register(i, t[i], e) }) } else { let r = arguments.length <= 0 ? void 0 : arguments[0], n = arguments.length <= 1 ? void 0 : arguments[1], s = !!(arguments.length <= 2 ? void 0 : arguments[2]); null == this.imports[r] || s || T.warn(`Overwriting ${r} with`, n), this.imports[r] = n, (r.startsWith("blots/") || r.startsWith("formats/")) && n && "boolean" != typeof n && "abstract" !== n.blotName && C.register(n), "function" == typeof n.register && n.register(C) } } constructor(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (this.options = function (t, e) { let i = R(t); if (!i) throw Error("Invalid Quill container"); let s = e.theme && e.theme !== O.DEFAULTS.theme ? O.import(`themes/${e.theme}`) : w.A; if (!s) throw Error(`Invalid theme ${e.theme}. Did you register it?`); let { modules: l, ...o } = O.DEFAULTS, { modules: a, ...u } = s.DEFAULTS, c = B(e.modules); null != c && c.toolbar && c.toolbar.constructor !== Object && (c = { ...c, toolbar: { container: c.toolbar } }); let h = (0, r.A)({}, B(l), B(a), c), d = { ...o, ...I(u), ...I(e) }, f = e.registry; return f ? e.formats && T.warn('Ignoring "formats" option because "registry" is specified') : f = e.formats ? ((t, e, i) => { let r = new n.Registry; return S.forEach(t => { let i = e.query(t); i && r.register(i) }), t.forEach(t => { let n = e.query(t); n || i.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`); let s = 0; for (; n;)if (r.register(n), n = "blotName" in n ? n.requiredContainer ?? null : null, (s += 1) > 100) { i.error(`Cycle detected in registering blot requiredContainer: "${t}"`); break } }), r })(e.formats, d.registry, T) : d.registry, { ...d, registry: f, container: i, theme: s, modules: Object.entries(h).reduce((t, e) => { let [i, n] = e; if (!n) return t; let s = O.import(`modules/${i}`); return null == s ? (T.error(`Cannot load ${i} module. Are you sure you registered it?`), t) : { ...t, [i]: (0, r.A)({}, s.DEFAULTS || {}, n) } }, {}), bounds: R(d.bounds) } }(t, e), this.container = this.options.container, null == this.container) return void T.error("Invalid Quill container", t); this.options.debug && O.debug(this.options.debug); let i = this.container.innerHTML.trim(); this.container.classList.add("ql-container"), this.container.innerHTML = "", A.A.set(this.container, this), this.root = this.addContainer("ql-editor"), this.root.classList.add("ql-blank"), this.emitter = new v.A; let s = n.ScrollBlot.blotName, o = this.options.registry.query(s); if (!o || !("blotName" in o)) throw Error(`Cannot initialize Quill without "${s}" blot`); if (this.scroll = new o(this.options.registry, this.root, { emitter: this.emitter }), this.editor = new y(this.scroll), this.selection = new f.A(this.scroll, this.emitter), this.composition = new class { isComposing = !1; constructor(t, e) { this.scroll = t, this.emitter = e, this.setupListeners() } setupListeners() { this.scroll.domNode.addEventListener("compositionstart", t => { this.isComposing || this.handleCompositionStart(t) }), this.scroll.domNode.addEventListener("compositionend", t => { this.isComposing && queueMicrotask(() => { this.handleCompositionEnd(t) }) }) } handleCompositionStart(t) { let e = t.target instanceof Node ? this.scroll.find(t.target, !0) : null; !e || e instanceof E.A || (this.emitter.emit(v.A.events.COMPOSITION_BEFORE_START, t), this.scroll.batchStart(), this.emitter.emit(v.A.events.COMPOSITION_START, t), this.isComposing = !0) } handleCompositionEnd(t) { this.emitter.emit(v.A.events.COMPOSITION_BEFORE_END, t), this.scroll.batchEnd(), this.emitter.emit(v.A.events.COMPOSITION_END, t), this.isComposing = !1 } }(this.scroll, this.emitter), this.theme = new this.options.theme(this, this.options), this.keyboard = this.theme.addModule("keyboard"), this.clipboard = this.theme.addModule("clipboard"), this.history = this.theme.addModule("history"), this.uploader = this.theme.addModule("uploader"), this.theme.addModule("input"), this.theme.addModule("uiNode"), this.theme.init(), this.emitter.on(v.A.events.EDITOR_CHANGE, t => { t === v.A.events.TEXT_CHANGE && this.root.classList.toggle("ql-blank", this.editor.isBlank()) }), this.emitter.on(v.A.events.SCROLL_UPDATE, (t, e) => { let i = this.selection.lastRange, [r] = this.selection.getRange(), n = i && r ? { oldRange: i, newRange: r } : void 0; j.call(this, () => this.editor.update(null, e, n), t) }), this.emitter.on(v.A.events.SCROLL_EMBED_UPDATE, (t, e) => { let i = this.selection.lastRange, [r] = this.selection.getRange(), n = i && r ? { oldRange: i, newRange: r } : void 0; j.call(this, () => { let i = (new (l())).retain(t.offset(this)).retain({ [t.statics.blotName]: e }); return this.editor.update(i, [], n) }, O.sources.USER) }), i) { let a = this.clipboard.convert({ html: `${i}<p><br></p>`, text: "\n" }); this.setContents(a) } this.history.clear(), this.options.placeholder && this.root.setAttribute("data-placeholder", this.options.placeholder), this.options.readOnly && this.disable(), this.allowReadOnlyEdits = !1 } addContainer(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; if ("string" == typeof t) { let i = t; (t = document.createElement("div")).classList.add(i) } return this.container.insertBefore(t, e), t } blur() { this.selection.setRange(null) } deleteText(t, e, i) { return [t, e, , i] = U(t, e, i), j.call(this, () => this.editor.deleteText(t, e), i, t, -1 * e) } disable() { this.enable(!1) } editReadOnly(t) { this.allowReadOnlyEdits = !0; let e = t(); return this.allowReadOnlyEdits = !1, e } enable() { let t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; this.scroll.enable(t), this.container.classList.toggle("ql-disabled", !t) } focus() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; this.selection.focus(), t.preventScroll || this.scrollSelectionIntoView() } format(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : v.A.sources.API; return j.call(this, () => { let i = this.getSelection(!0), r = new (l()); if (null == i) return r; if (this.scroll.query(t, n.Scope.BLOCK)) r = this.editor.formatLine(i.index, i.length, { [t]: e }); else { if (0 === i.length) return this.selection.format(t, e), r; r = this.editor.formatText(i.index, i.length, { [t]: e }) } return this.setSelection(i, v.A.sources.SILENT), r }, i) } formatLine(t, e, i, r, n) { let s; return [t, e, s, n] = U(t, e, i, r, n), j.call(this, () => this.editor.formatLine(t, e, s), n, t, 0) } formatText(t, e, i, r, n) { let s; return [t, e, s, n] = U(t, e, i, r, n), j.call(this, () => this.editor.formatText(t, e, s), n, t, 0) } getBounds(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = null; if (!(i = "number" == typeof t ? this.selection.getBounds(t, e) : this.selection.getBounds(t.index, t.length))) return null; let r = this.container.getBoundingClientRect(); return { bottom: i.bottom - r.top, height: i.height, left: i.left - r.left, right: i.right - r.left, top: i.top - r.top, width: i.width } } getContents() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.getLength() - t; return [t, e] = U(t, e), this.editor.getContents(t, e) } getFormat() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.getSelection(!0), e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return "number" == typeof t ? this.editor.getFormat(t, e) : this.editor.getFormat(t.index, t.length) } getIndex(t) { return t.offset(this.scroll) } getLength() { return this.scroll.length() } getLeaf(t) { return this.scroll.leaf(t) } getLine(t) { return this.scroll.line(t) } getLines() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE; return "number" != typeof t ? this.scroll.lines(t.index, t.length) : this.scroll.lines(t, e) } getModule(t) { return this.theme.modules[t] } getSelection() { return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] && this.focus(), this.update(), this.selection.getRange()[0] } getSemanticHTML() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = arguments.length > 1 ? arguments[1] : void 0; return "number" == typeof t && (e = e ?? this.getLength() - t), [t, e] = U(t, e), this.editor.getHTML(t, e) } getText() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = arguments.length > 1 ? arguments[1] : void 0; return "number" == typeof t && (e = e ?? this.getLength() - t), [t, e] = U(t, e), this.editor.getText(t, e) } hasFocus() { return this.selection.hasFocus() } insertEmbed(t, e, i) { let r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : O.sources.API; return j.call(this, () => this.editor.insertEmbed(t, e, i), r, t) } insertText(t, e, i, r, n) { let s; return [t, , s, n] = U(t, 0, i, r, n), j.call(this, () => this.editor.insertText(t, e, s), n, t, e.length) } isEnabled() { return this.scroll.isEnabled() } off() { return this.emitter.off(...arguments) } on() { return this.emitter.on(...arguments) } once() { return this.emitter.once(...arguments) } removeFormat(t, e, i) { return [t, e, , i] = U(t, e, i), j.call(this, () => this.editor.removeFormat(t, e), i, t) } scrollRectIntoView(t) { ((t, e) => { var i; let r = t.ownerDocument, n = e, s = t; for (; s;) { let l = s === r.body, o = l ? { top: 0, right: window.visualViewport?.width ?? r.documentElement.clientWidth, bottom: window.visualViewport?.height ?? r.documentElement.clientHeight, left: 0 } : q(s), a = getComputedStyle(s), u = L(n.left, n.right, o.left, o.right, k(a.scrollPaddingLeft), k(a.scrollPaddingRight)), c = L(n.top, n.bottom, o.top, o.bottom, k(a.scrollPaddingTop), k(a.scrollPaddingBottom)); if (u || c) { if (l) r.defaultView?.scrollBy(u, c); else { let { scrollLeft: h, scrollTop: d } = s; c && (s.scrollTop += c), u && (s.scrollLeft += u); let f = s.scrollLeft - h, $ = s.scrollTop - d; n = { left: n.left - f, top: n.top - $, right: n.right - f, bottom: n.bottom - $ } } } s = l || "fixed" === a.position ? null : (i = s).parentElement || i.getRootNode().host || null } })(this.root, t) } scrollIntoView() { console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."), this.scrollSelectionIntoView() } scrollSelectionIntoView() { let t = this.selection.lastRange, e = t && this.selection.getBounds(t.index, t.length); e && this.scrollRectIntoView(e) } setContents(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : v.A.sources.API; return j.call(this, () => { t = new (l())(t); let e = this.getLength(), i = this.editor.deleteText(0, e), r = this.editor.insertContents(0, t), n = this.editor.deleteText(this.getLength() - 1, 1); return i.compose(r).compose(n) }, e) } setSelection(t, e, i) { null == t ? this.selection.setRange(null, e || O.sources.API) : ([t, e, , i] = U(t, e, i), this.selection.setRange(new f.Q(Math.max(0, t), e), i), i !== v.A.sources.SILENT && this.scrollSelectionIntoView()) } setText(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : v.A.sources.API, i = (new (l())).insert(t); return this.setContents(i, e) } update() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : v.A.sources.USER, e = this.scroll.update(t); return this.selection.update(t), e } updateContents(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : v.A.sources.API; return j.call(this, () => (t = new (l())(t), this.editor.applyDelta(t)), e, !0) } } function R(t) { return "string" == typeof t ? document.querySelector(t) : t } function B(t) { return Object.entries(t ?? {}).reduce((t, e) => { let [i, r] = e; return { ...t, [i]: !0 === r ? {} : r } }, {}) } function I(t) { return Object.fromEntries(Object.entries(t).filter(t => void 0 !== t[1])) } function j(t, e, i, r) { if (!this.isEnabled() && e === v.A.sources.USER && !this.allowReadOnlyEdits) return new (l()); let n = null == i ? null : this.getSelection(), s = this.editor.delta, o = t(); if (null != n && (!0 === i && (i = n.index), null == r ? n = M(n, o, e) : 0 !== r && (n = M(n, i, r, e)), this.setSelection(n, v.A.sources.SILENT)), o.length() > 0) { let a = [v.A.events.TEXT_CHANGE, o, s, e]; this.emitter.emit(v.A.events.EDITOR_CHANGE, ...a), e !== v.A.sources.SILENT && this.emitter.emit(...a) } return o } function U(t, e, i, r, n) { let s = {}; return "number" == typeof t.index && "number" == typeof t.length ? "number" != typeof e ? (n = r, r = i, i = e, e = t.length, t = t.index) : (e = t.length, t = t.index) : "number" != typeof e && (n = r, r = i, i = e, e = 0), "object" == typeof i ? (s = i, n = r) : "string" == typeof i && (null != r ? s[i] = r : n = i), [t, e, s, n = n || v.A.sources.API] } function M(t, e, i, r) { let n = "number" == typeof i ? i : 0; if (null == t) return null; let s, l; return e && "function" == typeof e.transformPosition ? [s, l] = [t.index, t.index + t.length].map(t => e.transformPosition(t, r !== v.A.sources.USER)) : [s, l] = [t.index, t.index + t.length].map(t => t < e || t === e && r === v.A.sources.USER ? t : n >= 0 ? t + n : Math.max(e, t + n)), new f.Q(s, l - s) } }, 8298: function (t, e, i) { "use strict"; i.d(e, { Q: function () { return a } }); var r = i(6003), n = i(5123), s = i(3707), l = i(5374); let o = (0, i(6078).A)("quill:selection"); class a { constructor(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; this.index = t, this.length = e } } function u(t, e) { try { e.parentNode } catch (i) { return !1 } return t.contains(e) } e.A = class { constructor(t, e) { this.emitter = e, this.scroll = t, this.composing = !1, this.mouseDown = !1, this.root = this.scroll.domNode, this.cursor = this.scroll.create("cursor", this), this.savedRange = new a(0, 0), this.lastRange = this.savedRange, this.lastNative = null, this.handleComposition(), this.handleDragging(), this.emitter.listenDOM("selectionchange", document, () => { this.mouseDown || this.composing || setTimeout(this.update.bind(this, l.A.sources.USER), 1) }), this.emitter.on(l.A.events.SCROLL_BEFORE_UPDATE, () => { if (!this.hasFocus()) return; let t = this.getNativeRange(); null != t && t.start.node !== this.cursor.textNode && this.emitter.once(l.A.events.SCROLL_UPDATE, (e, i) => { try { this.root.contains(t.start.node) && this.root.contains(t.end.node) && this.setNativeRange(t.start.node, t.start.offset, t.end.node, t.end.offset); let r = i.some(t => "characterData" === t.type || "childList" === t.type || "attributes" === t.type && t.target === this.root); this.update(r ? l.A.sources.SILENT : e) } catch (n) { } }) }), this.emitter.on(l.A.events.SCROLL_OPTIMIZE, (t, e) => { if (e.range) { let { startNode: i, startOffset: r, endNode: n, endOffset: s } = e.range; this.setNativeRange(i, r, n, s), this.update(l.A.sources.SILENT) } }), this.update(l.A.sources.SILENT) } handleComposition() { this.emitter.on(l.A.events.COMPOSITION_BEFORE_START, () => { this.composing = !0 }), this.emitter.on(l.A.events.COMPOSITION_END, () => { if (this.composing = !1, this.cursor.parent) { let t = this.cursor.restore(); t && setTimeout(() => { this.setNativeRange(t.startNode, t.startOffset, t.endNode, t.endOffset) }, 1) } }) } handleDragging() { this.emitter.listenDOM("mousedown", document.body, () => { this.mouseDown = !0 }), this.emitter.listenDOM("mouseup", document.body, () => { this.mouseDown = !1, this.update(l.A.sources.USER) }) } focus() { this.hasFocus() || (this.root.focus({ preventScroll: !0 }), this.setRange(this.savedRange)) } format(t, e) { this.scroll.update(); let i = this.getNativeRange(); if (null != i && i.native.collapsed && !this.scroll.query(t, r.Scope.BLOCK)) { if (i.start.node !== this.cursor.textNode) { let n = this.scroll.find(i.start.node, !1); if (null == n) return; if (n instanceof r.LeafBlot) { let s = n.split(i.start.offset); n.parent.insertBefore(this.cursor, s) } else n.insertBefore(this.cursor, i.start.node); this.cursor.attach() } this.cursor.format(t, e), this.scroll.optimize(), this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length), this.update() } } getBounds(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = this.scroll.length(), r; e = Math.min((t = Math.min(t, i - 1)) + e, i - 1) - t; let [n, s] = this.scroll.leaf(t); if (null == n) return null; if (e > 0 && s === n.length()) { let [l] = this.scroll.leaf(t + 1); if (l) { let [o] = this.scroll.line(t), [a] = this.scroll.line(t + 1); o === a && (n = l, s = 0) } } [r, s] = n.position(s, !0); let u = document.createRange(); if (e > 0) return u.setStart(r, s), [n, s] = this.scroll.leaf(t + e), null == n ? null : ([r, s] = n.position(s, !0), u.setEnd(r, s), u.getBoundingClientRect()); let c, h = "left"; if (r instanceof Text) { if (!r.data.length) return null; s < r.data.length ? (u.setStart(r, s), u.setEnd(r, s + 1)) : (u.setStart(r, s - 1), u.setEnd(r, s), h = "right"), c = u.getBoundingClientRect() } else { if (!(n.domNode instanceof Element)) return null; c = n.domNode.getBoundingClientRect(), s > 0 && (h = "right") } return { bottom: c.top + c.height, height: c.height, left: c[h], right: c[h], top: c.top, width: 0 } } getNativeRange() { let t = document.getSelection(); if (null == t || t.rangeCount <= 0) return null; let e = t.getRangeAt(0); if (null == e) return null; let i = this.normalizeNative(e); return o.info("getNativeRange", i), i } getRange() { let t = this.scroll.domNode; if ("isConnected" in t && !t.isConnected) return [null, null]; let e = this.getNativeRange(); return null == e ? [null, null] : [this.normalizedToRange(e), e] } hasFocus() { return document.activeElement === this.root || null != document.activeElement && u(this.root, document.activeElement) } normalizedToRange(t) { let e = [[t.start.node, t.start.offset]]; t.native.collapsed || e.push([t.end.node, t.end.offset]); let i = e.map(t => { let [e, i] = t, n = this.scroll.find(e, !0), s = n.offset(this.scroll); return 0 === i ? s : n instanceof r.LeafBlot ? s + n.index(e, i) : s + n.length() }), n = Math.min(Math.max(...i), this.scroll.length() - 1), s = Math.min(n, ...i); return new a(s, n - s) } normalizeNative(t) { if (!u(this.root, t.startContainer) || !t.collapsed && !u(this.root, t.endContainer)) return null; let e = { start: { node: t.startContainer, offset: t.startOffset }, end: { node: t.endContainer, offset: t.endOffset }, native: t }; return [e.start, e.end].forEach(t => { let { node: e, offset: i } = t; for (; !(e instanceof Text) && e.childNodes.length > 0;)if (e.childNodes.length > i) e = e.childNodes[i], i = 0; else { if (e.childNodes.length !== i) break; i = (e = e.lastChild) instanceof Text ? e.data.length : e.childNodes.length > 0 ? e.childNodes.length : e.childNodes.length + 1 } t.node = e, t.offset = i }), e } rangeToNative(t) { let e = this.scroll.length(), i = (t, i) => { t = Math.min(e - 1, t); let [r, n] = this.scroll.leaf(t); return r ? r.position(n, i) : [null, -1] }; return [...i(t.index, !1), ...i(t.index + t.length, !0)] } setNativeRange(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : e, n = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; if (o.info("setNativeRange", t, e, i, r), null != t && (null == this.root.parentNode || null == t.parentNode || null == i.parentNode)) return; let s = document.getSelection(); if (null != s) { if (null != t) { this.hasFocus() || this.root.focus({ preventScroll: !0 }); let { native: l } = this.getNativeRange() || {}; if (null == l || n || t !== l.startContainer || e !== l.startOffset || i !== l.endContainer || r !== l.endOffset) { t instanceof Element && "BR" === t.tagName && (e = Array.from(t.parentNode.childNodes).indexOf(t), t = t.parentNode), i instanceof Element && "BR" === i.tagName && (r = Array.from(i.parentNode.childNodes).indexOf(i), i = i.parentNode); let a = document.createRange(); a.setStart(t, e), a.setEnd(i, r), s.removeAllRanges(), s.addRange(a) } } else s.removeAllRanges(), this.root.blur() } } setRange(t) { let e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : l.A.sources.API; if ("string" == typeof e && (i = e, e = !1), o.info("setRange", t), null != t) { let r = this.rangeToNative(t); this.setNativeRange(...r, e) } else this.setNativeRange(null); this.update(i) } update() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : l.A.sources.USER, e = this.lastRange, [i, r] = this.getRange(); if (this.lastRange = i, this.lastNative = r, null != this.lastRange && (this.savedRange = this.lastRange), !(0, n.A)(e, this.lastRange)) { if (!this.composing && null != r && r.native.collapsed && r.start.node !== this.cursor.textNode) { let o = this.cursor.restore(); o && this.setNativeRange(o.startNode, o.startOffset, o.endNode, o.endOffset) } let a = [l.A.events.SELECTION_CHANGE, (0, s.A)(this.lastRange), (0, s.A)(e), t]; this.emitter.emit(l.A.events.EDITOR_CHANGE, ...a), t !== l.A.sources.SILENT && this.emitter.emit(...a) } } } }, 9609: function (t, e) { "use strict"; class i { static DEFAULTS = { modules: {} }; static themes = { default: i }; modules = {}; constructor(t, e) { this.quill = t, this.options = e } init() { Object.keys(this.options.modules).forEach(t => { null == this.modules[t] && this.addModule(t) }) } addModule(t) { let e = this.quill.constructor.import(`modules/${t}`); return this.modules[t] = new e(this.quill, this.options.modules[t] || {}), this.modules[t] } } e.A = i }, 8276: function (t, e, i) { "use strict"; i.d(e, { Hu: function () { return o }, gS: function () { return s }, qh: function () { return l } }); var r = i(6003); let n = { scope: r.Scope.BLOCK, whitelist: ["right", "center", "justify"] }, s = new r.Attributor("align", "align", n), l = new r.ClassAttributor("align", "ql-align", n), o = new r.StyleAttributor("align", "text-align", n) }, 9541: function (t, e, i) { "use strict"; i.d(e, { l: function () { return s }, s: function () { return l } }); var r = i(6003), n = i(8638); let s = new r.ClassAttributor("background", "ql-bg", { scope: r.Scope.INLINE }), l = new n.a2("background", "background-color", { scope: r.Scope.INLINE }) }, 9404: function (t, e, i) {
                "use strict"; i.d(e, { Ay: function () { return h }, Cy: function () { return d }, EJ: function () { return c } }); var r = i(9698), n = i(3036), s = i(4541), l = i(4850), o = i(5508), a = i(580), u = i(6142); class c extends a.A {
                    static create(t) { let e = super.create(t); return e.setAttribute("spellcheck", "false"), e } code(t, e) { return this.children.map(t => 1 >= t.length() ? "" : t.domNode.innerText).join("\n").slice(t, t + e) } html(t, e) {
                        return `<pre>
${(0, o.X)(this.code(t, e))}
</pre>`}
                } class h extends r.Ay { static TAB = "  "; static register() { u.Ay.register(c) } } class d extends l.A { } d.blotName = "code", d.tagName = "CODE", h.blotName = "code-block", h.className = "ql-code-block", h.tagName = "DIV", c.blotName = "code-block-container", c.className = "ql-code-block-container", c.tagName = "DIV", c.allowedChildren = [h], h.allowedChildren = [o.A, n.A, s.A], h.requiredContainer = c
            }, 8638: function (t, e, i) { "use strict"; i.d(e, { JM: function () { return l }, a2: function () { return n }, g3: function () { return s } }); var r = i(6003); class n extends r.StyleAttributor { value(t) { let e = super.value(t); return e.startsWith("rgb(") ? `#${(e = e.replace(/^[^\d]+/, "").replace(/[^\d]+$/, "")).split(",").map(t => `00${parseInt(t, 10).toString(16)}`.slice(-2)).join("")}` : e } } let s = new r.ClassAttributor("color", "ql-color", { scope: r.Scope.INLINE }), l = new n("color", "color", { scope: r.Scope.INLINE }) }, 7912: function (t, e, i) { "use strict"; i.d(e, { Mc: function () { return s }, VL: function () { return o }, sY: function () { return l } }); var r = i(6003); let n = { scope: r.Scope.BLOCK, whitelist: ["rtl"] }, s = new r.Attributor("direction", "dir", n), l = new r.ClassAttributor("direction", "ql-direction", n), o = new r.StyleAttributor("direction", "direction", n) }, 6772: function (t, e, i) { "use strict"; i.d(e, { q: function () { return s }, z: function () { return o } }); var r = i(6003); let n = { scope: r.Scope.INLINE, whitelist: ["serif", "monospace"] }, s = new r.ClassAttributor("font", "ql-font", n); class l extends r.StyleAttributor { value(t) { return super.value(t).replace(/["']/g, "") } } let o = new l("font", "font-family", n) }, 664: function (t, e, i) { "use strict"; i.d(e, { U: function () { return n }, r: function () { return s } }); var r = i(6003); let n = new r.ClassAttributor("size", "ql-size", { scope: r.Scope.INLINE, whitelist: ["small", "large", "huge"] }), s = new r.StyleAttributor("size", "font-size", { scope: r.Scope.INLINE, whitelist: ["10px", "18px", "32px"] }) }, 584: function (t, e, i) { "use strict"; i.d(e, { Ay: function () { return L }, hV: function () { return R } }); var r = i(6003), n = i(5232), s = i.n(n), l = i(9698), o = i(6078), a = i(4266), u = i(6142), c = i(8276), h = i(9541), d = i(9404), f = i(8638), $ = i(7912), _ = i(6772), p = i(664), g = i(8123); let m = /font-weight:\s*normal/, b = ["P", "OL", "UL"], y = t => t && b.includes(t.tagName), v = /\bmso-list:[^;]*ignore/i, A = /\bmso-list:[^;]*\bl(\d+)/i, x = /\bmso-list:[^;]*\blevel(\d+)/i, N = [function (t) { "urn:schemas-microsoft-com:office:word" === t.documentElement.getAttribute("xmlns:w") && (t => { let e = Array.from(t.querySelectorAll("[style*=mso-list]")), i = [], r = []; e.forEach(t => { (t.getAttribute("style") || "").match(v) ? i.push(t) : r.push(t) }), i.forEach(t => t.parentNode?.removeChild(t)); let n = t.documentElement.innerHTML, s = r.map(t => ((t, e) => { let i = t.getAttribute("style"), r = i?.match(A); if (!r) return null; let n = Number(r[1]), s = i?.match(x), l = s ? Number(s[1]) : 1, o = RegExp(`@list l${n}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`, "i"), a = e.match(o); return { id: n, indent: l, type: a && "bullet" === a[1] ? "bullet" : "ordered", element: t } })(t, n)).filter(t => t); for (; s.length;) { let l = [], o = s.shift(); for (; o;)l.push(o), o = s.length && s[0]?.element === o.element.nextElementSibling && s[0].id === o.id ? s.shift() : null; let a = document.createElement("ul"); l.forEach(t => { let e = document.createElement("li"); e.setAttribute("data-list", t.type), t.indent > 1 && e.setAttribute("class", "ql-indent-" + (t.indent - 1)), e.innerHTML = t.element.innerHTML, a.appendChild(e) }); let u = l[0]?.element, { parentNode: c } = u ?? {}; u && c?.replaceChild(a, u), l.slice(1).forEach(t => { let { element: e } = t; c?.removeChild(e) }) } })(t) }, function (t) { t.querySelector('[id^="docs-internal-guid-"]') && ((t => { Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(t => t.getAttribute("style")?.match(m)).forEach(e => { let i = t.createDocumentFragment(); i.append(...e.childNodes), e.parentNode?.replaceChild(i, e) }) })(t), (t => { Array.from(t.querySelectorAll("br")).filter(t => y(t.previousElementSibling) && y(t.nextElementSibling)).forEach(t => { t.parentNode?.removeChild(t) }) })(t)) }], E = (0, o.A)("quill:clipboard"), w = [[Node.TEXT_NODE, function (t, e, i) { let r = t.data; if ("O:P" === t.parentElement?.tagName) return e.insert(r.trim()); if (!function t(e) { return null != e && (O.has(e) || ("PRE" === e.tagName ? O.set(e, !0) : O.set(e, t(e.parentNode))), O.get(e)) }(t)) { var n, s; if (0 === r.trim().length && r.includes("\n") && (n = t, s = i, !n.previousElementSibling || !n.nextElementSibling || C(n.previousElementSibling, s) || C(n.nextElementSibling, s))) return e; let l = (t, e) => { let i = e.replace(/[^\u00a0]/g, ""); return i.length < 1 && t ? " " : i }; r = (r = r.replace(/\r\n/g, " ").replace(/\n/g, " ")).replace(/\s\s+/g, l.bind(l, !0)), (null == t.previousSibling && null != t.parentElement && C(t.parentElement, i) || t.previousSibling instanceof Element && C(t.previousSibling, i)) && (r = r.replace(/^\s+/, l.bind(l, !1))), (null == t.nextSibling && null != t.parentElement && C(t.parentElement, i) || t.nextSibling instanceof Element && C(t.nextSibling, i)) && (r = r.replace(/\s+$/, l.bind(l, !1))) } return e.insert(r) }], [Node.TEXT_NODE, I], ["br", function (t, e) { return T(e, "\n") || e.insert("\n"), e }], [Node.ELEMENT_NODE, I], [Node.ELEMENT_NODE, function (t, e, i) { let n = i.query(t); if (null == n) return e; if (n.prototype instanceof r.EmbedBlot) { let l = {}, o = n.value(t); if (null != o) return l[n.blotName] = o, (new (s())).insert(l, n.formats(t, i)) } else if (n.prototype instanceof r.BlockBlot && !T(e, "\n") && e.insert("\n"), "blotName" in n && "formats" in n && "function" == typeof n.formats) return S(e, n.blotName, n.formats(t, i), i); return e }], [Node.ELEMENT_NODE, function (t, e, i) { let n = r.Attributor.keys(t), s = r.ClassAttributor.keys(t), l = r.StyleAttributor.keys(t), o = {}; return n.concat(s).concat(l).forEach(e => { let n = i.query(e, r.Scope.ATTRIBUTE); null != n && (o[n.attrName] = n.value(t), o[n.attrName]) || (null == (n = q[e]) || n.attrName !== e && n.keyName !== e || (o[n.attrName] = n.value(t) || void 0), null == (n = k[e]) || n.attrName !== e && n.keyName !== e || (o[(n = k[e]).attrName] = n.value(t) || void 0)) }), Object.entries(o).reduce((t, e) => { let [r, n] = e; return S(t, r, n, i) }, e) }], [Node.ELEMENT_NODE, function (t, e, i) { let r = {}, n = t.style || {}; return "italic" === n.fontStyle && (r.italic = !0), "underline" === n.textDecoration && (r.underline = !0), "line-through" === n.textDecoration && (r.strike = !0), (n.fontWeight?.startsWith("bold") || parseInt(n.fontWeight, 10) >= 700) && (r.bold = !0), e = Object.entries(r).reduce((t, e) => { let [r, n] = e; return S(t, r, n, i) }, e), parseFloat(n.textIndent || 0) > 0 ? (new (s())).insert("	").concat(e) : e }], ["li", function (t, e, i) { let r = i.query(t); if (null == r || "list" !== r.blotName || !T(e, "\n")) return e; let n = -1, l = t.parentNode; for (; null != l;) ["OL", "UL"].includes(l.tagName) && (n += 1), l = l.parentNode; return n <= 0 ? e : e.reduce((t, e) => e.insert ? e.attributes && "number" == typeof e.attributes.indent ? t.push(e) : t.insert(e.insert, { indent: n, ...e.attributes || {} }) : t, new (s())) }], ["ol, ul", function (t, e, i) { let r = t, n = "OL" === r.tagName ? "ordered" : "bullet", s = r.getAttribute("data-checked"); return s && (n = "true" === s ? "checked" : "unchecked"), S(e, "list", n, i) }], ["pre", function (t, e, i) { let r = i.query("code-block"); return S(e, "code-block", !r || !("formats" in r) || "function" != typeof r.formats || r.formats(t, i), i) }], ["tr", function (t, e, i) { let r = "TABLE" === t.parentElement?.tagName ? t.parentElement : t.parentElement?.parentElement; return null != r ? S(e, "table", Array.from(r.querySelectorAll("tr")).indexOf(t) + 1, i) : e }], ["b", B("bold")], ["i", B("italic")], ["strike", B("strike")], ["style", function () { return new (s()) }]], q = [c.gS, $.Mc].reduce((t, e) => (t[e.keyName] = e, t), {}), k = [c.Hu, h.s, f.JM, $.VL, _.z, p.r].reduce((t, e) => (t[e.keyName] = e, t), {}); class L extends a.A { static DEFAULTS = { matchers: [] }; constructor(t, e) { super(t, e), this.quill.root.addEventListener("copy", t => this.onCaptureCopy(t, !1)), this.quill.root.addEventListener("cut", t => this.onCaptureCopy(t, !0)), this.quill.root.addEventListener("paste", this.onCapturePaste.bind(this)), this.matchers = [], w.concat(this.options.matchers ?? []).forEach(t => { let [e, i] = t; this.addMatcher(e, i) }) } addMatcher(t, e) { this.matchers.push([t, e]) } convert(t) { let { html: e, text: i } = t, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (r[d.Ay.blotName]) return (new (s())).insert(i || "", { [d.Ay.blotName]: r[d.Ay.blotName] }); if (!e) return (new (s())).insert(i || "", r); let n = this.convertHTML(e); return T(n, "\n") && (null == n.ops[n.ops.length - 1].attributes || r.table) ? n.compose((new (s())).retain(n.length() - 1).delete(1)) : n } normalizeHTML(t) { var e; (e = t).documentElement && N.forEach(t => { t(e) }) } convertHTML(t) { let e = (new DOMParser).parseFromString(t, "text/html"); this.normalizeHTML(e); let i = e.body, r = new WeakMap, [n, s] = this.prepareMatching(i, r); return R(this.quill.scroll, i, n, s, r) } dangerouslyPasteHTML(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : u.Ay.sources.API; if ("string" == typeof t) { let r = this.convert({ html: t, text: "" }); this.quill.setContents(r, e), this.quill.setSelection(0, u.Ay.sources.SILENT) } else { let n = this.convert({ html: e, text: "" }); this.quill.updateContents((new (s())).retain(t).concat(n), i), this.quill.setSelection(t + n.length(), u.Ay.sources.SILENT) } } onCaptureCopy(t) { let e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (t.defaultPrevented) return; t.preventDefault(); let [i] = this.quill.selection.getRange(); if (null == i) return; let { html: r, text: n } = this.onCopy(i, e); t.clipboardData?.setData("text/plain", n), t.clipboardData?.setData("text/html", r), e && (0, g.Xo)({ range: i, quill: this.quill }) } normalizeURIList(t) { return t.split(/\r?\n/).filter(t => "#" !== t[0]).join("\n") } onCapturePaste(t) { if (t.defaultPrevented || !this.quill.isEnabled()) return; t.preventDefault(); let e = this.quill.getSelection(!0); if (null == e) return; let i = t.clipboardData?.getData("text/html"), r = t.clipboardData?.getData("text/plain"); if (!i && !r) { let n = t.clipboardData?.getData("text/uri-list"); n && (r = this.normalizeURIList(n)) } let s = Array.from(t.clipboardData?.files || []); if (!i && s.length > 0) this.quill.uploader.upload(e, s); else { if (i && s.length > 0) { let l = (new DOMParser).parseFromString(i, "text/html"); if (1 === l.body.childElementCount && "IMG" === l.body.firstElementChild?.tagName) return void this.quill.uploader.upload(e, s) } this.onPaste(e, { html: i, text: r }) } } onCopy(t) { let e = this.quill.getText(t); return { html: this.quill.getSemanticHTML(t), text: e } } onPaste(t, e) { let { text: i, html: r } = e, n = this.quill.getFormat(t.index), l = this.convert({ text: i, html: r }, n); E.log("onPaste", l, { text: i, html: r }); let o = (new (s())).retain(t.index).delete(t.length).concat(l); this.quill.updateContents(o, u.Ay.sources.USER), this.quill.setSelection(o.length() - t.length, u.Ay.sources.SILENT), this.quill.scrollSelectionIntoView() } prepareMatching(t, e) { let i = [], r = []; return this.matchers.forEach(n => { let [s, l] = n; switch (s) { case Node.TEXT_NODE: r.push(l); break; case Node.ELEMENT_NODE: i.push(l); break; default: Array.from(t.querySelectorAll(s)).forEach(t => { if (e.has(t)) { let i = e.get(t); i?.push(l) } else e.set(t, [l]) }) } }), [i, r] } } function S(t, e, i, r) { return r.query(e) ? t.reduce((t, r) => r.insert ? r.attributes && r.attributes[e] ? t.push(r) : t.insert(r.insert, { ...i ? { [e]: i } : {}, ...r.attributes }) : t, new (s())) : t } function T(t, e) { let i = ""; for (let r = t.ops.length - 1; r >= 0 && i.length < e.length; --r) { let n = t.ops[r]; if ("string" != typeof n.insert) break; i = n.insert + i } return i.slice(-1 * e.length) === e } function C(t, e) { if (!(t instanceof Element)) return !1; let i = e.query(t); return !(i && i.prototype instanceof r.EmbedBlot) && ["address", "article", "blockquote", "canvas", "dd", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "iframe", "li", "main", "nav", "ol", "output", "p", "pre", "section", "table", "td", "tr", "ul", "video"].includes(t.tagName.toLowerCase()) } let O = new WeakMap; function R(t, e, i, r, n) { return e.nodeType === e.TEXT_NODE ? r.reduce((i, r) => r(e, i, t), new (s())) : e.nodeType === e.ELEMENT_NODE ? Array.from(e.childNodes || []).reduce((s, l) => { let o = R(t, l, i, r, n); return l.nodeType === e.ELEMENT_NODE && (o = i.reduce((e, i) => i(l, e, t), o), o = (n.get(l) || []).reduce((e, i) => i(l, e, t), o)), s.concat(o) }, new (s())) : new (s()) } function B(t) { return (e, i, r) => S(i, t, !0, r) } function I(t, e, i) { if (!T(e, "\n")) { if (C(t, i) && (t.childNodes.length > 0 || t instanceof HTMLParagraphElement)) return e.insert("\n"); if (e.length() > 0 && t.nextSibling) { let r = t.nextSibling; for (; null != r;) { if (C(r, i)) return e.insert("\n"); let n = i.query(r); if (n && n.prototype instanceof l.zo) return e.insert("\n"); r = r.firstChild } } } return e } }, 8123: function (t, e, i) { "use strict"; i.d(e, { Ay: function () { return f }, Xo: function () { return b } }); var r = i(5123), n = i(3707), s = i(5232), l = i.n(s), o = i(6003), a = i(6142), u = i(6078), c = i(4266); let h = (0, u.A)("quill:keyboard"), d = /Mac/i.test(navigator.platform) ? "metaKey" : "ctrlKey"; class f extends c.A { static match(t, e) { return !["altKey", "ctrlKey", "metaKey", "shiftKey"].some(i => !!e[i] !== t[i] && null !== e[i]) && (e.key === t.key || e.key === t.which) } constructor(t, e) { super(t, e), this.bindings = {}, Object.keys(this.options.bindings).forEach(t => { this.options.bindings[t] && this.addBinding(this.options.bindings[t]) }), this.addBinding({ key: "Enter", shiftKey: null }, this.handleEnter), this.addBinding({ key: "Enter", metaKey: null, ctrlKey: null, altKey: null }, () => { }), /Firefox/i.test(navigator.userAgent) ? (this.addBinding({ key: "Backspace" }, { collapsed: !0 }, this.handleBackspace), this.addBinding({ key: "Delete" }, { collapsed: !0 }, this.handleDelete)) : (this.addBinding({ key: "Backspace" }, { collapsed: !0, prefix: /^.?$/ }, this.handleBackspace), this.addBinding({ key: "Delete" }, { collapsed: !0, suffix: /^.?$/ }, this.handleDelete)), this.addBinding({ key: "Backspace" }, { collapsed: !1 }, this.handleDeleteRange), this.addBinding({ key: "Delete" }, { collapsed: !1 }, this.handleDeleteRange), this.addBinding({ key: "Backspace", altKey: null, ctrlKey: null, metaKey: null, shiftKey: null }, { collapsed: !0, offset: 0 }, this.handleBackspace), this.listen() } addBinding(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = function (t) { if ("string" == typeof t || "number" == typeof t) t = { key: t }; else { if ("object" != typeof t) return null; t = (0, n.A)(t) } return t.shortKey && (t[d] = t.shortKey, delete t.shortKey), t }(t); null != r ? ("function" == typeof e && (e = { handler: e }), "function" == typeof i && (i = { handler: i }), (Array.isArray(r.key) ? r.key : [r.key]).forEach(t => { let n = { ...r, key: t, ...e, ...i }; this.bindings[n.key] = this.bindings[n.key] || [], this.bindings[n.key].push(n) })) : h.warn("Attempted to add invalid keyboard binding", r) } listen() { this.quill.root.addEventListener("keydown", t => { if (t.defaultPrevented || t.isComposing || 229 === t.keyCode && ("Enter" === t.key || "Backspace" === t.key)) return; let e = (this.bindings[t.key] || []).concat(this.bindings[t.which] || []).filter(e => f.match(t, e)); if (0 === e.length) return; let i = a.Ay.find(t.target, !0); if (i && i.scroll !== this.quill.scroll) return; let n = this.quill.getSelection(); if (null == n || !this.quill.hasFocus()) return; let [s, l] = this.quill.getLine(n.index), [u, c] = this.quill.getLeaf(n.index), [h, d] = 0 === n.length ? [u, c] : this.quill.getLeaf(n.index + n.length), $ = u instanceof o.TextBlot ? u.value().slice(0, c) : "", _ = h instanceof o.TextBlot ? h.value().slice(d) : "", p = { collapsed: 0 === n.length, empty: 0 === n.length && 1 >= s.length(), format: this.quill.getFormat(n), line: s, offset: l, prefix: $, suffix: _, event: t }; e.some(t => { if (null != t.collapsed && t.collapsed !== p.collapsed || null != t.empty && t.empty !== p.empty || null != t.offset && t.offset !== p.offset) return !1; if (Array.isArray(t.format)) { if (t.format.every(t => null == p.format[t])) return !1 } else if ("object" == typeof t.format && !Object.keys(t.format).every(e => !0 === t.format[e] ? null != p.format[e] : !1 === t.format[e] ? null == p.format[e] : (0, r.A)(t.format[e], p.format[e]))) return !1; return !(null != t.prefix && !t.prefix.test(p.prefix) || null != t.suffix && !t.suffix.test(p.suffix) || !0 === t.handler.call(this, n, p, t)) }) && t.preventDefault() }) } handleBackspace(t, e) { let i = /[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix) ? 2 : 1; if (0 === t.index || 1 >= this.quill.getLength()) return; let r = {}, [n] = this.quill.getLine(t.index), o = (new (l())).retain(t.index - i).delete(i); if (0 === e.offset) { let [u] = this.quill.getLine(t.index - 1); if (u && !("block" === u.statics.blotName && 1 >= u.length())) { let c = n.formats(), h = this.quill.getFormat(t.index - 1, 1); if (Object.keys(r = s.AttributeMap.diff(c, h) || {}).length > 0) { let d = (new (l())).retain(t.index + n.length() - 2).retain(1, r); o = o.compose(d) } } } this.quill.updateContents(o, a.Ay.sources.USER), this.quill.focus() } handleDelete(t, e) { let i = /^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix) ? 2 : 1; if (t.index >= this.quill.getLength() - i) return; let r = {}, [n] = this.quill.getLine(t.index), o = (new (l())).retain(t.index).delete(i); if (e.offset >= n.length() - 1) { let [u] = this.quill.getLine(t.index + 1); if (u) { let c = n.formats(), h = this.quill.getFormat(t.index, 1); Object.keys(r = s.AttributeMap.diff(c, h) || {}).length > 0 && (o = o.retain(u.length() - 1).retain(1, r)) } } this.quill.updateContents(o, a.Ay.sources.USER), this.quill.focus() } handleDeleteRange(t) { b({ range: t, quill: this.quill }), this.quill.focus() } handleEnter(t, e) { let i = Object.keys(e.format).reduce((t, i) => (this.quill.scroll.query(i, o.Scope.BLOCK) && !Array.isArray(e.format[i]) && (t[i] = e.format[i]), t), {}), r = (new (l())).retain(t.index).delete(t.length).insert("\n", i); this.quill.updateContents(r, a.Ay.sources.USER), this.quill.setSelection(t.index + 1, a.Ay.sources.SILENT), this.quill.focus() } } let $ = { bindings: { bold: g("bold"), italic: g("italic"), underline: g("underline"), indent: { key: "Tab", format: ["blockquote", "indent", "list"], handler(t, e) { return !(!e.collapsed || 0 === e.offset) || (this.quill.format("indent", "+1", a.Ay.sources.USER), !1) } }, outdent: { key: "Tab", shiftKey: !0, format: ["blockquote", "indent", "list"], handler(t, e) { return !(!e.collapsed || 0 === e.offset) || (this.quill.format("indent", "-1", a.Ay.sources.USER), !1) } }, "outdent backspace": { key: "Backspace", collapsed: !0, shiftKey: null, metaKey: null, ctrlKey: null, altKey: null, format: ["indent", "list"], offset: 0, handler(t, e) { null != e.format.indent ? this.quill.format("indent", "-1", a.Ay.sources.USER) : null != e.format.list && this.quill.format("list", !1, a.Ay.sources.USER) } }, "indent code-block": _(!0), "outdent code-block": _(!1), "remove tab": { key: "Tab", shiftKey: !0, collapsed: !0, prefix: /\t$/, handler(t) { this.quill.deleteText(t.index - 1, 1, a.Ay.sources.USER) } }, tab: { key: "Tab", handler(t, e) { if (e.format.table) return !0; this.quill.history.cutoff(); let i = (new (l())).retain(t.index).delete(t.length).insert("	"); return this.quill.updateContents(i, a.Ay.sources.USER), this.quill.history.cutoff(), this.quill.setSelection(t.index + 1, a.Ay.sources.SILENT), !1 } }, "blockquote empty enter": { key: "Enter", collapsed: !0, format: ["blockquote"], empty: !0, handler() { this.quill.format("blockquote", !1, a.Ay.sources.USER) } }, "list empty enter": { key: "Enter", collapsed: !0, format: ["list"], empty: !0, handler(t, e) { let i = { list: !1 }; e.format.indent && (i.indent = !1), this.quill.formatLine(t.index, t.length, i, a.Ay.sources.USER) } }, "checklist enter": { key: "Enter", collapsed: !0, format: { list: "checked" }, handler(t) { let [e, i] = this.quill.getLine(t.index), r = { ...e.formats(), list: "checked" }, n = (new (l())).retain(t.index).insert("\n", r).retain(e.length() - i - 1).retain(1, { list: "unchecked" }); this.quill.updateContents(n, a.Ay.sources.USER), this.quill.setSelection(t.index + 1, a.Ay.sources.SILENT), this.quill.scrollSelectionIntoView() } }, "header enter": { key: "Enter", collapsed: !0, format: ["header"], suffix: /^$/, handler(t, e) { let [i, r] = this.quill.getLine(t.index), n = (new (l())).retain(t.index).insert("\n", e.format).retain(i.length() - r - 1).retain(1, { header: null }); this.quill.updateContents(n, a.Ay.sources.USER), this.quill.setSelection(t.index + 1, a.Ay.sources.SILENT), this.quill.scrollSelectionIntoView() } }, "table backspace": { key: "Backspace", format: ["table"], collapsed: !0, offset: 0, handler() { } }, "table delete": { key: "Delete", format: ["table"], collapsed: !0, suffix: /^$/, handler() { } }, "table enter": { key: "Enter", shiftKey: null, format: ["table"], handler(t) { let e = this.quill.getModule("table"); if (e) { var i, r, n; let [s, o, u, c] = e.getTable(t), h = (i = o, r = u, n = c, null == i.prev && null == i.next ? null == r.prev && null == r.next ? 0 === n ? -1 : 1 : null == r.prev ? -1 : 1 : null == i.prev ? -1 : null == i.next ? 1 : null); if (null == h) return; let d = s.offset(); if (h < 0) { let f = (new (l())).retain(d).insert("\n"); this.quill.updateContents(f, a.Ay.sources.USER), this.quill.setSelection(t.index + 1, t.length, a.Ay.sources.SILENT) } else if (h > 0) { d += s.length(); let $ = (new (l())).retain(d).insert("\n"); this.quill.updateContents($, a.Ay.sources.USER), this.quill.setSelection(d, a.Ay.sources.USER) } } } }, "table tab": { key: "Tab", shiftKey: null, format: ["table"], handler(t, e) { let { event: i, line: r } = e, n = r.offset(this.quill.scroll); i.shiftKey ? this.quill.setSelection(n - 1, a.Ay.sources.USER) : this.quill.setSelection(n + r.length(), a.Ay.sources.USER) } }, "list autofill": { key: " ", shiftKey: null, collapsed: !0, format: { "code-block": !1, blockquote: !1, table: !1 }, prefix: /^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/, handler(t, e) { if (null == this.quill.scroll.query("list")) return !0; let { length: i } = e.prefix, [r, n] = this.quill.getLine(t.index); if (n > i) return !0; let s; switch (e.prefix.trim()) { case "[]": case "[ ]": s = "unchecked"; break; case "[x]": s = "checked"; break; case "-": case "*": s = "bullet"; break; default: s = "ordered" }this.quill.insertText(t.index, " ", a.Ay.sources.USER), this.quill.history.cutoff(); let o = (new (l())).retain(t.index - n).delete(i + 1).retain(r.length() - 2 - n).retain(1, { list: s }); return this.quill.updateContents(o, a.Ay.sources.USER), this.quill.history.cutoff(), this.quill.setSelection(t.index - i, a.Ay.sources.SILENT), !1 } }, "code exit": { key: "Enter", collapsed: !0, format: ["code-block"], prefix: /^$/, suffix: /^\s*$/, handler(t) { let [e, i] = this.quill.getLine(t.index), r = 2, n = e; for (; null != n && 1 >= n.length() && n.formats()["code-block"];)if (n = n.prev, (r -= 1) <= 0) { let s = (new (l())).retain(t.index + e.length() - i - 2).retain(1, { "code-block": null }).delete(1); return this.quill.updateContents(s, a.Ay.sources.USER), this.quill.setSelection(t.index - 1, a.Ay.sources.SILENT), !1 } return !0 } }, "embed left": p("ArrowLeft", !1), "embed left shift": p("ArrowLeft", !0), "embed right": p("ArrowRight", !1), "embed right shift": p("ArrowRight", !0), "table down": m(!1), "table up": m(!0) } }; function _(t) { return { key: "Tab", shiftKey: !t, format: { "code-block": !0 }, handler(e, i) { let { event: r } = i, n = this.quill.scroll.query("code-block"), { TAB: s } = n; if (0 === e.length && !r.shiftKey) return this.quill.insertText(e.index, s, a.Ay.sources.USER), void this.quill.setSelection(e.index + s.length, a.Ay.sources.SILENT); let l = 0 === e.length ? this.quill.getLines(e.index, 1) : this.quill.getLines(e), { index: o, length: u } = e; l.forEach((e, i) => { t ? (e.insertAt(0, s), 0 === i ? o += s.length : u += s.length) : e.domNode.textContent.startsWith(s) && (e.deleteAt(0, s.length), 0 === i ? o -= s.length : u -= s.length) }), this.quill.update(a.Ay.sources.USER), this.quill.setSelection(o, u, a.Ay.sources.SILENT) } } } function p(t, e) { return { key: t, shiftKey: e, altKey: null, ["ArrowLeft" === t ? "prefix" : "suffix"]: /^$/, handler(i) { let { index: r } = i; "ArrowRight" === t && (r += i.length + 1); let [n] = this.quill.getLeaf(r); return !(n instanceof o.EmbedBlot && ("ArrowLeft" === t ? e ? this.quill.setSelection(i.index - 1, i.length + 1, a.Ay.sources.USER) : this.quill.setSelection(i.index - 1, a.Ay.sources.USER) : e ? this.quill.setSelection(i.index, i.length + 1, a.Ay.sources.USER) : this.quill.setSelection(i.index + i.length + 1, a.Ay.sources.USER), 1)) } } } function g(t) { return { key: t[0], shortKey: !0, handler(e, i) { this.quill.format(t, !i.format[t], a.Ay.sources.USER) } } } function m(t) { return { key: t ? "ArrowUp" : "ArrowDown", collapsed: !0, format: ["table"], handler(e, i) { let r = t ? "prev" : "next", n = i.line, s = n.parent[r]; if (null != s) { if ("table-row" === s.statics.blotName) { let l = s.children.head, o = n; for (; null != o.prev;)o = o.prev, l = l.next; let u = l.offset(this.quill.scroll) + Math.min(i.offset, l.length() - 1); this.quill.setSelection(u, 0, a.Ay.sources.USER) } } else { let c = n.table()[r]; null != c && (t ? this.quill.setSelection(c.offset(this.quill.scroll) + c.length() - 1, 0, a.Ay.sources.USER) : this.quill.setSelection(c.offset(this.quill.scroll), 0, a.Ay.sources.USER)) } return !1 } } } function b(t) { let { quill: e, range: i } = t, r = e.getLines(i), n = {}; if (r.length > 1) { let l = r[0].formats(), o = r[r.length - 1].formats(); n = s.AttributeMap.diff(o, l) || {} } e.deleteText(i, a.Ay.sources.USER), Object.keys(n).length > 0 && e.formatLine(i.index, 1, n, a.Ay.sources.USER), e.setSelection(i.index, a.Ay.sources.SILENT) } f.DEFAULTS = $ }, 8920: function (t) { "use strict"; var e = Object.prototype.hasOwnProperty, i = "~"; function r() { } function n(t, e, i) { this.fn = t, this.context = e, this.once = i || !1 } function s(t, e, r, s, l) { if ("function" != typeof r) throw TypeError("The listener must be a function"); var o = new n(r, s || t, l), a = i ? i + e : e; return t._events[a] ? t._events[a].fn ? t._events[a] = [t._events[a], o] : t._events[a].push(o) : (t._events[a] = o, t._eventsCount++), t } function l(t, e) { 0 == --t._eventsCount ? t._events = new r : delete t._events[e] } function o() { this._events = new r, this._eventsCount = 0 } Object.create && (r.prototype = Object.create(null), (new r).__proto__ || (i = !1)), o.prototype.eventNames = function () { var t, r, n = []; if (0 === this._eventsCount) return n; for (r in t = this._events) e.call(t, r) && n.push(i ? r.slice(1) : r); return Object.getOwnPropertySymbols ? n.concat(Object.getOwnPropertySymbols(t)) : n }, o.prototype.listeners = function (t) { var e = i ? i + t : t, r = this._events[e]; if (!r) return []; if (r.fn) return [r.fn]; for (var n = 0, s = r.length, l = Array(s); n < s; n++)l[n] = r[n].fn; return l }, o.prototype.listenerCount = function (t) { var e = i ? i + t : t, r = this._events[e]; return r ? r.fn ? 1 : r.length : 0 }, o.prototype.emit = function (t, e, r, n, s, l) { var o = i ? i + t : t; if (!this._events[o]) return !1; var a, u, c = this._events[o], h = arguments.length; if (c.fn) { switch (c.once && this.removeListener(t, c.fn, void 0, !0), h) { case 1: return c.fn.call(c.context), !0; case 2: return c.fn.call(c.context, e), !0; case 3: return c.fn.call(c.context, e, r), !0; case 4: return c.fn.call(c.context, e, r, n), !0; case 5: return c.fn.call(c.context, e, r, n, s), !0; case 6: return c.fn.call(c.context, e, r, n, s, l), !0 }for (u = 1, a = Array(h - 1); u < h; u++)a[u - 1] = arguments[u]; c.fn.apply(c.context, a) } else { var d, f = c.length; for (u = 0; u < f; u++)switch (c[u].once && this.removeListener(t, c[u].fn, void 0, !0), h) { case 1: c[u].fn.call(c[u].context); break; case 2: c[u].fn.call(c[u].context, e); break; case 3: c[u].fn.call(c[u].context, e, r); break; case 4: c[u].fn.call(c[u].context, e, r, n); break; default: if (!a) for (d = 1, a = Array(h - 1); d < h; d++)a[d - 1] = arguments[d]; c[u].fn.apply(c[u].context, a) } } return !0 }, o.prototype.on = function (t, e, i) { return s(this, t, e, i, !1) }, o.prototype.once = function (t, e, i) { return s(this, t, e, i, !0) }, o.prototype.removeListener = function (t, e, r, n) { var s = i ? i + t : t; if (!this._events[s]) return this; if (!e) return l(this, s), this; var o = this._events[s]; if (o.fn) o.fn !== e || n && !o.once || r && o.context !== r || l(this, s); else { for (var a = 0, u = [], c = o.length; a < c; a++)(o[a].fn !== e || n && !o[a].once || r && o[a].context !== r) && u.push(o[a]); u.length ? this._events[s] = 1 === u.length ? u[0] : u : l(this, s) } return this }, o.prototype.removeAllListeners = function (t) { var e; return t ? (e = i ? i + t : t, this._events[e] && l(this, e)) : (this._events = new r, this._eventsCount = 0), this }, o.prototype.off = o.prototype.removeListener, o.prototype.addListener = o.prototype.on, o.prefixed = i, o.EventEmitter = o, t.exports = o }, 5090: function (t) { function e(t, d, f, $, _) { if (t === d) return t ? [[0, t]] : []; if (null != f) { var g = function (t, e, i) { var r = "number" == typeof i ? { index: i, length: 0 } : i.oldRange, n = "number" == typeof i ? null : i.newRange, s = t.length, l = e.length; if (0 === r.length && (null === n || 0 === n.length)) { var o = r.index, a = t.slice(0, o), u = t.slice(o), c = n ? n.index : null, h = o + l - s; if ((null === c || c === h) && !(h < 0 || h > l)) { var d = e.slice(0, h); if ((_ = e.slice(h)) === u) { var f = Math.min(o, h); if ((m = a.slice(0, f)) === (y = d.slice(0, f))) return p(m, a.slice(f), d.slice(f), u) } } if (null === c || c === o) { var $ = o, _ = (d = e.slice(0, $), e.slice($)); if (d === a) { var g = Math.min(s - $, l - $); if ((b = u.slice(u.length - g)) === (v = _.slice(_.length - g))) return p(a, u.slice(0, u.length - g), _.slice(0, _.length - g), b) } } } if (r.length > 0 && n && 0 === n.length) { var m = t.slice(0, r.index), b = t.slice(r.index + r.length); if (!(l < (f = m.length) + (g = b.length))) { var y = e.slice(0, f), v = e.slice(l - g); if (m === y && b === v) return p(m, t.slice(f, s - g), e.slice(f, l - g), b) } } return null }(t, d, f); if (g) return g } var m = r(t, d), b = t.substring(0, m); m = s(t = t.substring(m), d = d.substring(m)); var y = t.substring(t.length - m), v = function (t, n) { if (!t) return [[1, n]]; if (!n) return [[-1, t]]; var l, o = t.length > n.length ? t : n, a = t.length > n.length ? n : t, u = o.indexOf(a); if (-1 !== u) return l = [[1, o.substring(0, u)], [0, a], [1, o.substring(u + a.length)]], t.length > n.length && (l[0][0] = l[2][0] = -1), l; if (1 === a.length) return [[-1, t], [1, n]]; var c = function (t, e) { var i = t.length > e.length ? t : e, n = t.length > e.length ? e : t; if (i.length < 4 || 2 * n.length < i.length) return null; function l(t, e, i) { for (var n, l, o, a, u = t.substring(i, i + Math.floor(t.length / 4)), c = -1, h = ""; -1 !== (c = e.indexOf(u, c + 1));) { var d = r(t.substring(i), e.substring(c)), f = s(t.substring(0, i), e.substring(0, c)); h.length < f + d && (h = e.substring(c - f, c) + e.substring(c, c + d), n = t.substring(0, i - f), l = t.substring(i + d), o = e.substring(0, c - f), a = e.substring(c + d)) } return 2 * h.length >= t.length ? [n, l, o, a, h] : null } var o, a, u, c, h, d = l(i, n, Math.ceil(i.length / 4)), f = l(i, n, Math.ceil(i.length / 2)); return d || f ? (o = f ? d && d[4].length > f[4].length ? d : f : d, t.length > e.length ? (a = o[0], u = o[1], c = o[2], h = o[3]) : (c = o[0], h = o[1], a = o[2], u = o[3]), [a, u, c, h, o[4]]) : null }(t, n); if (c) { var h = c[0], d = c[1], f = c[2], $ = c[3], _ = c[4], p = e(h, f), g = e(d, $); return p.concat([[0, _]], g) } return function (t, e) { for (var r = t.length, n = e.length, s = Math.ceil((r + n) / 2), l = s, o = 2 * s, a = Array(o), u = Array(o), c = 0; c < o; c++)a[c] = -1, u[c] = -1; a[l + 1] = 0, u[l + 1] = 0; for (var h = r - n, d = h % 2 != 0, f = 0, $ = 0, _ = 0, p = 0, g = 0; g < s; g++) { for (var m = -g + f; m <= g - $; m += 2) { for (var b = l + m, y = (A = m === -g || m !== g && a[b - 1] < a[b + 1] ? a[b + 1] : a[b - 1] + 1) - m; A < r && y < n && t.charAt(A) === e.charAt(y);)A++, y++; if (a[b] = A, A > r) $ += 2; else if (y > n) f += 2; else if (d && (N = l + h - m) >= 0 && N < o && -1 !== u[N] && A >= (x = r - u[N])) return i(t, e, A, y) } for (var v = -g + _; v <= g - p; v += 2) { for (var A, x, N = l + v, E = (x = v === -g || v !== g && u[N - 1] < u[N + 1] ? u[N + 1] : u[N - 1] + 1) - v; x < r && E < n && t.charAt(r - x - 1) === e.charAt(n - E - 1);)x++, E++; if (u[N] = x, x > r) p += 2; else if (E > n) _ += 2; else if (!d && (b = l + h - v) >= 0 && b < o && -1 !== a[b] && (y = l + (A = a[b]) - b, A >= (x = r - x))) return i(t, e, A, y) } } return [[-1, t], [1, e]] }(t, n) }(t = t.substring(0, t.length - m), d = d.substring(0, d.length - m)); return b && v.unshift([0, b]), y && v.push([0, y]), h(v, _), $ && function (t) { for (var e = !1, i = [], r = 0, d = null, f = 0, $ = 0, _ = 0, p = 0, g = 0; f < t.length;)0 == t[f][0] ? (i[r++] = f, $ = p, _ = g, p = 0, g = 0, d = t[f][1]) : (1 == t[f][0] ? p += t[f][1].length : g += t[f][1].length, d && d.length <= Math.max($, _) && d.length <= Math.max(p, g) && (t.splice(i[r - 1], 0, [-1, d]), t[i[r - 1] + 1][0] = 1, r--, f = --r > 0 ? i[r - 1] : -1, $ = 0, _ = 0, p = 0, g = 0, d = null, e = !0)), f++; for (e && h(t), function (t) { function e(t, e) { if (!t || !e) return 6; var i = t.charAt(t.length - 1), r = e.charAt(0), n = i.match(l), s = r.match(l), h = n && i.match(o), d = s && r.match(o), f = h && i.match(a), $ = d && r.match(a), _ = f && t.match(u), p = $ && e.match(c); return _ || p ? 5 : f || $ ? 4 : n && !h && d ? 3 : h || d ? 2 : n || s ? 1 : 0 } for (var i = 1; i < t.length - 1;) { if (0 == t[i - 1][0] && 0 == t[i + 1][0]) { var r = t[i - 1][1], n = t[i][1], h = t[i + 1][1], d = s(r, n); if (d) { var f = n.substring(n.length - d); r = r.substring(0, r.length - d), n = f + n.substring(0, n.length - d), h = f + h } for (var $ = r, _ = n, p = h, g = e(r, n) + e(n, h); n.charAt(0) === h.charAt(0);) { r += n.charAt(0), n = n.substring(1) + h.charAt(0), h = h.substring(1); var m = e(r, n) + e(n, h); m >= g && (g = m, $ = r, _ = n, p = h) } t[i - 1][1] != $ && ($ ? t[i - 1][1] = $ : (t.splice(i - 1, 1), i--), t[i][1] = _, p ? t[i + 1][1] = p : (t.splice(i + 1, 1), i--)) } i++ } }(t), f = 1; f < t.length;) { if (-1 == t[f - 1][0] && 1 == t[f][0]) { var m = t[f - 1][1], b = t[f][1], y = n(m, b), v = n(b, m); y >= v ? (y >= m.length / 2 || y >= b.length / 2) && (t.splice(f, 0, [0, b.substring(0, y)]), t[f - 1][1] = m.substring(0, m.length - y), t[f + 1][1] = b.substring(y), f++) : (v >= m.length / 2 || v >= b.length / 2) && (t.splice(f, 0, [0, m.substring(0, v)]), t[f - 1][0] = 1, t[f - 1][1] = b.substring(0, b.length - v), t[f + 1][0] = -1, t[f + 1][1] = m.substring(v), f++), f++ } f++ } }(v), v } function i(t, i, r, n) { var s = t.substring(0, r), l = i.substring(0, n), o = t.substring(r), a = i.substring(n), u = e(s, l), c = e(o, a); return u.concat(c) } function r(t, e) { if (!t || !e || t.charAt(0) !== e.charAt(0)) return 0; for (var i = 0, r = Math.min(t.length, e.length), n = r, s = 0; i < n;)t.substring(s, n) == e.substring(s, n) ? s = i = n : r = n, n = Math.floor((r - i) / 2 + i); return d(t.charCodeAt(n - 1)) && n--, n } function n(t, e) { var i = t.length, r = e.length; if (0 == i || 0 == r) return 0; i > r ? t = t.substring(i - r) : i < r && (e = e.substring(0, i)); var n = Math.min(i, r); if (t == e) return n; for (var s = 0, l = 1; ;) { var o = t.substring(n - l), a = e.indexOf(o); if (-1 == a) return s; l += a, 0 != a && t.substring(n - l) != e.substring(0, l) || (s = l, l++) } } function s(t, e) { if (!t || !e || t.slice(-1) !== e.slice(-1)) return 0; for (var i = 0, r = Math.min(t.length, e.length), n = r, s = 0; i < n;)t.substring(t.length - n, t.length - s) == e.substring(e.length - n, e.length - s) ? s = i = n : r = n, n = Math.floor((r - i) / 2 + i); return f(t.charCodeAt(t.length - n)) && n--, n } var l = /[^a-zA-Z0-9]/, o = /\s/, a = /[\r\n]/, u = /\n\r?\n$/, c = /^\r?\n\r?\n/; function h(t, e) { t.push([0, ""]); for (var i, n = 0, l = 0, o = 0, a = "", u = ""; n < t.length;)if (n < t.length - 1 && !t[n][1]) t.splice(n, 1); else switch (t[n][0]) { case 1: o++, u += t[n][1], n++; break; case -1: l++, a += t[n][1], n++; break; case 0: var c = n - o - l - 1; if (e) { if (c >= 0 && _(t[c][1])) { var d = t[c][1].slice(-1); if (t[c][1] = t[c][1].slice(0, -1), a = d + a, u = d + u, !t[c][1]) { t.splice(c, 1), n--; var f = c - 1; t[f] && 1 === t[f][0] && (o++, u = t[f][1] + u, f--), t[f] && -1 === t[f][0] && (l++, a = t[f][1] + a, f--), c = f } } $(t[n][1]) && (d = t[n][1].charAt(0), t[n][1] = t[n][1].slice(1), a += d, u += d) } if (n < t.length - 1 && !t[n][1]) { t.splice(n, 1); break } if (a.length > 0 || u.length > 0) { a.length > 0 && u.length > 0 && (0 !== (i = r(u, a)) && (c >= 0 ? t[c][1] += u.substring(0, i) : (t.splice(0, 0, [0, u.substring(0, i)]), n++), u = u.substring(i), a = a.substring(i)), 0 !== (i = s(u, a)) && (t[n][1] = u.substring(u.length - i) + t[n][1], u = u.substring(0, u.length - i), a = a.substring(0, a.length - i))); var p = o + l; 0 === a.length && 0 === u.length ? (t.splice(n - p, p), n -= p) : 0 === a.length ? (t.splice(n - p, p, [1, u]), n = n - p + 1) : 0 === u.length ? (t.splice(n - p, p, [-1, a]), n = n - p + 1) : (t.splice(n - p, p, [-1, a], [1, u]), n = n - p + 2) } 0 !== n && 0 === t[n - 1][0] ? (t[n - 1][1] += t[n][1], t.splice(n, 1)) : n++, o = 0, l = 0, a = "", u = "" }"" === t[t.length - 1][1] && t.pop(); var g = !1; for (n = 1; n < t.length - 1;)0 === t[n - 1][0] && 0 === t[n + 1][0] && (t[n][1].substring(t[n][1].length - t[n - 1][1].length) === t[n - 1][1] ? (t[n][1] = t[n - 1][1] + t[n][1].substring(0, t[n][1].length - t[n - 1][1].length), t[n + 1][1] = t[n - 1][1] + t[n + 1][1], t.splice(n - 1, 1), g = !0) : t[n][1].substring(0, t[n + 1][1].length) == t[n + 1][1] && (t[n - 1][1] += t[n + 1][1], t[n][1] = t[n][1].substring(t[n + 1][1].length) + t[n + 1][1], t.splice(n + 1, 1), g = !0)), n++; g && h(t, e) } function d(t) { return t >= 55296 && t <= 56319 } function f(t) { return t >= 56320 && t <= 57343 } function $(t) { return f(t.charCodeAt(0)) } function _(t) { return d(t.charCodeAt(t.length - 1)) } function p(t, e, i, r) { return _(t) || $(r) ? null : function (t) { for (var e = [], i = 0; i < t.length; i++)t[i][1].length > 0 && e.push(t[i]); return e }([[0, t], [-1, e], [1, i], [0, r]]) } function g(t, i, r, n) { return e(t, i, r, n, !0) } g.INSERT = 1, g.DELETE = -1, g.EQUAL = 0, t.exports = g }, 9629: function (t, e, i) { t = i.nmd(t); var r = "__lodash_hash_undefined__", n = "[object Arguments]", s = "[object Boolean]", l = "[object Date]", o = "[object Function]", a = "[object GeneratorFunction]", u = "[object Map]", c = "[object Number]", h = "[object Object]", d = "[object Promise]", f = "[object RegExp]", $ = "[object Set]", _ = "[object String]", p = "[object Symbol]", g = "[object WeakMap]", m = "[object ArrayBuffer]", b = "[object DataView]", y = "[object Float32Array]", v = "[object Float64Array]", A = "[object Int8Array]", x = "[object Int16Array]", N = "[object Int32Array]", E = "[object Uint8Array]", w = "[object Uint8ClampedArray]", q = "[object Uint16Array]", k = "[object Uint32Array]", L = /\w*$/, S = /^\[object .+?Constructor\]$/, T = /^(?:0|[1-9]\d*)$/, C = {}; C[n] = C["[object Array]"] = C[m] = C[b] = C[s] = C[l] = C[y] = C[v] = C[A] = C[x] = C[N] = C[u] = C[c] = C[h] = C[f] = C[$] = C[_] = C[p] = C[E] = C[w] = C[q] = C[k] = !0, C["[object Error]"] = C[o] = C[g] = !1; var O = "object" == typeof i.g && i.g && i.g.Object === Object && i.g, R = "object" == typeof self && self && self.Object === Object && self, B = O || R || Function("return this")(), I = e && !e.nodeType && e, j = I && t && !t.nodeType && t, U = j && j.exports === I; function M(t, e) { return t.set(e[0], e[1]), t } function D(t, e) { return t.add(e), t } function P(t, e, i, r) { var n = -1, s = t ? t.length : 0; for (r && s && (i = t[++n]); ++n < s;)i = e(i, t[n], n, t); return i } function z(t) { var e = !1; if (null != t && "function" != typeof t.toString) try { e = !!(t + "") } catch (i) { } return e } function H(t) { var e = -1, i = Array(t.size); return t.forEach(function (t, r) { i[++e] = [r, t] }), i } function F(t, e) { return function (i) { return t(e(i)) } } function V(t) { var e = -1, i = Array(t.size); return t.forEach(function (t) { i[++e] = t }), i } var K, Z = Array.prototype, W = Function.prototype, G = Object.prototype, X = B["__core-js_shared__"], Q = (K = /[^.]+$/.exec(X && X.keys && X.keys.IE_PROTO || "")) ? "Symbol(src)_1." + K : "", J = W.toString, Y = G.hasOwnProperty, tt = G.toString, te = RegExp("^" + J.call(Y).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), ti = U ? B.Buffer : void 0, tr = B.Symbol, tn = B.Uint8Array, ts = F(Object.getPrototypeOf, Object), tl = Object.create, to = G.propertyIsEnumerable, ta = Z.splice, tu = Object.getOwnPropertySymbols, tc = ti ? ti.isBuffer : void 0, th = F(Object.keys, Object), td = tq(B, "DataView"), tf = tq(B, "Map"), t$ = tq(B, "Promise"), t_ = tq(B, "Set"), tp = tq(B, "WeakMap"), tg = tq(Object, "create"), tm = tS(td), tb = tS(tf), ty = tS(t$), tv = tS(t_), tA = tS(tp), t0 = tr ? tr.prototype : void 0, t3 = t0 ? t0.valueOf : void 0; function tx(t) { var e = -1, i = t ? t.length : 0; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } function t1(t) { var e = -1, i = t ? t.length : 0; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } function tN(t) { var e = -1, i = t ? t.length : 0; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } function t2(t) { this.__data__ = new t1(t) } function tE(t, e, i) { var r = t[e]; Y.call(t, e) && tT(r, i) && (void 0 !== i || e in t) || (t[e] = i) } function t4(t, e) { for (var i = t.length; i--;)if (tT(t[i][0], e)) return i; return -1 } function t6(t) { var e = new t.constructor(t.byteLength); return new tn(e).set(new tn(t)), e } function tw(t, e, i, r) { i || (i = {}); for (var n = -1, s = e.length; ++n < s;) { var l = e[n], o = r ? r(i[l], t[l], l, i, t) : void 0; tE(i, l, void 0 === o ? t[l] : o) } return i } function t5(t, e) { var i, r, n = t.__data__; return ("string" == (r = typeof (i = e)) || "number" == r || "symbol" == r || "boolean" == r ? "__proto__" !== i : null === i) ? n["string" == typeof e ? "string" : "hash"] : n.map } function tq(t, e) { var i, r, n, s, l = (i = t, r = e, null == i ? void 0 : i[r]); return !(!tI(n = l) || (s = n, Q && Q in s)) && (tB(n) || z(n) ? te : S).test(tS(n)) ? l : void 0 } tx.prototype.clear = function () { this.__data__ = tg ? tg(null) : {} }, tx.prototype.delete = function (t) { return this.has(t) && delete this.__data__[t] }, tx.prototype.get = function (t) { var e = this.__data__; if (tg) { var i = e[t]; return i === r ? void 0 : i } return Y.call(e, t) ? e[t] : void 0 }, tx.prototype.has = function (t) { var e = this.__data__; return tg ? void 0 !== e[t] : Y.call(e, t) }, tx.prototype.set = function (t, e) { return this.__data__[t] = tg && void 0 === e ? r : e, this }, t1.prototype.clear = function () { this.__data__ = [] }, t1.prototype.delete = function (t) { var e = this.__data__, i = t4(e, t); return !(i < 0 || (i == e.length - 1 ? e.pop() : ta.call(e, i, 1), 0)) }, t1.prototype.get = function (t) { var e = this.__data__, i = t4(e, t); return i < 0 ? void 0 : e[i][1] }, t1.prototype.has = function (t) { return t4(this.__data__, t) > -1 }, t1.prototype.set = function (t, e) { var i = this.__data__, r = t4(i, t); return r < 0 ? i.push([t, e]) : i[r][1] = e, this }, tN.prototype.clear = function () { this.__data__ = { hash: new tx, map: new (tf || t1), string: new tx } }, tN.prototype.delete = function (t) { return t5(this, t).delete(t) }, tN.prototype.get = function (t) { return t5(this, t).get(t) }, tN.prototype.has = function (t) { return t5(this, t).has(t) }, tN.prototype.set = function (t, e) { return t5(this, t).set(t, e), this }, t2.prototype.clear = function () { this.__data__ = new t1 }, t2.prototype.delete = function (t) { return this.__data__.delete(t) }, t2.prototype.get = function (t) { return this.__data__.get(t) }, t2.prototype.has = function (t) { return this.__data__.has(t) }, t2.prototype.set = function (t, e) { var i = this.__data__; if (i instanceof t1) { var r = i.__data__; if (!tf || r.length < 199) return r.push([t, e]), this; i = this.__data__ = new tN(r) } return i.set(t, e), this }; var t7 = tu ? F(tu, Object) : function () { return [] }, tk = function (t) { return tt.call(t) }; function t8(t, e) { return !!(e = null == e ? 9007199254740991 : e) && ("number" == typeof t || T.test(t)) && t > -1 && t % 1 == 0 && t < e } function tL(t) { var e = t && t.constructor; return t === ("function" == typeof e && e.prototype || G) } function tS(t) { if (null != t) { try { return J.call(t) } catch (e) { } try { return t + "" } catch (i) { } } return "" } function tT(t, e) { return t === e || t != t && e != e } (td && tk(new td(new ArrayBuffer(1))) != b || tf && tk(new tf) != u || t$ && tk(t$.resolve()) != d || t_ && tk(new t_) != $ || tp && tk(new tp) != g) && (tk = function (t) { var e = tt.call(t), i = e == h ? t.constructor : void 0, r = i ? tS(i) : void 0; if (r) switch (r) { case tm: return b; case tb: return u; case ty: return d; case tv: return $; case tA: return g }return e }); var tC = Array.isArray; function tO(t) { var e; return null != t && "number" == typeof (e = t.length) && e > -1 && e % 1 == 0 && e <= 9007199254740991 && !tB(t) } var tR = tc || function () { return !1 }; function tB(t) { var e = tI(t) ? tt.call(t) : ""; return e == o || e == a } function tI(t) { var e = typeof t; return !!t && ("object" == e || "function" == e) } function tj(t) { return tO(t) ? function (t, e) { var i, r, s, l = tC(t) || (s = r = i = t) && "object" == typeof s && tO(r) && Y.call(i, "callee") && (!to.call(i, "callee") || tt.call(i) == n) ? function (t, e) { for (var i = -1, r = Array(t); ++i < t;)r[i] = e(i); return r }(t.length, String) : [], o = l.length, a = !!o; for (var u in t) !Y.call(t, u) || a && ("length" == u || t8(u, o)) || l.push(u); return l }(t) : function (t) { if (!tL(t)) return th(t); var e = []; for (var i in Object(t)) Y.call(t, i) && "constructor" != i && e.push(i); return e }(t) } t.exports = function (t) { return function t(e, i, r, d, g, S, T) { if (d && (O = S ? d(e, void 0, S, T) : d(e)), void 0 !== O) return O; if (!tI(e)) return e; var O, R = tC(e); if (R) { if (O = (I = (B = e).length, j = B.constructor(I), I && "string" == typeof B[0] && Y.call(B, "index") && (j.index = B.index, j.input = B.input), j), !i) return function (t, e) { var i = -1, r = t.length; for (e || (e = Array(r)); ++i < r;)e[i] = t[i]; return e }(e, O) } else { var B, I, j, U, F, K, Z, W, G, X = tk(e), Q = X == o || X == a; if (tR(e)) return function (t, e) { if (e) return t.slice(); var i = new t.constructor(t.length); return t.copy(i), i }(e, i); if (X == h || X == n || Q && !S) { if (z(e)) return S ? e : {}; if (O = "function" != typeof (U = Q ? {} : e).constructor || tL(U) ? {} : tI(F = ts(U)) ? tl(F) : {}, !i) return W = e, G = (K = O, Z = e, K && tw(Z, tj(Z), K)), tw(W, t7(W), G) } else { if (!C[X]) return S ? e : {}; O = function (t, e, i, r) { var n, o, a, h, d, g, S, T, C, O, R, B, I, j, U, z = t.constructor; switch (e) { case m: return t6(t); case s: case l: return new z(+t); case b: return n = t, a = (o = r) ? t6(n.buffer) : n.buffer, new n.constructor(a, n.byteOffset, n.byteLength); case y: case v: case A: case x: case N: case E: case w: case q: case k: return h = t, g = (d = r) ? t6(h.buffer) : h.buffer, new h.constructor(g, h.byteOffset, h.length); case u: return S = t, T = r, C = i, P(T ? C(H(S), !0) : H(S), M, new S.constructor); case c: case _: return new z(t); case f: return (R = new (O = t).constructor(O.source, L.exec(O))).lastIndex = O.lastIndex, R; case $: return B = t, I = r, j = i, P(I ? j(V(B), !0) : V(B), D, new B.constructor); case p: return U = t, t3 ? Object(t3.call(U)) : {} } }(e, X, t, i) } } T || (T = new t2); var J = T.get(e); if (J) return J; if (T.set(e, O), !R) var tt, te, ti, tr, tn, to = r ? (te = tt = e, ti = tj, tr = t7, tn = ti(te), tC(te) ? tn : function (t, e) { for (var i = -1, r = e.length, n = t.length; ++i < r;)t[n + i] = e[i]; return t }(tn, tr(te))) : tj(e); return function (t, e) { for (var i = -1, r = t ? t.length : 0; ++i < r && !1 !== e(t[i], i);); }(to || e, function (n, s) { to && (n = e[s = n]), tE(O, s, t(n, i, r, d, s, e, T)) }), O }(t, !0, !0) } }, 4162: function (t, e, i) { t = i.nmd(t); var r = "__lodash_hash_undefined__", n = "[object Arguments]", s = "[object Array]", l = "[object Boolean]", o = "[object Date]", a = "[object Error]", u = "[object Function]", c = "[object Map]", h = "[object Number]", d = "[object Null]", f = "[object Object]", $ = "[object Promise]", _ = "[object RegExp]", p = "[object Set]", g = "[object String]", m = "[object Undefined]", b = "[object WeakMap]", y = "[object ArrayBuffer]", v = "[object DataView]", A = /^\[object .+?Constructor\]$/, x = /^(?:0|[1-9]\d*)$/, N = {}; N["[object Float32Array]"] = N["[object Float64Array]"] = N["[object Int8Array]"] = N["[object Int16Array]"] = N["[object Int32Array]"] = N["[object Uint8Array]"] = N["[object Uint8ClampedArray]"] = N["[object Uint16Array]"] = N["[object Uint32Array]"] = !0, N[n] = N[s] = N[y] = N[l] = N[v] = N[o] = N[a] = N[u] = N[c] = N[h] = N[f] = N[_] = N[p] = N[g] = N[b] = !1; var E = "object" == typeof i.g && i.g && i.g.Object === Object && i.g, w = "object" == typeof self && self && self.Object === Object && self, q = E || w || Function("return this")(), k = e && !e.nodeType && e, L = k && t && !t.nodeType && t, S = L && L.exports === k, T = S && E.process, C = function () { try { return T && T.binding && T.binding("util") } catch (t) { } }(), O = C && C.isTypedArray; function R(t, e) { for (var i = -1, r = null == t ? 0 : t.length; ++i < r;)if (e(t[i], i, t)) return !0; return !1 } function B(t) { var e = -1, i = Array(t.size); return t.forEach(function (t, r) { i[++e] = [r, t] }), i } function I(t) { var e = -1, i = Array(t.size); return t.forEach(function (t) { i[++e] = t }), i } var j, U, M, D = Array.prototype, P = Function.prototype, z = Object.prototype, H = q["__core-js_shared__"], F = P.toString, V = z.hasOwnProperty, K = (j = /[^.]+$/.exec(H && H.keys && H.keys.IE_PROTO || "")) ? "Symbol(src)_1." + j : "", Z = z.toString, W = RegExp("^" + F.call(V).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), G = S ? q.Buffer : void 0, X = q.Symbol, Q = q.Uint8Array, J = z.propertyIsEnumerable, Y = D.splice, tt = X ? X.toStringTag : void 0, te = Object.getOwnPropertySymbols, ti = G ? G.isBuffer : void 0, tr = (U = Object.keys, M = Object, function (t) { return U(M(t)) }), tn = t2(q, "DataView"), ts = t2(q, "Map"), tl = t2(q, "Promise"), to = t2(q, "Set"), ta = t2(q, "WeakMap"), tu = t2(Object, "create"), tc = tw(tn), th = tw(ts), td = tw(tl), tf = tw(to), t$ = tw(ta), t_ = X ? X.prototype : void 0, tp = t_ ? t_.valueOf : void 0; function tg(t) { var e = -1, i = null == t ? 0 : t.length; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } function tm(t) { var e = -1, i = null == t ? 0 : t.length; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } function tb(t) { var e = -1, i = null == t ? 0 : t.length; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } function ty(t) { var e = -1, i = null == t ? 0 : t.length; for (this.__data__ = new tb; ++e < i;)this.add(t[e]) } function tv(t) { var e = this.__data__ = new tm(t); this.size = e.size } function tA(t, e) { for (var i = t.length; i--;)if (t5(t[i][0], e)) return i; return -1 } function t0(t) { var e; return null == t ? void 0 === t ? m : d : tt && tt in Object(t) ? function (t) { var e = V.call(t, tt), i = t[tt]; try { t[tt] = void 0; var r = !0 } catch (n) { } var s = Z.call(t); return r && (e ? t[tt] = i : delete t[tt]), s }(t) : (e = t, Z.call(e)) } function t3(t) { return tT(t) && t0(t) == n } function tx(t, e, i, r, n, s) { var l = 1 & i, o = t.length, a = e.length; if (o != a && !(l && a > o)) return !1; var u = s.get(t); if (u && s.get(e)) return u == e; var c = -1, h = !0, d = 2 & i ? new ty : void 0; for (s.set(t, e), s.set(e, t); ++c < o;) { var f = t[c], $ = e[c]; if (r) var _ = l ? r($, f, c, e, t, s) : r(f, $, c, t, e, s); if (void 0 !== _) { if (_) continue; h = !1; break } if (d) { if (!R(e, function (t, e) { var l; if (l = e, !d.has(l) && (f === t || n(f, t, i, r, s))) return d.push(e) })) { h = !1; break } } else if (f !== $ && !n(f, $, i, r, s)) { h = !1; break } } return s.delete(t), s.delete(e), h } function t1(t) { var e, i, r, n; return e = t, i = tR, r = tE, n = i(e), t7(e) ? n : function (t, e) { for (var i = -1, r = e.length, n = t.length; ++i < r;)t[n + i] = e[i]; return t }(n, r(e)) } function tN(t, e) { var i, r, n = t.__data__; return ("string" == (r = typeof (i = e)) || "number" == r || "symbol" == r || "boolean" == r ? "__proto__" !== i : null === i) ? n["string" == typeof e ? "string" : "hash"] : n.map } function t2(t, e) { var i, r, n, s, l = (i = t, r = e, null == i ? void 0 : i[r]); return !(!tS(n = l) || (s = n, K && K in s)) && (t8(n) ? W : A).test(tw(n)) ? l : void 0 } tg.prototype.clear = function () { this.__data__ = tu ? tu(null) : {}, this.size = 0 }, tg.prototype.delete = function (t) { var e = this.has(t) && delete this.__data__[t]; return this.size -= e ? 1 : 0, e }, tg.prototype.get = function (t) { var e = this.__data__; if (tu) { var i = e[t]; return i === r ? void 0 : i } return V.call(e, t) ? e[t] : void 0 }, tg.prototype.has = function (t) { var e = this.__data__; return tu ? void 0 !== e[t] : V.call(e, t) }, tg.prototype.set = function (t, e) { var i = this.__data__; return this.size += this.has(t) ? 0 : 1, i[t] = tu && void 0 === e ? r : e, this }, tm.prototype.clear = function () { this.__data__ = [], this.size = 0 }, tm.prototype.delete = function (t) { var e = this.__data__, i = tA(e, t); return !(i < 0 || (i == e.length - 1 ? e.pop() : Y.call(e, i, 1), --this.size, 0)) }, tm.prototype.get = function (t) { var e = this.__data__, i = tA(e, t); return i < 0 ? void 0 : e[i][1] }, tm.prototype.has = function (t) { return tA(this.__data__, t) > -1 }, tm.prototype.set = function (t, e) { var i = this.__data__, r = tA(i, t); return r < 0 ? (++this.size, i.push([t, e])) : i[r][1] = e, this }, tb.prototype.clear = function () { this.size = 0, this.__data__ = { hash: new tg, map: new (ts || tm), string: new tg } }, tb.prototype.delete = function (t) { var e = tN(this, t).delete(t); return this.size -= e ? 1 : 0, e }, tb.prototype.get = function (t) { return tN(this, t).get(t) }, tb.prototype.has = function (t) { return tN(this, t).has(t) }, tb.prototype.set = function (t, e) { var i = tN(this, t), r = i.size; return i.set(t, e), this.size += i.size == r ? 0 : 1, this }, ty.prototype.add = ty.prototype.push = function (t) { return this.__data__.set(t, r), this }, ty.prototype.has = function (t) { return this.__data__.has(t) }, tv.prototype.clear = function () { this.__data__ = new tm, this.size = 0 }, tv.prototype.delete = function (t) { var e = this.__data__, i = e.delete(t); return this.size = e.size, i }, tv.prototype.get = function (t) { return this.__data__.get(t) }, tv.prototype.has = function (t) { return this.__data__.has(t) }, tv.prototype.set = function (t, e) { var i = this.__data__; if (i instanceof tm) { var r = i.__data__; if (!ts || r.length < 199) return r.push([t, e]), this.size = ++i.size, this; i = this.__data__ = new tb(r) } return i.set(t, e), this.size = i.size, this }; var tE = te ? function (t) { return null == t ? [] : function (e, i) { for (var r, n = -1, s = null == e ? 0 : e.length, l = 0, o = []; ++n < s;) { var a = e[n]; r = a, J.call(t, r) && (o[l++] = a) } return o }(te(t = Object(t))) } : function () { return [] }, t4 = t0; function t6(t, e) { return !!(e = null == e ? 9007199254740991 : e) && ("number" == typeof t || x.test(t)) && t > -1 && t % 1 == 0 && t < e } function tw(t) { if (null != t) { try { return F.call(t) } catch (e) { } try { return t + "" } catch (i) { } } return "" } function t5(t, e) { return t === e || t != t && e != e } (tn && t4(new tn(new ArrayBuffer(1))) != v || ts && t4(new ts) != c || tl && t4(tl.resolve()) != $ || to && t4(new to) != p || ta && t4(new ta) != b) && (t4 = function (t) { var e = t0(t), i = e == f ? t.constructor : void 0, r = i ? tw(i) : ""; if (r) switch (r) { case tc: return v; case th: return c; case td: return $; case tf: return p; case t$: return b }return e }); var tq = t3(function () { return arguments }()) ? t3 : function (t) { return tT(t) && V.call(t, "callee") && !J.call(t, "callee") }, t7 = Array.isArray, tk = ti || function () { return !1 }; function t8(t) { if (!tS(t)) return !1; var e = t0(t); return e == u || "[object GeneratorFunction]" == e || "[object AsyncFunction]" == e || "[object Proxy]" == e } function tL(t) { return "number" == typeof t && t > -1 && t % 1 == 0 && t <= 9007199254740991 } function tS(t) { var e = typeof t; return null != t && ("object" == e || "function" == e) } function tT(t) { return null != t && "object" == typeof t } var tC, tO = O ? (tC = O, function (t) { return tC(t) }) : function (t) { return tT(t) && tL(t.length) && !!N[t0(t)] }; function tR(t) { var e; return null != (e = t) && tL(e.length) && !t8(e) ? function (t, e) { var i = t7(t), r = !i && tq(t), n = !i && !r && tk(t), s = !i && !r && !n && tO(t), l = i || r || n || s, o = l ? function (t, e) { for (var i = -1, r = Array(t); ++i < t;)r[i] = e(i); return r }(t.length, String) : [], a = o.length; for (var u in t) !V.call(t, u) || l && ("length" == u || n && ("offset" == u || "parent" == u) || s && ("buffer" == u || "byteLength" == u || "byteOffset" == u) || t6(u, a)) || o.push(u); return o }(t) : function (t) { if (i = (e = t) && e.constructor, e !== ("function" == typeof i && i.prototype || z)) return tr(t); var e, i, r = []; for (var n in Object(t)) V.call(t, n) && "constructor" != n && r.push(n); return r }(t) } t.exports = function (t, e) { return function t(e, i, r, u, d) { return e === i || (null != e && null != i && (tT(e) || tT(i)) ? function (t, e, i, r, u, d) { var $ = t7(t), m = t7(e), b = $ ? s : t4(t), A = m ? s : t4(e), x = (b = b == n ? f : b) == f, N = (A = A == n ? f : A) == f, E = b == A; if (E && tk(t)) { if (!tk(e)) return !1; $ = !0, x = !1 } if (E && !x) return d || (d = new tv), $ || tO(t) ? tx(t, e, i, r, u, d) : function (t, e, i, r, n, s, u) { switch (i) { case v: if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset) break; t = t.buffer, e = e.buffer; case y: return !(t.byteLength != e.byteLength || !s(new Q(t), new Q(e))); case l: case o: case h: return t5(+t, +e); case a: return t.name == e.name && t.message == e.message; case _: case g: return t == e + ""; case c: var d = B; case p: var f = 1 & r; if (d || (d = I), t.size != e.size && !f) break; var $ = u.get(t); if ($) return $ == e; r |= 2, u.set(t, e); var m = tx(d(t), d(e), r, n, s, u); return u.delete(t), m; case "[object Symbol]": if (tp) return tp.call(t) == tp.call(e) }return !1 }(t, e, b, i, r, u, d); if (!(1 & i)) { var w = x && V.call(t, "__wrapped__"), q = N && V.call(e, "__wrapped__"); if (w || q) { var k = w ? t.value() : t, L = q ? e.value() : e; return d || (d = new tv), u(k, L, i, r, d) } } return !!E && (d || (d = new tv), function (t, e, i, r, n, s) { var l = 1 & i, o = t1(t), a = o.length; if (a != t1(e).length && !l) return !1; for (var u = a; u--;) { var c = o[u]; if (!(l ? c in e : V.call(e, c))) return !1 } var h = s.get(t); if (h && s.get(e)) return h == e; var d = !0; s.set(t, e), s.set(e, t); for (var f = l; ++u < a;) { var $ = t[c = o[u]], _ = e[c]; if (r) var p = l ? r(_, $, c, e, t, s) : r($, _, c, t, e, s); if (!(void 0 === p ? $ === _ || n($, _, i, r, s) : p)) { d = !1; break } f || (f = "constructor" == c) } if (d && !f) { var g = t.constructor, m = e.constructor; g == m || !("constructor" in t) || !("constructor" in e) || "function" == typeof g && g instanceof g && "function" == typeof m && m instanceof m || (d = !1) } return s.delete(t), s.delete(e), d }(t, e, i, r, u, d)) }(e, i, void 0, void 0, t, void 0) : e != e && i != i) }(t, e) } }, 1270: function (t, e, i) { "use strict"; var r, n; Object.defineProperty(e, "__esModule", { value: !0 }); let s = i(9629), l = i(4162); (n = r || (r = {})).compose = function (t = {}, e = {}, i = !1) { "object" != typeof t && (t = {}), "object" != typeof e && (e = {}); let r = s(e); for (let n in i || (r = Object.keys(r).reduce((t, e) => (null != r[e] && (t[e] = r[e]), t), {})), t) void 0 !== t[n] && void 0 === e[n] && (r[n] = t[n]); return Object.keys(r).length > 0 ? r : void 0 }, n.diff = function (t = {}, e = {}) { "object" != typeof t && (t = {}), "object" != typeof e && (e = {}); let i = Object.keys(t).concat(Object.keys(e)).reduce((i, r) => (l(t[r], e[r]) || (i[r] = void 0 === e[r] ? null : e[r]), i), {}); return Object.keys(i).length > 0 ? i : void 0 }, n.invert = function (t = {}, e = {}) { t = t || {}; let i = Object.keys(e).reduce((i, r) => (e[r] !== t[r] && void 0 !== t[r] && (i[r] = e[r]), i), {}); return Object.keys(t).reduce((i, r) => (t[r] !== e[r] && void 0 === e[r] && (i[r] = null), i), i) }, n.transform = function (t, e, i = !1) { if ("object" != typeof t) return e; if ("object" != typeof e) return; if (!i) return e; let r = Object.keys(e).reduce((i, r) => (void 0 === t[r] && (i[r] = e[r]), i), {}); return Object.keys(r).length > 0 ? r : void 0 }, e.default = r }, 5232: function (t, e, i) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.AttributeMap = e.OpIterator = e.Op = void 0; let r = i(5090), n = i(9629), s = i(4162), l = i(1270); e.AttributeMap = l.default; let o = i(4123); e.Op = o.default; let a = i(7033); e.OpIterator = a.default; let u = (t, e) => { if ("object" != typeof t || null === t) throw Error("cannot retain a " + typeof t); if ("object" != typeof e || null === e) throw Error("cannot retain a " + typeof e); let i = Object.keys(t)[0]; if (!i || i !== Object.keys(e)[0]) throw Error(`embed types not matched: ${i} != ${Object.keys(e)[0]}`); return [i, t[i], e[i]] }; class c { constructor(t) { Array.isArray(t) ? this.ops = t : null != t && Array.isArray(t.ops) ? this.ops = t.ops : this.ops = [] } static registerEmbed(t, e) { this.handlers[t] = e } static unregisterEmbed(t) { delete this.handlers[t] } static getHandler(t) { let e = this.handlers[t]; if (!e) throw Error(`no handlers for embed type "${t}"`); return e } insert(t, e) { let i = {}; return "string" == typeof t && 0 === t.length ? this : (i.insert = t, null != e && "object" == typeof e && Object.keys(e).length > 0 && (i.attributes = e), this.push(i)) } delete(t) { return t <= 0 ? this : this.push({ delete: t }) } retain(t, e) { if ("number" == typeof t && t <= 0) return this; let i = { retain: t }; return null != e && "object" == typeof e && Object.keys(e).length > 0 && (i.attributes = e), this.push(i) } push(t) { let e = this.ops.length, i = this.ops[e - 1]; if (t = n(t), "object" == typeof i) { if ("number" == typeof t.delete && "number" == typeof i.delete) return this.ops[e - 1] = { delete: i.delete + t.delete }, this; if ("number" == typeof i.delete && null != t.insert && (e -= 1, "object" != typeof (i = this.ops[e - 1]))) return this.ops.unshift(t), this; if (s(t.attributes, i.attributes)) { if ("string" == typeof t.insert && "string" == typeof i.insert) return this.ops[e - 1] = { insert: i.insert + t.insert }, "object" == typeof t.attributes && (this.ops[e - 1].attributes = t.attributes), this; if ("number" == typeof t.retain && "number" == typeof i.retain) return this.ops[e - 1] = { retain: i.retain + t.retain }, "object" == typeof t.attributes && (this.ops[e - 1].attributes = t.attributes), this } } return e === this.ops.length ? this.ops.push(t) : this.ops.splice(e, 0, t), this } chop() { let t = this.ops[this.ops.length - 1]; return t && "number" == typeof t.retain && !t.attributes && this.ops.pop(), this } filter(t) { return this.ops.filter(t) } forEach(t) { this.ops.forEach(t) } map(t) { return this.ops.map(t) } partition(t) { let e = [], i = []; return this.forEach(r => { (t(r) ? e : i).push(r) }), [e, i] } reduce(t, e) { return this.ops.reduce(t, e) } changeLength() { return this.reduce((t, e) => e.insert ? t + o.default.length(e) : e.delete ? t - e.delete : t, 0) } length() { return this.reduce((t, e) => t + o.default.length(e), 0) } slice(t = 0, e = 1 / 0) { let i = [], r = new a.default(this.ops), n = 0; for (; n < e && r.hasNext();) { let s; n < t ? s = r.next(t - n) : (s = r.next(e - n), i.push(s)), n += o.default.length(s) } return new c(i) } compose(t) { let e = new a.default(this.ops), i = new a.default(t.ops), r = [], n = i.peek(); if (null != n && "number" == typeof n.retain && null == n.attributes) { let o = n.retain; for (; "insert" === e.peekType() && e.peekLength() <= o;)o -= e.peekLength(), r.push(e.next()); n.retain - o > 0 && i.next(n.retain - o) } let h = new c(r); for (; e.hasNext() || i.hasNext();)if ("insert" === i.peekType()) h.push(i.next()); else if ("delete" === e.peekType()) h.push(e.next()); else { let d = Math.min(e.peekLength(), i.peekLength()), f = e.next(d), $ = i.next(d); if ($.retain) { let _ = {}; if ("number" == typeof f.retain) _.retain = "number" == typeof $.retain ? d : $.retain; else if ("number" == typeof $.retain) null == f.retain ? _.insert = f.insert : _.retain = f.retain; else { let p = null == f.retain ? "insert" : "retain", [g, m, b] = u(f[p], $.retain), y = c.getHandler(g); _[p] = { [g]: y.compose(m, b, "retain" === p) } } let v = l.default.compose(f.attributes, $.attributes, "number" == typeof f.retain); if (v && (_.attributes = v), h.push(_), !i.hasNext() && s(h.ops[h.ops.length - 1], _)) { let A = new c(e.rest()); return h.concat(A).chop() } } else "number" == typeof $.delete && ("number" == typeof f.retain || "object" == typeof f.retain && null !== f.retain) && h.push($) } return h.chop() } concat(t) { let e = new c(this.ops.slice()); return t.ops.length > 0 && (e.push(t.ops[0]), e.ops = e.ops.concat(t.ops.slice(1))), e } diff(t, e) { if (this.ops === t.ops) return new c; let i = [this, t].map(e => e.map(i => { if (null != i.insert) return "string" == typeof i.insert ? i.insert : "\0"; throw Error("diff() called " + (e === t ? "on" : "with") + " non-document") }).join("")), n = new c, o = r(i[0], i[1], e, !0), u = new a.default(this.ops), h = new a.default(t.ops); return o.forEach(t => { let e = t[1].length; for (; e > 0;) { let i = 0; switch (t[0]) { case r.INSERT: i = Math.min(h.peekLength(), e), n.push(h.next(i)); break; case r.DELETE: i = Math.min(e, u.peekLength()), u.next(i), n.delete(i); break; case r.EQUAL: i = Math.min(u.peekLength(), h.peekLength(), e); let o = u.next(i), a = h.next(i); s(o.insert, a.insert) ? n.retain(i, l.default.diff(o.attributes, a.attributes)) : n.push(a).delete(i) }e -= i } }), n.chop() } eachLine(t, e = "\n") { let i = new a.default(this.ops), r = new c, n = 0; for (; i.hasNext();) { if ("insert" !== i.peekType()) return; let s = i.peek(), l = o.default.length(s) - i.peekLength(), u = "string" == typeof s.insert ? s.insert.indexOf(e, l) - l : -1; if (u < 0) r.push(i.next()); else if (u > 0) r.push(i.next(u)); else { if (!1 === t(r, i.next(1).attributes || {}, n)) return; n += 1, r = new c } } r.length() > 0 && t(r, {}, n) } invert(t) { let e = new c; return this.reduce((i, r) => { if (r.insert) e.delete(o.default.length(r)); else { if ("number" == typeof r.retain && null == r.attributes) return e.retain(r.retain), i + r.retain; if (r.delete || "number" == typeof r.retain) { let n = r.delete || r.retain; return t.slice(i, i + n).forEach(t => { r.delete ? e.push(t) : r.retain && r.attributes && e.retain(o.default.length(t), l.default.invert(r.attributes, t.attributes)) }), i + n } if ("object" == typeof r.retain && null !== r.retain) { let s = t.slice(i, i + 1), h = new a.default(s.ops).next(), [d, f, $] = u(r.retain, h.insert), _ = c.getHandler(d); return e.retain({ [d]: _.invert(f, $) }, l.default.invert(r.attributes, h.attributes)), i + 1 } } return i }, 0), e.chop() } transform(t, e = !1) { if (e = !!e, "number" == typeof t) return this.transformPosition(t, e); let i = new a.default(this.ops), r = new a.default(t.ops), n = new c; for (; i.hasNext() || r.hasNext();)if ("insert" === i.peekType() && (e || "insert" !== r.peekType())) n.retain(o.default.length(i.next())); else if ("insert" === r.peekType()) n.push(r.next()); else { let s = Math.min(i.peekLength(), r.peekLength()), u = i.next(s), h = r.next(s); if (u.delete) continue; if (h.delete) n.push(h); else { let d = u.retain, f = h.retain, $ = "object" == typeof f && null !== f ? f : s; if ("object" == typeof d && null !== d && "object" == typeof f && null !== f) { let _ = Object.keys(d)[0]; if (_ === Object.keys(f)[0]) { let p = c.getHandler(_); p && ($ = { [_]: p.transform(d[_], f[_], e) }) } } n.retain($, l.default.transform(u.attributes, h.attributes, e)) } } return n.chop() } transformPosition(t, e = !1) { e = !!e; let i = new a.default(this.ops), r = 0; for (; i.hasNext() && r <= t;) { let n = i.peekLength(), s = i.peekType(); i.next(), "delete" !== s ? ("insert" === s && (r < t || !e) && (t += n), r += n) : t -= Math.min(n, t - r) } return t } } c.Op = o.default, c.OpIterator = a.default, c.AttributeMap = l.default, c.handlers = {}, e.default = c, t.exports = c, t.exports.default = c }, 4123: function (t, e) { "use strict"; var i, r; Object.defineProperty(e, "__esModule", { value: !0 }), (i || (i = {})).length = function (t) { return "number" == typeof t.delete ? t.delete : "number" == typeof t.retain ? t.retain : "object" == typeof t.retain && null !== t.retain ? 1 : "string" == typeof t.insert ? t.insert.length : 1 }, e.default = i }, 7033: function (t, e, i) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); let r = i(4123); e.default = class { constructor(t) { this.ops = t, this.index = 0, this.offset = 0 } hasNext() { return this.peekLength() < 1 / 0 } next(t) { t || (t = 1 / 0); let e = this.ops[this.index]; if (e) { let i = this.offset, n = r.default.length(e); if (t >= n - i ? (t = n - i, this.index += 1, this.offset = 0) : this.offset += t, "number" == typeof e.delete) return { delete: t }; { let s = {}; return e.attributes && (s.attributes = e.attributes), "number" == typeof e.retain ? s.retain = t : "object" == typeof e.retain && null !== e.retain ? s.retain = e.retain : "string" == typeof e.insert ? s.insert = e.insert.substr(i, t) : s.insert = e.insert, s } } return { retain: 1 / 0 } } peek() { return this.ops[this.index] } peekLength() { return this.ops[this.index] ? r.default.length(this.ops[this.index]) - this.offset : 1 / 0 } peekType() { let t = this.ops[this.index]; return t ? "number" == typeof t.delete ? "delete" : "number" == typeof t.retain || "object" == typeof t.retain && null !== t.retain ? "retain" : "insert" : "retain" } rest() { if (this.hasNext()) { if (0 === this.offset) return this.ops.slice(this.index); { let t = this.offset, e = this.index, i = this.next(), r = this.ops.slice(this.index); return this.offset = t, this.index = e, [i].concat(r) } } return [] } } }, 8820: function (t, e, i) { "use strict"; i.d(e, { A: function () { return o } }); var r = i(8138), n = function (t, e) { for (var i = t.length; i--;)if ((0, r.A)(t[i][0], e)) return i; return -1 }, s = Array.prototype.splice; function l(t) { var e = -1, i = null == t ? 0 : t.length; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } l.prototype.clear = function () { this.__data__ = [], this.size = 0 }, l.prototype.delete = function (t) { var e = this.__data__, i = n(e, t); return !(i < 0 || (i == e.length - 1 ? e.pop() : s.call(e, i, 1), --this.size, 0)) }, l.prototype.get = function (t) { var e = this.__data__, i = n(e, t); return i < 0 ? void 0 : e[i][1] }, l.prototype.has = function (t) { return n(this.__data__, t) > -1 }, l.prototype.set = function (t, e) { var i = this.__data__, r = n(i, t); return r < 0 ? (++this.size, i.push([t, e])) : i[r][1] = e, this }; var o = l }, 2461: function (t, e, i) { "use strict"; var r = i(2281), n = i(5507), s = (0, r.A)(n.A, "Map"); e.A = s }, 3558: function (t, e, i) { "use strict"; i.d(e, { A: function () { return d } }); var r = (0, i(2281).A)(Object, "create"), n = Object.prototype.hasOwnProperty, s = Object.prototype.hasOwnProperty; function l(t) { var e = -1, i = null == t ? 0 : t.length; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } l.prototype.clear = function () { this.__data__ = r ? r(null) : {}, this.size = 0 }, l.prototype.delete = function (t) { var e = this.has(t) && delete this.__data__[t]; return this.size -= e ? 1 : 0, e }, l.prototype.get = function (t) { var e = this.__data__; if (r) { var i = e[t]; return "__lodash_hash_undefined__" === i ? void 0 : i } return n.call(e, t) ? e[t] : void 0 }, l.prototype.has = function (t) { var e = this.__data__; return r ? void 0 !== e[t] : s.call(e, t) }, l.prototype.set = function (t, e) { var i = this.__data__; return this.size += this.has(t) ? 0 : 1, i[t] = r && void 0 === e ? "__lodash_hash_undefined__" : e, this }; var o = l, a = i(8820), u = i(2461), c = function (t, e) { var i, r, n = t.__data__; return ("string" == (r = typeof (i = e)) || "number" == r || "symbol" == r || "boolean" == r ? "__proto__" !== i : null === i) ? n["string" == typeof e ? "string" : "hash"] : n.map }; function h(t) { var e = -1, i = null == t ? 0 : t.length; for (this.clear(); ++e < i;) { var r = t[e]; this.set(r[0], r[1]) } } h.prototype.clear = function () { this.size = 0, this.__data__ = { hash: new o, map: new (u.A || a.A), string: new o } }, h.prototype.delete = function (t) { var e = c(this, t).delete(t); return this.size -= e ? 1 : 0, e }, h.prototype.get = function (t) { return c(this, t).get(t) }, h.prototype.has = function (t) { return c(this, t).has(t) }, h.prototype.set = function (t, e) { var i = c(this, t), r = i.size; return i.set(t, e), this.size += i.size == r ? 0 : 1, this }; var d = h }, 2673: function (t, e, i) { "use strict"; i.d(e, { A: function () { return o } }); var r = i(8820), n = i(2461), s = i(3558); function l(t) { var e = this.__data__ = new r.A(t); this.size = e.size } l.prototype.clear = function () { this.__data__ = new r.A, this.size = 0 }, l.prototype.delete = function (t) { var e = this.__data__, i = e.delete(t); return this.size = e.size, i }, l.prototype.get = function (t) { return this.__data__.get(t) }, l.prototype.has = function (t) { return this.__data__.has(t) }, l.prototype.set = function (t, e) { var i = this.__data__; if (i instanceof r.A) { var l = i.__data__; if (!n.A || l.length < 199) return l.push([t, e]), this.size = ++i.size, this; i = this.__data__ = new s.A(l) } return i.set(t, e), this.size = i.size, this }; var o = l }, 439: function (t, e, i) { "use strict"; var r = i(5507).A.Symbol; e.A = r }, 7218: function (t, e, i) { "use strict"; var r = i(5507).A.Uint8Array; e.A = r }, 6753: function (t, e, i) { "use strict"; i.d(e, { A: function () { return u } }); var r = i(8412), n = i(723), s = i(776), l = i(3767), o = i(5755), a = Object.prototype.hasOwnProperty, u = function (t, e) { var i = (0, n.A)(t), u = !i && (0, r.A)(t), c = !i && !u && (0, s.A)(t), h = !i && !u && !c && (0, o.A)(t), d = i || u || c || h, f = d ? function (t, e) { for (var i = -1, r = Array(t); ++i < t;)r[i] = e(i); return r }(t.length, String) : [], $ = f.length; for (var _ in t) !e && !a.call(t, _) || d && ("length" == _ || c && ("offset" == _ || "parent" == _) || h && ("buffer" == _ || "byteLength" == _ || "byteOffset" == _) || (0, l.A)(_, $)) || f.push(_); return f } }, 802: function (t, e) { "use strict"; e.A = function (t, e) { for (var i = -1, r = e.length, n = t.length; ++i < r;)t[n + i] = e[i]; return t } }, 6437: function (t, e, i) { "use strict"; var r = i(6770), n = i(8138), s = Object.prototype.hasOwnProperty; e.A = function (t, e, i) { var l = t[e]; s.call(t, e) && (0, n.A)(l, i) && (void 0 !== i || e in t) || (0, r.A)(t, e, i) } }, 6770: function (t, e, i) { "use strict"; var r = i(7889); e.A = function (t, e, i) { "__proto__" == e && r.A ? (0, r.A)(t, e, { configurable: !0, enumerable: !0, value: i, writable: !0 }) : t[e] = i } }, 1381: function (t, e, i) { "use strict"; var r = i(802), n = i(723); e.A = function (t, e, i) { var s = e(t); return (0, n.A)(t) ? s : (0, r.A)(s, i(t)) } }, 2159: function (t, e, i) { "use strict"; i.d(e, { A: function () { return c } }); var r = i(439), n = Object.prototype, s = n.hasOwnProperty, l = n.toString, o = r.A ? r.A.toStringTag : void 0, a = Object.prototype.toString, u = r.A ? r.A.toStringTag : void 0, c = function (t) { var e; return null == t ? void 0 === t ? "[object Undefined]" : "[object Null]" : u && u in Object(t) ? function (t) { var e = s.call(t, o), i = t[o]; try { t[o] = void 0; var r = !0 } catch (n) { } var a = l.call(t); return r && (e ? t[o] = i : delete t[o]), a }(t) : (e = t, a.call(e)) } }, 5771: function (t, e) { "use strict"; e.A = function (t) { return function (e) { return t(e) } } }, 2899: function (t, e, i) { "use strict"; var r = i(7218); e.A = function (t) { var e = new t.constructor(t.byteLength); return new r.A(e).set(new r.A(t)), e } }, 3812: function (t, e, i) { "use strict"; var r = i(5507), n = "object" == typeof exports && exports && !exports.nodeType && exports, s = n && "object" == typeof module && module && !module.nodeType && module, l = s && s.exports === n ? r.A.Buffer : void 0, o = l ? l.allocUnsafe : void 0; e.A = function (t, e) { if (e) return t.slice(); var i = t.length, r = o ? o(i) : new t.constructor(i); return t.copy(r), r } }, 1827: function (t, e, i) { "use strict"; var r = i(2899); e.A = function (t, e) { var i = e ? (0, r.A)(t.buffer) : t.buffer; return new t.constructor(i, t.byteOffset, t.length) } }, 4405: function (t, e) { "use strict"; e.A = function (t, e) { var i = -1, r = t.length; for (e || (e = Array(r)); ++i < r;)e[i] = t[i]; return e } }, 9601: function (t, e, i) { "use strict"; var r = i(6437), n = i(6770); e.A = function (t, e, i, s) { var l = !i; i || (i = {}); for (var o = -1, a = e.length; ++o < a;) { var u = e[o], c = s ? s(i[u], t[u], u, i, t) : void 0; void 0 === c && (c = t[u]), l ? (0, n.A)(i, u, c) : (0, r.A)(i, u, c) } return i } }, 7889: function (t, e, i) { "use strict"; var r = i(2281), n = function () { try { var t = (0, r.A)(Object, "defineProperty"); return t({}, "", {}), t } catch (e) { } }(); e.A = n }, 9646: function (t, e) { "use strict"; var i = "object" == typeof global && global && global.Object === Object && global; e.A = i }, 2816: function (t, e, i) { "use strict"; var r = i(1381), n = i(9844), s = i(3169); e.A = function (t) { return (0, r.A)(t, s.A, n.A) } }, 2281: function (t, e, i) { "use strict"; i.d(e, { A: function () { return p } }); var r, n = i(7572), s = i(5507).A["__core-js_shared__"], l = (r = /[^.]+$/.exec(s && s.keys && s.keys.IE_PROTO || "")) ? "Symbol(src)_1." + r : "", o = i(659), a = i(1543), u = /^\[object .+?Constructor\]$/, c = Function.prototype, h = Object.prototype, d = c.toString, f = h.hasOwnProperty, $ = RegExp("^" + d.call(f).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), _ = function (t) { var e; return !(!(0, o.A)(t) || (e = t, l && l in e)) && ((0, n.A)(t) ? $ : u).test((0, a.A)(t)) }, p = function (t, e) { var i, r, n = (i = t, r = e, null == i ? void 0 : i[r]); return _(n) ? n : void 0 } }, 8769: function (t, e, i) { "use strict"; var r = (0, i(2217).A)(Object.getPrototypeOf, Object); e.A = r }, 9844: function (t, e, i) { "use strict"; i.d(e, { A: function () { return l } }); var r = i(6935), n = Object.prototype.propertyIsEnumerable, s = Object.getOwnPropertySymbols, l = s ? function (t) { return null == t ? [] : function (t, e) { for (var i = -1, r = null == t ? 0 : t.length, n = 0, s = []; ++i < r;) { var l = t[i]; e(l, i, t) && (s[n++] = l) } return s }(s(t = Object(t)), function (e) { return n.call(t, e) }) } : r.A }, 7995: function (t, e, i) { "use strict"; i.d(e, { A: function () { return x } }); var r = i(2281), n = i(5507), s = (0, r.A)(n.A, "DataView"), l = i(2461), o = (0, r.A)(n.A, "Promise"), a = (0, r.A)(n.A, "Set"), u = (0, r.A)(n.A, "WeakMap"), c = i(2159), h = i(1543), d = "[object Map]", f = "[object Promise]", $ = "[object Set]", _ = "[object WeakMap]", p = "[object DataView]", g = (0, h.A)(s), m = (0, h.A)(l.A), b = (0, h.A)(o), y = (0, h.A)(a), v = (0, h.A)(u), A = c.A; (s && A(new s(new ArrayBuffer(1))) != p || l.A && A(new l.A) != d || o && A(o.resolve()) != f || a && A(new a) != $ || u && A(new u) != _) && (A = function (t) { var e = (0, c.A)(t), i = "[object Object]" == e ? t.constructor : void 0, r = i ? (0, h.A)(i) : ""; if (r) switch (r) { case g: return p; case m: return d; case b: return f; case y: return $; case v: return _ }return e }); var x = A }, 1683: function (t, e, i) { "use strict"; i.d(e, { A: function () { return a } }); var r = i(659), n = Object.create, s = function () { function t() { } return function (e) { if (!(0, r.A)(e)) return {}; if (n) return n(e); t.prototype = e; var i = new t; return t.prototype = void 0, i } }(), l = i(8769), o = i(501), a = function (t) { return "function" != typeof t.constructor || (0, o.A)(t) ? {} : s((0, l.A)(t)) } }, 3767: function (t, e) { "use strict"; var i = /^(?:0|[1-9]\d*)$/; e.A = function (t, e) { var r = typeof t; return !!(e = null == e ? 9007199254740991 : e) && ("number" == r || "symbol" != r && i.test(t)) && t > -1 && t % 1 == 0 && t < e } }, 501: function (t, e) { "use strict"; var i = Object.prototype; e.A = function (t) { var e = t && t.constructor; return t === ("function" == typeof e && e.prototype || i) } }, 8795: function (t, e, i) { "use strict"; var r = i(9646), n = "object" == typeof exports && exports && !exports.nodeType && exports, s = n && "object" == typeof module && module && !module.nodeType && module, l = s && s.exports === n && r.A.process, o = function () { try { return s && s.require && s.require("util").types || l && l.binding && l.binding("util") } catch (t) { } }(); e.A = o }, 2217: function (t, e) { "use strict"; e.A = function (t, e) { return function (i) { return t(e(i)) } } }, 5507: function (t, e, i) { "use strict"; var r = i(9646), n = "object" == typeof self && self && self.Object === Object && self, s = r.A || n || Function("return this")(); e.A = s }, 1543: function (t, e) { "use strict"; var i = Function.prototype.toString; e.A = function (t) { if (null != t) { try { return i.call(t) } catch (e) { } try { return t + "" } catch (r) { } } return "" } }, 3707: function (t, e, i) { "use strict"; i.d(e, { A: function () { return H } }); var r = i(2673), n = i(6437), s = i(9601), l = i(3169), o = i(2624), a = i(3812), u = i(4405), c = i(9844), h = i(802), d = i(8769), f = i(6935), $ = Object.getOwnPropertySymbols ? function (t) { for (var e = []; t;)(0, h.A)(e, (0, c.A)(t)), t = (0, d.A)(t); return e } : f.A, _ = i(2816), p = i(1381), g = function (t) { return (0, p.A)(t, o.A, $) }, m = i(7995), b = Object.prototype.hasOwnProperty, y = i(2899), v = /\w*$/, A = i(439), x = A.A ? A.A.prototype : void 0, N = x ? x.valueOf : void 0, E = i(1827), w = function (t, e, i) { var r, n, s, l, o, a, u = t.constructor; switch (e) { case "[object ArrayBuffer]": return (0, y.A)(t); case "[object Boolean]": case "[object Date]": return new u(+t); case "[object DataView]": return r = t, s = (n = i) ? (0, y.A)(r.buffer) : r.buffer, new r.constructor(s, r.byteOffset, r.byteLength); case "[object Float32Array]": case "[object Float64Array]": case "[object Int8Array]": case "[object Int16Array]": case "[object Int32Array]": case "[object Uint8Array]": case "[object Uint8ClampedArray]": case "[object Uint16Array]": case "[object Uint32Array]": return (0, E.A)(t, i); case "[object Map]": case "[object Set]": return new u; case "[object Number]": case "[object String]": return new u(t); case "[object RegExp]": return (a = new (o = t).constructor(o.source, v.exec(o))).lastIndex = o.lastIndex, a; case "[object Symbol]": return l = t, N ? Object(N.call(l)) : {} } }, q = i(1683), k = i(723), L = i(776), S = i(7948), T = i(5771), C = i(8795), O = C.A && C.A.isMap, R = O ? (0, T.A)(O) : function (t) { return (0, S.A)(t) && "[object Map]" == (0, m.A)(t) }, B = i(659), I = C.A && C.A.isSet, j = I ? (0, T.A)(I) : function (t) { return (0, S.A)(t) && "[object Set]" == (0, m.A)(t) }, U = "[object Arguments]", M = "[object Function]", D = "[object Object]", P = {}; P[U] = P["[object Array]"] = P["[object ArrayBuffer]"] = P["[object DataView]"] = P["[object Boolean]"] = P["[object Date]"] = P["[object Float32Array]"] = P["[object Float64Array]"] = P["[object Int8Array]"] = P["[object Int16Array]"] = P["[object Int32Array]"] = P["[object Map]"] = P["[object Number]"] = P[D] = P["[object RegExp]"] = P["[object Set]"] = P["[object String]"] = P["[object Symbol]"] = P["[object Uint8Array]"] = P["[object Uint8ClampedArray]"] = P["[object Uint16Array]"] = P["[object Uint32Array]"] = !0, P["[object Error]"] = P[M] = P["[object WeakMap]"] = !1; var z = function t(e, i, h, d, f, p) { var y, v = 1 & i, A = 2 & i; if (h && (y = f ? h(e, d, f, p) : h(e)), void 0 !== y) return y; if (!(0, B.A)(e)) return e; var x = (0, k.A)(e); if (x) { if (y = (E = (N = e).length, S = new N.constructor(E), E && "string" == typeof N[0] && b.call(N, "index") && (S.index = N.index, S.input = N.input), S), !v) return (0, u.A)(e, y) } else { var N, E, S, T, C, O, I, z, H, F, V, K = (0, m.A)(e), Z = K == M || "[object GeneratorFunction]" == K; if ((0, L.A)(e)) return (0, a.A)(e, v); if (K == D || K == U || Z && !f) { if (y = A || Z ? {} : (0, q.A)(e), !v) return A ? (O = e, I = (T = y, C = e, T && (0, s.A)(C, (0, o.A)(C), T)), (0, s.A)(O, $(O), I)) : (F = e, V = (z = y, H = e, z && (0, s.A)(H, (0, l.A)(H), z)), (0, s.A)(F, (0, c.A)(F), V)) } else { if (!P[K]) return f ? e : {}; y = w(e, K, v) } } p || (p = new r.A); var W = p.get(e); if (W) return W; p.set(e, y), j(e) ? e.forEach(function (r) { y.add(t(r, i, h, r, e, p)) }) : R(e) && e.forEach(function (r, n) { y.set(n, t(r, i, h, n, e, p)) }); var G = 4 & i ? A ? g : _.A : A ? o.A : l.A, X = x ? void 0 : G(e); return function (t, e) { for (var i = -1, r = null == t ? 0 : t.length; ++i < r && !1 !== e(t[i], i, t);); }(X || e, function (r, s) { X && (r = e[s = r]), (0, n.A)(y, s, t(r, i, h, s, e, p)) }), y }, H = function (t) { return z(t, 5) } }, 8138: function (t, e) { "use strict"; e.A = function (t, e) { return t === e || t != t && e != e } }, 8412: function (t, e, i) { "use strict"; i.d(e, { A: function () { return u } }); var r = i(2159), n = i(7948), s = function (t) { return (0, n.A)(t) && "[object Arguments]" == (0, r.A)(t) }, l = Object.prototype, o = l.hasOwnProperty, a = l.propertyIsEnumerable, u = s(function () { return arguments }()) ? s : function (t) { return (0, n.A)(t) && o.call(t, "callee") && !a.call(t, "callee") } }, 723: function (t, e) { "use strict"; var i = Array.isArray; e.A = i }, 3628: function (t, e, i) { "use strict"; var r = i(7572), n = i(1628); e.A = function (t) { return null != t && (0, n.A)(t.length) && !(0, r.A)(t) } }, 776: function (t, e, i) { "use strict"; i.d(e, { A: function () { return o } }); var r = i(5507), n = "object" == typeof exports && exports && !exports.nodeType && exports, s = n && "object" == typeof module && module && !module.nodeType && module, l = s && s.exports === n ? r.A.Buffer : void 0, o = (l ? l.isBuffer : void 0) || function () { return !1 } }, 5123: function (t, e, i) { "use strict"; i.d(e, { A: function () { return k } }); var r = i(2673), n = i(3558); function s(t) { var e = -1, i = null == t ? 0 : t.length; for (this.__data__ = new n.A; ++e < i;)this.add(t[e]) } s.prototype.add = s.prototype.push = function (t) { return this.__data__.set(t, "__lodash_hash_undefined__"), this }, s.prototype.has = function (t) { return this.__data__.has(t) }; var l = s, o = function (t, e) { for (var i = -1, r = null == t ? 0 : t.length; ++i < r;)if (e(t[i], i, t)) return !0; return !1 }, a = function (t, e, i, r, n, s) { var a = 1 & i, u = t.length, c = e.length; if (u != c && !(a && c > u)) return !1; var h = s.get(t), d = s.get(e); if (h && d) return h == e && d == t; var f = -1, $ = !0, _ = 2 & i ? new l : void 0; for (s.set(t, e), s.set(e, t); ++f < u;) { var p = t[f], g = e[f]; if (r) var m = a ? r(g, p, f, e, t, s) : r(p, g, f, t, e, s); if (void 0 !== m) { if (m) continue; $ = !1; break } if (_) { if (!o(e, function (t, e) { var l; if (l = e, !_.has(l) && (p === t || n(p, t, i, r, s))) return _.push(e) })) { $ = !1; break } } else if (p !== g && !n(p, g, i, r, s)) { $ = !1; break } } return s.delete(t), s.delete(e), $ }, u = i(439), c = i(7218), h = i(8138), d = function (t) { var e = -1, i = Array(t.size); return t.forEach(function (t, r) { i[++e] = [r, t] }), i }, f = function (t) { var e = -1, i = Array(t.size); return t.forEach(function (t) { i[++e] = t }), i }, $ = u.A ? u.A.prototype : void 0, _ = $ ? $.valueOf : void 0, p = i(2816), g = Object.prototype.hasOwnProperty, m = i(7995), b = i(723), y = i(776), v = i(5755), A = "[object Arguments]", x = "[object Array]", N = "[object Object]", E = Object.prototype.hasOwnProperty, w = function (t, e, i, n, s, l) { var o = (0, b.A)(t), u = (0, b.A)(e), $ = o ? x : (0, m.A)(t), w = u ? x : (0, m.A)(e), q = ($ = $ == A ? N : $) == N, k = (w = w == A ? N : w) == N, L = $ == w; if (L && (0, y.A)(t)) { if (!(0, y.A)(e)) return !1; o = !0, q = !1 } if (L && !q) return l || (l = new r.A), o || (0, v.A)(t) ? a(t, e, i, n, s, l) : function (t, e, i, r, n, s, l) { switch (i) { case "[object DataView]": if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset) break; t = t.buffer, e = e.buffer; case "[object ArrayBuffer]": return !(t.byteLength != e.byteLength || !s(new c.A(t), new c.A(e))); case "[object Boolean]": case "[object Date]": case "[object Number]": return (0, h.A)(+t, +e); case "[object Error]": return t.name == e.name && t.message == e.message; case "[object RegExp]": case "[object String]": return t == e + ""; case "[object Map]": var o = d; case "[object Set]": var u = 1 & r; if (o || (o = f), t.size != e.size && !u) break; var $ = l.get(t); if ($) return $ == e; r |= 2, l.set(t, e); var p = a(o(t), o(e), r, n, s, l); return l.delete(t), p; case "[object Symbol]": if (_) return _.call(t) == _.call(e) }return !1 }(t, e, $, i, n, s, l); if (!(1 & i)) { var S = q && E.call(t, "__wrapped__"), T = k && E.call(e, "__wrapped__"); if (S || T) { var C = S ? t.value() : t, O = T ? e.value() : e; return l || (l = new r.A), s(C, O, i, n, l) } } return !!L && (l || (l = new r.A), function (t, e, i, r, n, s) { var l = 1 & i, o = (0, p.A)(t), a = o.length; if (a != (0, p.A)(e).length && !l) return !1; for (var u = a; u--;) { var c = o[u]; if (!(l ? c in e : g.call(e, c))) return !1 } var h = s.get(t), d = s.get(e); if (h && d) return h == e && d == t; var f = !0; s.set(t, e), s.set(e, t); for (var $ = l; ++u < a;) { var _ = t[c = o[u]], m = e[c]; if (r) var b = l ? r(m, _, c, e, t, s) : r(_, m, c, t, e, s); if (!(void 0 === b ? _ === m || n(_, m, i, r, s) : b)) { f = !1; break } $ || ($ = "constructor" == c) } if (f && !$) { var y = t.constructor, v = e.constructor; y == v || !("constructor" in t) || !("constructor" in e) || "function" == typeof y && y instanceof y && "function" == typeof v && v instanceof v || (f = !1) } return s.delete(t), s.delete(e), f }(t, e, i, n, s, l)) }, q = i(7948), k = function (t, e) { return function t(e, i, r, n, s) { return e === i || (null != e && null != i && ((0, q.A)(e) || (0, q.A)(i)) ? w(e, i, void 0, void 0, t, void 0) : e != e && i != i) }(t, e) } }, 7572: function (t, e, i) { "use strict"; var r = i(2159), n = i(659); e.A = function (t) { if (!(0, n.A)(t)) return !1; var e = (0, r.A)(t); return "[object Function]" == e || "[object GeneratorFunction]" == e || "[object AsyncFunction]" == e || "[object Proxy]" == e } }, 1628: function (t, e) { "use strict"; e.A = function (t) { return "number" == typeof t && t > -1 && t % 1 == 0 && t <= 9007199254740991 } }, 659: function (t, e) { "use strict"; e.A = function (t) { var e = typeof t; return null != t && ("object" == e || "function" == e) } }, 7948: function (t, e) { "use strict"; e.A = function (t) { return null != t && "object" == typeof t } }, 5755: function (t, e, i) { "use strict"; i.d(e, { A: function () { return c } }); var r = i(2159), n = i(1628), s = i(7948), l = {}; l["[object Float32Array]"] = l["[object Float64Array]"] = l["[object Int8Array]"] = l["[object Int16Array]"] = l["[object Int32Array]"] = l["[object Uint8Array]"] = l["[object Uint8ClampedArray]"] = l["[object Uint16Array]"] = l["[object Uint32Array]"] = !0, l["[object Arguments]"] = l["[object Array]"] = l["[object ArrayBuffer]"] = l["[object Boolean]"] = l["[object DataView]"] = l["[object Date]"] = l["[object Error]"] = l["[object Function]"] = l["[object Map]"] = l["[object Number]"] = l["[object Object]"] = l["[object RegExp]"] = l["[object Set]"] = l["[object String]"] = l["[object WeakMap]"] = !1; var o = i(5771), a = i(8795), u = a.A && a.A.isTypedArray, c = u ? (0, o.A)(u) : function (t) { return (0, s.A)(t) && (0, n.A)(t.length) && !!l[(0, r.A)(t)] } }, 3169: function (t, e, i) { "use strict"; i.d(e, { A: function () { return a } }); var r = i(6753), n = i(501), s = (0, i(2217).A)(Object.keys, Object), l = Object.prototype.hasOwnProperty, o = i(3628), a = function (t) { return (0, o.A)(t) ? (0, r.A)(t) : function (t) { if (!(0, n.A)(t)) return s(t); var e = []; for (var i in Object(t)) l.call(t, i) && "constructor" != i && e.push(i); return e }(t) } }, 2624: function (t, e, i) { "use strict"; i.d(e, { A: function () { return u } }); var r = i(6753), n = i(659), s = i(501), l = Object.prototype.hasOwnProperty, o = function (t) { if (!(0, n.A)(t)) return function (t) { var e = []; if (null != t) for (var i in Object(t)) e.push(i); return e }(t); var e = (0, s.A)(t), i = []; for (var r in t) ("constructor" != r || !e && l.call(t, r)) && i.push(r); return i }, a = i(3628), u = function (t) { return (0, a.A)(t) ? (0, r.A)(t, !0) : o(t) } }, 8347: function (t, e, i) { "use strict"; i.d(e, { A: function () { return Z } }); var r, n, s, l, o, a, u, c, h = i(2673), d = i(6770), f = i(8138), $ = function (t, e, i) { (void 0 === i || (0, f.A)(t[e], i)) && (void 0 !== i || e in t) || (0, d.A)(t, e, i) }, _ = function (t, e, i) { for (var r = -1, n = Object(t), s = i(t), l = s.length; l--;) { var o = s[++r]; if (!1 === e(n[o], o, n)) break } return t }, p = i(3812), g = i(1827), m = i(4405), b = i(1683), y = i(8412), v = i(723), A = i(3628), x = i(7948), N = i(776), E = i(7572), w = i(659), q = i(2159), k = i(8769), L = Function.prototype, S = Object.prototype, T = L.toString, C = S.hasOwnProperty, O = T.call(Object), R = i(5755), B = function (t, e) { if (("constructor" !== e || "function" != typeof t[e]) && "__proto__" != e) return t[e] }, I = i(9601), j = i(2624), U = function (t, e, i, r, n, s, l) { var o, a = B(t, i), u = B(e, i), c = l.get(u); if (c) $(t, i, c); else { var h = s ? s(a, u, i + "", t, e, l) : void 0, d = void 0 === h; if (d) { var f, _ = (0, v.A)(u), L = !_ && (0, N.A)(u), S = !_ && !L && (0, R.A)(u); h = u, _ || L || S ? (0, v.A)(a) ? h = a : (o = a, (0, x.A)(o) && (0, A.A)(o) ? h = (0, m.A)(a) : L ? (d = !1, h = (0, p.A)(u, !0)) : S ? (d = !1, h = (0, g.A)(u, !0)) : h = []) : function (t) { if (!(0, x.A)(t) || "[object Object]" != (0, q.A)(t)) return !1; var e = (0, k.A)(t); if (null === e) return !0; var i = C.call(e, "constructor") && e.constructor; return "function" == typeof i && i instanceof i && T.call(i) == O }(u) || (0, y.A)(u) ? (h = a, (0, y.A)(a) ? h = (f = a, (0, I.A)(f, (0, j.A)(f))) : (0, w.A)(a) && !(0, E.A)(a) || (h = (0, b.A)(u))) : d = !1 } d && (l.set(u, h), n(h, u, r, s, l), l.delete(u)), $(t, i, h) } }, M = function t(e, i, r, n, s) { e !== i && _(i, function (l, o) { if (s || (s = new h.A), (0, w.A)(l)) U(e, i, o, r, t, n, s); else { var a = n ? n(B(e, o), l, o + "", e, i, s) : void 0; void 0 === a && (a = l), $(e, o, a) } }, j.A) }, D = function (t) { return t }, P = Math.max, z = i(7889), H = z.A ? function (t, e) { var i; return (0, z.A)(t, "toString", { configurable: !0, enumerable: !1, value: (i = e, function () { return i }), writable: !0 }) } : D, F = Date.now, V = (o = H, a = 0, u = 0, function () { var t = F(), e = 16 - (t - u); if (u = t, e > 0) { if (++a >= 800) return arguments[0] } else a = 0; return o.apply(void 0, arguments) }), K = i(3767), Z = (c = function (t, e, i) { M(t, e, i) }, V((n = r = function (t, e) { var i = -1, r = e.length, n = r > 1 ? e[r - 1] : void 0, s = r > 2 ? e[2] : void 0; for (n = c.length > 3 && "function" == typeof n ? (r--, n) : void 0, s && function (t, e, i) { if (!(0, w.A)(i)) return !1; var r = typeof e; return !!("number" == r ? (0, A.A)(i) && (0, K.A)(e, i.length) : "string" == r && (e in i)) && (0, f.A)(i[e], t) }(e[0], e[1], s) && (n = r < 3 ? void 0 : n, r = 1), t = Object(t); ++i < r;) { var l = e[i]; l && c(t, l, i) } return t }, s = void 0, l = D, s = P(void 0 === s ? n.length - 1 : s, 0), function () { for (var t = arguments, e = -1, i = P(t.length - s, 0), r = Array(i); ++e < i;)r[e] = t[s + e]; e = -1; for (var o = Array(s + 1); ++e < s;)o[e] = t[e]; return o[s] = l(r), function (t, e, i) { switch (i.length) { case 0: return t.call(e); case 1: return t.call(e, i[0]); case 2: return t.call(e, i[0], i[1]); case 3: return t.call(e, i[0], i[1], i[2]) }return t.apply(e, i) }(n, this, o) }), r + "")) }, 6935: function (t, e) { "use strict"; e.A = function () { return [] } }, 6003: function (t, e, i) { "use strict"; i.r(e), i.d(e, { Attributor: function () { return s }, AttributorStore: function () { return f }, BlockBlot: function () { return E }, ClassAttributor: function () { return c }, ContainerBlot: function () { return q }, EmbedBlot: function () { return k }, InlineBlot: function () { return x }, LeafBlot: function () { return g }, ParentBlot: function () { return v }, Registry: function () { return a }, Scope: function () { return n }, ScrollBlot: function () { return S }, StyleAttributor: function () { return d }, TextBlot: function () { return C } }); var r, n = ((r = n || {})[r.TYPE = 3] = "TYPE", r[r.LEVEL = 12] = "LEVEL", r[r.ATTRIBUTE = 13] = "ATTRIBUTE", r[r.BLOT = 14] = "BLOT", r[r.INLINE = 7] = "INLINE", r[r.BLOCK = 11] = "BLOCK", r[r.BLOCK_BLOT = 10] = "BLOCK_BLOT", r[r.INLINE_BLOT = 6] = "INLINE_BLOT", r[r.BLOCK_ATTRIBUTE = 9] = "BLOCK_ATTRIBUTE", r[r.INLINE_ATTRIBUTE = 5] = "INLINE_ATTRIBUTE", r[r.ANY = 15] = "ANY", r); class s { constructor(t, e, i = {}) { this.attrName = t, this.keyName = e; let r = n.TYPE & n.ATTRIBUTE; this.scope = null != i.scope ? i.scope & n.LEVEL | r : n.ATTRIBUTE, null != i.whitelist && (this.whitelist = i.whitelist) } static keys(t) { return Array.from(t.attributes).map(t => t.name) } add(t, e) { return !!this.canAdd(t, e) && (t.setAttribute(this.keyName, e), !0) } canAdd(t, e) { return null == this.whitelist || ("string" == typeof e ? this.whitelist.indexOf(e.replace(/["']/g, "")) > -1 : this.whitelist.indexOf(e) > -1) } remove(t) { t.removeAttribute(this.keyName) } value(t) { let e = t.getAttribute(this.keyName); return this.canAdd(t, e) && e ? e : "" } } class l extends Error { constructor(t) { super(t = "[Parchment] " + t), this.message = t, this.name = this.constructor.name } } let o = class t { constructor() { this.attributes = {}, this.classes = {}, this.tags = {}, this.types = {} } static find(t, e = !1) { if (null == t) return null; if (this.blots.has(t)) return this.blots.get(t) || null; if (e) { let i = null; try { i = t.parentNode } catch { return null } return this.find(i, e) } return null } create(e, i, r) { let n = this.query(i); if (null == n) throw new l(`Unable to create ${i} blot`); let s = n, o = i instanceof Node || i.nodeType === Node.TEXT_NODE ? i : s.create(r), a = new s(e, o, r); return t.blots.set(a.domNode, a), a } find(e, i = !1) { return t.find(e, i) } query(t, e = n.ANY) { let i; return "string" == typeof t ? i = this.types[t] || this.attributes[t] : t instanceof Text || t.nodeType === Node.TEXT_NODE ? i = this.types.text : "number" == typeof t ? t & n.LEVEL & n.BLOCK ? i = this.types.block : t & n.LEVEL & n.INLINE && (i = this.types.inline) : t instanceof Element && ((t.getAttribute("class") || "").split(/\s+/).some(t => !!(i = this.classes[t])), i = i || this.tags[t.tagName]), null == i ? null : "scope" in i && e & n.LEVEL & i.scope && e & n.TYPE & i.scope ? i : null } register(...t) { return t.map(t => { let e = "blotName" in t, i = "attrName" in t; if (!e && !i) throw new l("Invalid definition"); if (e && "abstract" === t.blotName) throw new l("Cannot register abstract class"); let r = e ? t.blotName : i ? t.attrName : void 0; return this.types[r] = t, i ? "string" == typeof t.keyName && (this.attributes[t.keyName] = t) : e && (t.className && (this.classes[t.className] = t), t.tagName && (Array.isArray(t.tagName) ? t.tagName = t.tagName.map(t => t.toUpperCase()) : t.tagName = t.tagName.toUpperCase(), (Array.isArray(t.tagName) ? t.tagName : [t.tagName]).forEach(e => { (null == this.tags[e] || null == t.className) && (this.tags[e] = t) }))), t }) } }; o.blots = new WeakMap; let a = o; function u(t, e) { return (t.getAttribute("class") || "").split(/\s+/).filter(t => 0 === t.indexOf(`${e}-`)) } let c = class extends s { static keys(t) { return (t.getAttribute("class") || "").split(/\s+/).map(t => t.split("-").slice(0, -1).join("-")) } add(t, e) { return !!this.canAdd(t, e) && (this.remove(t), t.classList.add(`${this.keyName}-${e}`), !0) } remove(t) { u(t, this.keyName).forEach(e => { t.classList.remove(e) }), 0 === t.classList.length && t.removeAttribute("class") } value(t) { let e = (u(t, this.keyName)[0] || "").slice(this.keyName.length + 1); return this.canAdd(t, e) ? e : "" } }; function h(t) { let e = t.split("-"), i = e.slice(1).map(t => t[0].toUpperCase() + t.slice(1)).join(""); return e[0] + i } let d = class extends s { static keys(t) { return (t.getAttribute("style") || "").split(";").map(t => t.split(":")[0].trim()) } add(t, e) { return !!this.canAdd(t, e) && (t.style[h(this.keyName)] = e, !0) } remove(t) { t.style[h(this.keyName)] = "", t.getAttribute("style") || t.removeAttribute("style") } value(t) { let e = t.style[h(this.keyName)]; return this.canAdd(t, e) ? e : "" } }, f = class { constructor(t) { this.attributes = {}, this.domNode = t, this.build() } attribute(t, e) { e ? t.add(this.domNode, e) && (null != t.value(this.domNode) ? this.attributes[t.attrName] = t : delete this.attributes[t.attrName]) : (t.remove(this.domNode), delete this.attributes[t.attrName]) } build() { this.attributes = {}; let t = a.find(this.domNode); if (null == t) return; let e = s.keys(this.domNode), i = c.keys(this.domNode), r = d.keys(this.domNode); e.concat(i).concat(r).forEach(e => { let i = t.scroll.query(e, n.ATTRIBUTE); i instanceof s && (this.attributes[i.attrName] = i) }) } copy(t) { Object.keys(this.attributes).forEach(e => { let i = this.attributes[e].value(this.domNode); t.format(e, i) }) } move(t) { this.copy(t), Object.keys(this.attributes).forEach(t => { this.attributes[t].remove(this.domNode) }), this.attributes = {} } values() { return Object.keys(this.attributes).reduce((t, e) => (t[e] = this.attributes[e].value(this.domNode), t), {}) } }, $ = class { constructor(t, e) { this.scroll = t, this.domNode = e, a.blots.set(e, this), this.prev = null, this.next = null } static create(t) { if (null == this.tagName) throw new l("Blot definition missing tagName"); let e, i; return Array.isArray(this.tagName) ? ("string" == typeof t ? parseInt(i = t.toUpperCase(), 10).toString() === i && (i = parseInt(i, 10)) : "number" == typeof t && (i = t), e = "number" == typeof i ? document.createElement(this.tagName[i - 1]) : i && this.tagName.indexOf(i) > -1 ? document.createElement(i) : document.createElement(this.tagName[0])) : e = document.createElement(this.tagName), this.className && e.classList.add(this.className), e } get statics() { return this.constructor } attach() { } clone() { let t = this.domNode.cloneNode(!1); return this.scroll.create(t) } detach() { null != this.parent && this.parent.removeChild(this), a.blots.delete(this.domNode) } deleteAt(t, e) { this.isolate(t, e).remove() } formatAt(t, e, i, r) { let s = this.isolate(t, e); if (null != this.scroll.query(i, n.BLOT) && r) s.wrap(i, r); else if (null != this.scroll.query(i, n.ATTRIBUTE)) { let l = this.scroll.create(this.statics.scope); s.wrap(l), l.format(i, r) } } insertAt(t, e, i) { let r = null == i ? this.scroll.create("text", e) : this.scroll.create(e, i), n = this.split(t); this.parent.insertBefore(r, n || void 0) } isolate(t, e) { let i = this.split(t); if (null == i) throw Error("Attempt to isolate at end"); return i.split(e), i } length() { return 1 } offset(t = this.parent) { return null == this.parent || this === t ? 0 : this.parent.children.offset(this) + this.parent.offset(t) } optimize(t) { !this.statics.requiredContainer || this.parent instanceof this.statics.requiredContainer || this.wrap(this.statics.requiredContainer.blotName) } remove() { null != this.domNode.parentNode && this.domNode.parentNode.removeChild(this.domNode), this.detach() } replaceWith(t, e) { let i = "string" == typeof t ? this.scroll.create(t, e) : t; return null != this.parent && (this.parent.insertBefore(i, this.next || void 0), this.remove()), i } split(t, e) { return 0 === t ? this : this.next } update(t, e) { } wrap(t, e) { let i = "string" == typeof t ? this.scroll.create(t, e) : t; if (null != this.parent && this.parent.insertBefore(i, this.next || void 0), "function" != typeof i.appendChild) throw new l(`Cannot wrap ${t}`); return i.appendChild(this), i } }; $.blotName = "abstract"; let _ = $, p = class extends _ { static value(t) { return !0 } index(t, e) { return this.domNode === t || this.domNode.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY ? Math.min(e, 1) : -1 } position(t, e) { let i = Array.from(this.parent.domNode.childNodes).indexOf(this.domNode); return t > 0 && (i += 1), [this.parent.domNode, i] } value() { return { [this.statics.blotName]: this.statics.value(this.domNode) || !0 } } }; p.scope = n.INLINE_BLOT; let g = p; class m { constructor() { this.head = null, this.tail = null, this.length = 0 } append(...t) { if (this.insertBefore(t[0], null), t.length > 1) { let e = t.slice(1); this.append(...e) } } at(t) { let e = this.iterator(), i = e(); for (; i && t > 0;)t -= 1, i = e(); return i } contains(t) { let e = this.iterator(), i = e(); for (; i;) { if (i === t) return !0; i = e() } return !1 } indexOf(t) { let e = this.iterator(), i = e(), r = 0; for (; i;) { if (i === t) return r; r += 1, i = e() } return -1 } insertBefore(t, e) { null != t && (this.remove(t), t.next = e, null != e ? (t.prev = e.prev, null != e.prev && (e.prev.next = t), e.prev = t, e === this.head && (this.head = t)) : null != this.tail ? (this.tail.next = t, t.prev = this.tail, this.tail = t) : (t.prev = null, this.head = this.tail = t), this.length += 1) } offset(t) { let e = 0, i = this.head; for (; null != i;) { if (i === t) return e; e += i.length(), i = i.next } return -1 } remove(t) { this.contains(t) && (null != t.prev && (t.prev.next = t.next), null != t.next && (t.next.prev = t.prev), t === this.head && (this.head = t.next), t === this.tail && (this.tail = t.prev), this.length -= 1) } iterator(t = this.head) { return () => { let e = t; return null != t && (t = t.next), e } } find(t, e = !1) { let i = this.iterator(), r = i(); for (; r;) { let n = r.length(); if (t < n || e && t === n && (null == r.next || 0 !== r.next.length())) return [r, t]; t -= n, r = i() } return [null, 0] } forEach(t) { let e = this.iterator(), i = e(); for (; i;)t(i), i = e() } forEachAt(t, e, i) { if (e <= 0) return; let [r, n] = this.find(t), s = t - n, l = this.iterator(r), o = l(); for (; o && s < t + e;) { let a = o.length(); t > s ? i(o, t - s, Math.min(e, s + a - t)) : i(o, 0, Math.min(a, t + e - s)), s += a, o = l() } } map(t) { return this.reduce((e, i) => (e.push(t(i)), e), []) } reduce(t, e) { let i = this.iterator(), r = i(); for (; r;)e = t(e, r), r = i(); return e } } function b(t, e) { let i = e.find(t); if (i) return i; try { return e.create(t) } catch { let r = e.create(n.INLINE); return Array.from(t.childNodes).forEach(t => { r.domNode.appendChild(t) }), t.parentNode && t.parentNode.replaceChild(r.domNode, t), r.attach(), r } } let y = class t extends _ { constructor(t, e) { super(t, e), this.uiNode = null, this.build() } appendChild(t) { this.insertBefore(t) } attach() { super.attach(), this.children.forEach(t => { t.attach() }) } attachUI(e) { null != this.uiNode && this.uiNode.remove(), this.uiNode = e, t.uiClass && this.uiNode.classList.add(t.uiClass), this.uiNode.setAttribute("contenteditable", "false"), this.domNode.insertBefore(this.uiNode, this.domNode.firstChild) } build() { this.children = new m, Array.from(this.domNode.childNodes).filter(t => t !== this.uiNode).reverse().forEach(t => { try { let e = b(t, this.scroll); this.insertBefore(e, this.children.head || void 0) } catch (i) { if (i instanceof l) return; throw i } }) } deleteAt(t, e) { if (0 === t && e === this.length()) return this.remove(); this.children.forEachAt(t, e, (t, e, i) => { t.deleteAt(e, i) }) } descendant(e, i = 0) { let [r, n] = this.children.find(i); return null == e.blotName && e(r) || null != e.blotName && r instanceof e ? [r, n] : r instanceof t ? r.descendant(e, n) : [null, -1] } descendants(e, i = 0, r = Number.MAX_VALUE) { let n = [], s = r; return this.children.forEachAt(i, r, (i, r, l) => { (null == e.blotName && e(i) || null != e.blotName && i instanceof e) && n.push(i), i instanceof t && (n = n.concat(i.descendants(e, r, s))), s -= l }), n } detach() { this.children.forEach(t => { t.detach() }), super.detach() } enforceAllowedChildren() { let e = !1; this.children.forEach(i => { e || this.statics.allowedChildren.some(t => i instanceof t) || (i.statics.scope === n.BLOCK_BLOT ? (null != i.next && this.splitAfter(i), null != i.prev && this.splitAfter(i.prev), i.parent.unwrap(), e = !0) : i instanceof t ? i.unwrap() : i.remove()) }) } formatAt(t, e, i, r) { this.children.forEachAt(t, e, (t, e, n) => { t.formatAt(e, n, i, r) }) } insertAt(t, e, i) { let [r, n] = this.children.find(t); if (r) r.insertAt(n, e, i); else { let s = null == i ? this.scroll.create("text", e) : this.scroll.create(e, i); this.appendChild(s) } } insertBefore(t, e) { null != t.parent && t.parent.children.remove(t); let i = null; this.children.insertBefore(t, e || null), t.parent = this, null != e && (i = e.domNode), (this.domNode.parentNode !== t.domNode || this.domNode.nextSibling !== i) && this.domNode.insertBefore(t.domNode, i), t.attach() } length() { return this.children.reduce((t, e) => t + e.length(), 0) } moveChildren(t, e) { this.children.forEach(i => { t.insertBefore(i, e) }) } optimize(t) { if (super.optimize(t), this.enforceAllowedChildren(), null != this.uiNode && this.uiNode !== this.domNode.firstChild && this.domNode.insertBefore(this.uiNode, this.domNode.firstChild), 0 === this.children.length) { if (null != this.statics.defaultChild) { let e = this.scroll.create(this.statics.defaultChild.blotName); this.appendChild(e) } else this.remove() } } path(e, i = !1) { let [r, n] = this.children.find(e, i), s = [[this, e]]; return r instanceof t ? s.concat(r.path(n, i)) : (null != r && s.push([r, n]), s) } removeChild(t) { this.children.remove(t) } replaceWith(e, i) { let r = "string" == typeof e ? this.scroll.create(e, i) : e; return r instanceof t && this.moveChildren(r), super.replaceWith(r) } split(t, e = !1) { if (!e) { if (0 === t) return this; if (t === this.length()) return this.next } let i = this.clone(); return this.parent && this.parent.insertBefore(i, this.next || void 0), this.children.forEachAt(t, this.length(), (t, r, n) => { let s = t.split(r, e); null != s && i.appendChild(s) }), i } splitAfter(t) { let e = this.clone(); for (; null != t.next;)e.appendChild(t.next); return this.parent && this.parent.insertBefore(e, this.next || void 0), e } unwrap() { this.parent && this.moveChildren(this.parent, this.next || void 0), this.remove() } update(t, e) { let i = [], r = []; t.forEach(t => { t.target === this.domNode && "childList" === t.type && (i.push(...t.addedNodes), r.push(...t.removedNodes)) }), r.forEach(t => { if (null != t.parentNode && "IFRAME" !== t.tagName && document.body.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY) return; let e = this.scroll.find(t); null != e && (null == e.domNode.parentNode || e.domNode.parentNode === this.domNode) && e.detach() }), i.filter(t => t.parentNode === this.domNode && t !== this.uiNode).sort((t, e) => t === e ? 0 : t.compareDocumentPosition(e) & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : -1).forEach(t => { let e = null; null != t.nextSibling && (e = this.scroll.find(t.nextSibling)); let i = b(t, this.scroll); (i.next !== e || null == i.next) && (null != i.parent && i.parent.removeChild(this), this.insertBefore(i, e || void 0)) }), this.enforceAllowedChildren() } }; y.uiClass = ""; let v = y, A = class t extends v { static create(t) { return super.create(t) } static formats(e, i) { let r = i.query(t.blotName); if (null == r || e.tagName !== r.tagName) { if ("string" == typeof this.tagName) return !0; if (Array.isArray(this.tagName)) return e.tagName.toLowerCase() } } constructor(t, e) { super(t, e), this.attributes = new f(this.domNode) } format(e, i) { if (e !== this.statics.blotName || i) { let r = this.scroll.query(e, n.INLINE); null != r && (r instanceof s ? this.attributes.attribute(r, i) : i && (e !== this.statics.blotName || this.formats()[e] !== i) && this.replaceWith(e, i)) } else this.children.forEach(e => { e instanceof t || (e = e.wrap(t.blotName, !0)), this.attributes.copy(e) }), this.unwrap() } formats() { let t = this.attributes.values(), e = this.statics.formats(this.domNode, this.scroll); return null != e && (t[this.statics.blotName] = e), t } formatAt(t, e, i, r) { null != this.formats()[i] || this.scroll.query(i, n.ATTRIBUTE) ? this.isolate(t, e).format(i, r) : super.formatAt(t, e, i, r) } optimize(e) { super.optimize(e); let i = this.formats(); if (0 === Object.keys(i).length) return this.unwrap(); let r = this.next; r instanceof t && r.prev === this && function (t, e) { if (Object.keys(t).length !== Object.keys(e).length) return !1; for (let i in t) if (t[i] !== e[i]) return !1; return !0 }(i, r.formats()) && (r.moveChildren(this), r.remove()) } replaceWith(t, e) { let i = super.replaceWith(t, e); return this.attributes.copy(i), i } update(t, e) { super.update(t, e), t.some(t => t.target === this.domNode && "attributes" === t.type) && this.attributes.build() } wrap(e, i) { let r = super.wrap(e, i); return r instanceof t && this.attributes.move(r), r } }; A.allowedChildren = [A, g], A.blotName = "inline", A.scope = n.INLINE_BLOT, A.tagName = "SPAN"; let x = A, N = class t extends v { static create(t) { return super.create(t) } static formats(e, i) { let r = i.query(t.blotName); if (null == r || e.tagName !== r.tagName) { if ("string" == typeof this.tagName) return !0; if (Array.isArray(this.tagName)) return e.tagName.toLowerCase() } } constructor(t, e) { super(t, e), this.attributes = new f(this.domNode) } format(e, i) { let r = this.scroll.query(e, n.BLOCK); null != r && (r instanceof s ? this.attributes.attribute(r, i) : e !== this.statics.blotName || i ? i && (e !== this.statics.blotName || this.formats()[e] !== i) && this.replaceWith(e, i) : this.replaceWith(t.blotName)) } formats() { let t = this.attributes.values(), e = this.statics.formats(this.domNode, this.scroll); return null != e && (t[this.statics.blotName] = e), t } formatAt(t, e, i, r) { null != this.scroll.query(i, n.BLOCK) ? this.format(i, r) : super.formatAt(t, e, i, r) } insertAt(t, e, i) { if (null == i || null != this.scroll.query(e, n.INLINE)) super.insertAt(t, e, i); else { let r = this.split(t); if (null == r) throw Error("Attempt to insertAt after block boundaries"); { let s = this.scroll.create(e, i); r.parent.insertBefore(s, r) } } } replaceWith(t, e) { let i = super.replaceWith(t, e); return this.attributes.copy(i), i } update(t, e) { super.update(t, e), t.some(t => t.target === this.domNode && "attributes" === t.type) && this.attributes.build() } }; N.blotName = "block", N.scope = n.BLOCK_BLOT, N.tagName = "P", N.allowedChildren = [x, N, g]; let E = N, w = class extends v { checkMerge() { return null !== this.next && this.next.statics.blotName === this.statics.blotName } deleteAt(t, e) { super.deleteAt(t, e), this.enforceAllowedChildren() } formatAt(t, e, i, r) { super.formatAt(t, e, i, r), this.enforceAllowedChildren() } insertAt(t, e, i) { super.insertAt(t, e, i), this.enforceAllowedChildren() } optimize(t) { super.optimize(t), this.children.length > 0 && null != this.next && this.checkMerge() && (this.next.moveChildren(this), this.next.remove()) } }; w.blotName = "container", w.scope = n.BLOCK_BLOT; let q = w, k = class extends g { static formats(t, e) { } format(t, e) { super.formatAt(0, this.length(), t, e) } formatAt(t, e, i, r) { 0 === t && e === this.length() ? this.format(i, r) : super.formatAt(t, e, i, r) } formats() { return this.statics.formats(this.domNode, this.scroll) } }, L = class extends v { constructor(t, e) { super(null, e), this.registry = t, this.scroll = this, this.build(), this.observer = new MutationObserver(t => { this.update(t) }), this.observer.observe(this.domNode, { attributes: !0, characterData: !0, characterDataOldValue: !0, childList: !0, subtree: !0 }), this.attach() } create(t, e) { return this.registry.create(this, t, e) } find(t, e = !1) { let i = this.registry.find(t, e); return i ? i.scroll === this ? i : e ? this.find(i.scroll.domNode.parentNode, !0) : null : null } query(t, e = n.ANY) { return this.registry.query(t, e) } register(...t) { return this.registry.register(...t) } build() { null != this.scroll && super.build() } detach() { super.detach(), this.observer.disconnect() } deleteAt(t, e) { this.update(), 0 === t && e === this.length() ? this.children.forEach(t => { t.remove() }) : super.deleteAt(t, e) } formatAt(t, e, i, r) { this.update(), super.formatAt(t, e, i, r) } insertAt(t, e, i) { this.update(), super.insertAt(t, e, i) } optimize(t = [], e = {}) { super.optimize(e); let i = e.mutationsMap || new WeakMap, r = Array.from(this.observer.takeRecords()); for (; r.length > 0;)t.push(r.pop()); let n = (t, e = !0) => { null == t || t === this || null != t.domNode.parentNode && (i.has(t.domNode) || i.set(t.domNode, []), e && n(t.parent)) }, s = t => { i.has(t.domNode) && (t instanceof v && t.children.forEach(s), i.delete(t.domNode), t.optimize(e)) }, l = t; for (let o = 0; l.length > 0; o += 1) { if (o >= 100) throw Error("[Parchment] Maximum optimize iterations reached"); for (l.forEach(t => { let e = this.find(t.target, !0); null != e && (e.domNode === t.target && ("childList" === t.type ? (n(this.find(t.previousSibling, !1)), Array.from(t.addedNodes).forEach(t => { let e = this.find(t, !1); n(e, !1), e instanceof v && e.children.forEach(t => { n(t, !1) }) })) : "attributes" === t.type && n(e.prev)), n(e)) }), this.children.forEach(s), r = (l = Array.from(this.observer.takeRecords())).slice(); r.length > 0;)t.push(r.pop()) } } update(t, e = {}) { t = t || this.observer.takeRecords(); let i = new WeakMap; t.map(t => { let e = this.find(t.target, !0); return null == e ? null : i.has(e.domNode) ? (i.get(e.domNode).push(t), null) : (i.set(e.domNode, [t]), e) }).forEach(t => { null != t && t !== this && i.has(t.domNode) && t.update(i.get(t.domNode) || [], e) }), e.mutationsMap = i, i.has(this.domNode) && super.update(i.get(this.domNode), e), this.optimize(t, e) } }; L.blotName = "scroll", L.defaultChild = E, L.allowedChildren = [E, q], L.scope = n.BLOCK_BLOT, L.tagName = "DIV"; let S = L, T = class t extends g { static create(t) { return document.createTextNode(t) } static value(t) { return t.data } constructor(t, e) { super(t, e), this.text = this.statics.value(this.domNode) } deleteAt(t, e) { this.domNode.data = this.text = this.text.slice(0, t) + this.text.slice(t + e) } index(t, e) { return this.domNode === t ? e : -1 } insertAt(t, e, i) { null == i ? (this.text = this.text.slice(0, t) + e + this.text.slice(t), this.domNode.data = this.text) : super.insertAt(t, e, i) } length() { return this.text.length } optimize(e) { super.optimize(e), this.text = this.statics.value(this.domNode), 0 === this.text.length ? this.remove() : this.next instanceof t && this.next.prev === this && (this.insertAt(this.length(), this.next.value()), this.next.remove()) } position(t, e = !1) { return [this.domNode, t] } split(t, e = !1) { if (!e) { if (0 === t) return this; if (t === this.length()) return this.next } let i = this.scroll.create(this.domNode.splitText(t)); return this.parent.insertBefore(i, this.next || void 0), this.text = this.statics.value(this.domNode), i } update(t, e) { t.some(t => "characterData" === t.type && t.target === this.domNode) && (this.text = this.statics.value(this.domNode)) } value() { return this.text } }; T.blotName = "text", T.scope = n.INLINE_BLOT; let C = T }
        }, e = {}; function i(r) { var n = e[r]; if (void 0 !== n) return n.exports; var s = e[r] = { id: r, loaded: !1, exports: {} }; return t[r](s, s.exports, i), s.loaded = !0, s.exports } i.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return i.d(e, { a: e }), e }, i.d = function (t, e) { for (var r in e) i.o(e, r) && !i.o(t, r) && Object.defineProperty(t, r, { enumerable: !0, get: e[r] }) }, i.g = function () { if ("object" == typeof globalThis) return globalThis; try { return this || Function("return this")() } catch (t) { if ("object" == typeof window) return window } }(), i.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, i.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, i.nmd = function (t) { return t.paths = [], t.children || (t.children = []), t }; var r = {}; return function () {
            "use strict"; i.d(r, { default: function () { return t3 } }); var t = i(3729), e = i(8276), n = i(7912), s = i(6003); class l extends s.ClassAttributor { add(t, e) { let i = 0; if ("+1" === e || "-1" === e) { let r = this.value(t) || 0; i = "+1" === e ? r + 1 : r - 1 } else "number" == typeof e && (i = e); return 0 === i ? (this.remove(t), !0) : super.add(t, i.toString()) } canAdd(t, e) { return super.canAdd(t, e) || super.canAdd(t, parseInt(e, 10)) } value(t) { return parseInt(super.value(t), 10) || void 0 } } var o = new l("indent", "ql-indent", { scope: s.Scope.BLOCK, whitelist: [1, 2, 3, 4, 5, 6, 7, 8] }), a = i(9698); class u extends a.Ay { static blotName = "blockquote"; static tagName = "blockquote" } class c extends a.Ay { static blotName = "header"; static tagName = ["H1", "H2", "H3", "H4", "H5", "H6"]; static formats(t) { return this.tagName.indexOf(t.tagName) + 1 } } var h = i(580), d = i(6142); class f extends h.A { } f.blotName = "list-container", f.tagName = "OL"; class $ extends a.Ay { static create(t) { let e = super.create(); return e.setAttribute("data-list", t), e } static formats(t) { return t.getAttribute("data-list") || void 0 } static register() { d.Ay.register(f) } constructor(t, e) { super(t, e); let i = e.ownerDocument.createElement("span"), r = i => { if (!t.isEnabled()) return; let r = this.statics.formats(e, t); "checked" === r ? (this.format("list", "unchecked"), i.preventDefault()) : "unchecked" === r && (this.format("list", "checked"), i.preventDefault()) }; i.addEventListener("mousedown", r), i.addEventListener("touchstart", r), this.attachUI(i) } format(t, e) { t === this.statics.blotName && e ? this.domNode.setAttribute("data-list", e) : super.format(t, e) } } $.blotName = "list", $.tagName = "LI", f.allowedChildren = [$], $.requiredContainer = f; var _ = i(9541), p = i(8638), g = i(6772), m = i(664), b = i(4850); class y extends b.A { static blotName = "bold"; static tagName = ["STRONG", "B"]; static create() { return super.create() } static formats() { return !0 } optimize(t) { super.optimize(t), this.domNode.tagName !== this.statics.tagName[0] && this.replaceWith(this.statics.blotName) } } var v = y; class A extends b.A { static blotName = "link"; static tagName = "A"; static SANITIZED_URL = "about:blank"; static PROTOCOL_WHITELIST = ["http", "https", "mailto", "tel", "sms"]; static create(t) { let e = super.create(t); return e.setAttribute("href", this.sanitize(t)), e.setAttribute("rel", "noopener noreferrer"), e.setAttribute("target", "_blank"), e } static formats(t) { return t.getAttribute("href") } static sanitize(t) { return x(t, this.PROTOCOL_WHITELIST) ? t : this.SANITIZED_URL } format(t, e) { t === this.statics.blotName && e ? this.domNode.setAttribute("href", this.constructor.sanitize(e)) : super.format(t, e) } } function x(t, e) { let i = document.createElement("a"); i.href = t; let r = i.href.slice(0, i.href.indexOf(":")); return e.indexOf(r) > -1 } class N extends b.A { static blotName = "script"; static tagName = ["SUB", "SUP"]; static create(t) { return "super" === t ? document.createElement("sup") : "sub" === t ? document.createElement("sub") : super.create(t) } static formats(t) { return "SUB" === t.tagName ? "sub" : "SUP" === t.tagName ? "super" : void 0 } } class E extends b.A { static blotName = "underline"; static tagName = "U" } var w = i(746); class q extends w.A { static blotName = "formula"; static className = "ql-formula"; static tagName = "SPAN"; static create(t) { if (null == window.katex) throw Error("Formula module requires KaTeX."); let e = super.create(t); return "string" == typeof t && (window.katex.render(t, e, { throwOnError: !1, errorColor: "#f00" }), e.setAttribute("data-value", t)), e } static value(t) { return t.getAttribute("data-value") } html() { let { formula: t } = this.value(); return `<span>${t}</span>` } } let k = ["alt", "height", "width"]; class L extends s.EmbedBlot { static blotName = "image"; static tagName = "IMG"; static create(t) { let e = super.create(t); return "string" == typeof t && e.setAttribute("src", this.sanitize(t)), e } static formats(t) { return k.reduce((e, i) => (t.hasAttribute(i) && (e[i] = t.getAttribute(i)), e), {}) } static match(t) { return /\.(jpe?g|gif|png)$/.test(t) || /^data:image\/.+;base64/.test(t) } static sanitize(t) { return x(t, ["http", "https", "data"]) ? t : "//:0" } static value(t) { return t.getAttribute("src") } format(t, e) { k.indexOf(t) > -1 ? e ? this.domNode.setAttribute(t, e) : this.domNode.removeAttribute(t) : super.format(t, e) } } let S = ["height", "width"]; class T extends a.zo { static blotName = "video"; static className = "ql-video"; static tagName = "IFRAME"; static create(t) { let e = super.create(t); return e.setAttribute("frameborder", "0"), e.setAttribute("allowfullscreen", "true"), e.setAttribute("src", this.sanitize(t)), e } static formats(t) { return S.reduce((e, i) => (t.hasAttribute(i) && (e[i] = t.getAttribute(i)), e), {}) } static sanitize(t) { return A.sanitize(t) } static value(t) { return t.getAttribute("src") } format(t, e) { S.indexOf(t) > -1 ? e ? this.domNode.setAttribute(t, e) : this.domNode.removeAttribute(t) : super.format(t, e) } html() { let { video: t } = this.value(); return `<a href="${t}">${t}</a>` } } var C = i(9404), O = i(5232), R = i.n(O), B = i(4266), I = i(3036), j = i(4541), U = i(5508), M = i(584); let D = new s.ClassAttributor("code-token", "hljs", { scope: s.Scope.INLINE }); class P extends b.A { static formats(t, e) { for (; null != t && t !== e.domNode;) { if (t.classList && t.classList.contains(C.Ay.className)) return super.formats(t, e); t = t.parentNode } } constructor(t, e, i) { super(t, e, i), D.add(this.domNode, i) } format(t, e) { t !== P.blotName ? super.format(t, e) : e ? D.add(this.domNode, e) : (D.remove(this.domNode), this.domNode.classList.remove(this.statics.className)) } optimize() { super.optimize(...arguments), D.value(this.domNode) || this.unwrap() } } P.blotName = "code-token", P.className = "ql-token"; class z extends C.Ay { static create(t) { let e = super.create(t); return "string" == typeof t && e.setAttribute("data-language", t), e } static formats(t) { return t.getAttribute("data-language") || "plain" } static register() { } format(t, e) { t === this.statics.blotName && e ? this.domNode.setAttribute("data-language", e) : super.format(t, e) } replaceWith(t, e) { return this.formatAt(0, this.length(), P.blotName, !1), super.replaceWith(t, e) } } class H extends C.EJ {
                attach() { super.attach(), this.forceNext = !1, this.scroll.emitMount(this) } format(t, e) { t === z.blotName && (this.forceNext = !0, this.children.forEach(i => { i.format(t, e) })) } formatAt(t, e, i, r) { i === z.blotName && (this.forceNext = !0), super.formatAt(t, e, i, r) } highlight(t) {
                    let e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (null == this.children.head) return; let i = `${Array.from(this.domNode.childNodes).filter(t => t !== this.uiNode).map(t => t.textContent).join("\n")}
`, r = z.formats(this.children.head.domNode); if (e || this.forceNext || this.cachedText !== i) { if (i.trim().length > 0 || null == this.cachedText) { let n = this.children.reduce((t, e) => t.concat((0, a.mG)(e, !1)), new (R())), s = t(i, r); n.diff(s).reduce((t, e) => { let { retain: i, attributes: r } = e; return i ? (r && Object.keys(r).forEach(e => { [z.blotName, P.blotName].includes(e) && this.formatAt(t, i, e, r[e]) }), t + i) : t }, 0) } this.cachedText = i, this.forceNext = !1 }
                } html(t, e) {
                    let [i] = this.children.find(t); return `<pre data-language="${i ? z.formats(i.domNode) : "plain"}">
${(0, U.X)(this.code(t, e))}
</pre>`} optimize(t) { if (super.optimize(t), null != this.parent && null != this.children.head && null != this.uiNode) { let e = z.formats(this.children.head.domNode); e !== this.uiNode.value && (this.uiNode.value = e) } }
            } H.allowedChildren = [z], z.requiredContainer = H, z.allowedChildren = [P, j.A, U.A, I.A]; class F extends B.A { static register() { d.Ay.register(P, !0), d.Ay.register(z, !0), d.Ay.register(H, !0) } constructor(t, e) { if (super(t, e), null == this.options.hljs) throw Error("Syntax module requires highlight.js. Please include the library on the page before Quill."); this.languages = this.options.languages.reduce((t, e) => { let { key: i } = e; return t[i] = !0, t }, {}), this.highlightBlot = this.highlightBlot.bind(this), this.initListener(), this.initTimer() } initListener() { this.quill.on(d.Ay.events.SCROLL_BLOT_MOUNT, t => { if (!(t instanceof H)) return; let e = this.quill.root.ownerDocument.createElement("select"); this.options.languages.forEach(t => { let { key: i, label: r } = t, n = e.ownerDocument.createElement("option"); n.textContent = r, n.setAttribute("value", i), e.appendChild(n) }), e.addEventListener("change", () => { t.format(z.blotName, e.value), this.quill.root.focus(), this.highlight(t, !0) }), null == t.uiNode && (t.attachUI(e), t.children.head && (e.value = z.formats(t.children.head.domNode))) }) } initTimer() { let t = null; this.quill.on(d.Ay.events.SCROLL_OPTIMIZE, () => { t && clearTimeout(t), t = setTimeout(() => { this.highlight(), t = null }, this.options.interval) }) } highlight() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (this.quill.selection.composing) return; this.quill.update(d.Ay.sources.USER); let i = this.quill.getSelection(); (null == t ? this.quill.scroll.descendants(H) : [t]).forEach(t => { t.highlight(this.highlightBlot, e) }), this.quill.update(d.Ay.sources.SILENT), null != i && this.quill.setSelection(i, d.Ay.sources.SILENT) } highlightBlot(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "plain"; if ("plain" === (e = this.languages[e] ? e : "plain")) return (0, U.X)(t).split("\n").reduce((t, i, r) => (0 !== r && t.insert("\n", { [C.Ay.blotName]: e }), t.insert(i)), new (R())); let i = this.quill.root.ownerDocument.createElement("div"); return i.classList.add(C.Ay.className), i.innerHTML = ((t, e, i) => { if ("string" == typeof t.versionString) { let r = t.versionString.split(".")[0]; if (parseInt(r, 10) >= 11) return t.highlight(i, { language: e }).value } return t.highlight(e, i).value })(this.options.hljs, e, t), (0, M.hV)(this.quill.scroll, i, [(t, e) => { let i = D.value(t); return i ? e.compose((new (R())).retain(e.length(), { [P.blotName]: i })) : e }], [(t, i) => t.data.split("\n").reduce((t, i, r) => (0 !== r && t.insert("\n", { [C.Ay.blotName]: e }), t.insert(i)), i)], new WeakMap) } } F.DEFAULTS = { hljs: window.hljs, interval: 1e3, languages: [{ key: "plain", label: "Plain" }, { key: "bash", label: "Bash" }, { key: "cpp", label: "C++" }, { key: "cs", label: "C#" }, { key: "css", label: "CSS" }, { key: "diff", label: "Diff" }, { key: "xml", label: "HTML/XML" }, { key: "java", label: "Java" }, { key: "javascript", label: "JavaScript" }, { key: "markdown", label: "Markdown" }, { key: "php", label: "PHP" }, { key: "python", label: "Python" }, { key: "ruby", label: "Ruby" }, { key: "sql", label: "SQL" }] }; class V extends a.Ay { static blotName = "table"; static tagName = "TD"; static create(t) { let e = super.create(); return t ? e.setAttribute("data-row", t) : e.setAttribute("data-row", G()), e } static formats(t) { if (t.hasAttribute("data-row")) return t.getAttribute("data-row") } cellOffset() { return this.parent ? this.parent.children.indexOf(this) : -1 } format(t, e) { t === V.blotName && e ? this.domNode.setAttribute("data-row", e) : super.format(t, e) } row() { return this.parent } rowOffset() { return this.row() ? this.row().rowOffset() : -1 } table() { return this.row() && this.row().table() } } class K extends h.A { static blotName = "table-row"; static tagName = "TR"; checkMerge() { if (super.checkMerge() && null != this.next.children.head) { let t = this.children.head.formats(), e = this.children.tail.formats(), i = this.next.children.head.formats(), r = this.next.children.tail.formats(); return t.table === e.table && t.table === i.table && t.table === r.table } return !1 } optimize(t) { super.optimize(t), this.children.forEach(t => { if (null == t.next) return; let e = t.formats(), i = t.next.formats(); if (e.table !== i.table) { let r = this.splitAfter(t); r && r.optimize(), this.prev && this.prev.optimize() } }) } rowOffset() { return this.parent ? this.parent.children.indexOf(this) : -1 } table() { return this.parent && this.parent.parent } } class Z extends h.A { static blotName = "table-body"; static tagName = "TBODY" } class W extends h.A { static blotName = "table-container"; static tagName = "TABLE"; balanceCells() { let t = this.descendants(K), e = t.reduce((t, e) => Math.max(e.children.length, t), 0); t.forEach(t => { Array(e - t.children.length).fill(0).forEach(() => { let e; null != t.children.head && (e = V.formats(t.children.head.domNode)); let i = this.scroll.create(V.blotName, e); t.appendChild(i), i.optimize() }) }) } cells(t) { return this.rows().map(e => e.children.at(t)) } deleteColumn(t) { let [e] = this.descendant(Z); null != e && null != e.children.head && e.children.forEach(e => { let i = e.children.at(t); null != i && i.remove() }) } insertColumn(t) { let [e] = this.descendant(Z); null != e && null != e.children.head && e.children.forEach(e => { let i = e.children.at(t), r = V.formats(e.children.head.domNode), n = this.scroll.create(V.blotName, r); e.insertBefore(n, i) }) } insertRow(t) { let [e] = this.descendant(Z); if (null == e || null == e.children.head) return; let i = G(), r = this.scroll.create(K.blotName); e.children.head.children.forEach(() => { let t = this.scroll.create(V.blotName, i); r.appendChild(t) }); let n = e.children.at(t); e.insertBefore(r, n) } rows() { let t = this.children.head; return null == t ? [] : t.children.map(t => t) } } function G() { return `row-${Math.random().toString(36).slice(2, 6)}` } W.allowedChildren = [Z], Z.requiredContainer = W, Z.allowedChildren = [K], K.requiredContainer = Z, K.allowedChildren = [V], V.requiredContainer = K; class X extends B.A { static register() { d.Ay.register(V), d.Ay.register(K), d.Ay.register(Z), d.Ay.register(W) } constructor() { super(...arguments), this.listenBalanceCells() } balanceTables() { this.quill.scroll.descendants(W).forEach(t => { t.balanceCells() }) } deleteColumn() { let [t, , e] = this.getTable(); null != e && (t.deleteColumn(e.cellOffset()), this.quill.update(d.Ay.sources.USER)) } deleteRow() { let [, t] = this.getTable(); null != t && (t.remove(), this.quill.update(d.Ay.sources.USER)) } deleteTable() { let [t] = this.getTable(); if (null == t) return; let e = t.offset(); t.remove(), this.quill.update(d.Ay.sources.USER), this.quill.setSelection(e, d.Ay.sources.SILENT) } getTable() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.quill.getSelection(); if (null == t) return [null, null, null, -1]; let [e, i] = this.quill.getLine(t.index); if (null == e || e.statics.blotName !== V.blotName) return [null, null, null, -1]; let r = e.parent; return [r.parent.parent, r, e, i] } insertColumn(t) { let e = this.quill.getSelection(); if (!e) return; let [i, r, n] = this.getTable(e); if (null == n) return; let s = n.cellOffset(); i.insertColumn(s + t), this.quill.update(d.Ay.sources.USER); let l = r.rowOffset(); 0 === t && (l += 1), this.quill.setSelection(e.index + l, e.length, d.Ay.sources.SILENT) } insertColumnLeft() { this.insertColumn(0) } insertColumnRight() { this.insertColumn(1) } insertRow(t) { let e = this.quill.getSelection(); if (!e) return; let [i, r, n] = this.getTable(e); if (null == n) return; let s = r.rowOffset(); i.insertRow(s + t), this.quill.update(d.Ay.sources.USER), t > 0 ? this.quill.setSelection(e, d.Ay.sources.SILENT) : this.quill.setSelection(e.index + r.children.length, e.length, d.Ay.sources.SILENT) } insertRowAbove() { this.insertRow(0) } insertRowBelow() { this.insertRow(1) } insertTable(t, e) { let i = this.quill.getSelection(); if (null == i) return; let r = Array(t).fill(0).reduce(t => { let i = Array(e).fill("\n").join(""); return t.insert(i, { table: G() }) }, (new (R())).retain(i.index)); this.quill.updateContents(r, d.Ay.sources.USER), this.quill.setSelection(i.index, d.Ay.sources.SILENT), this.balanceTables() } listenBalanceCells() { this.quill.on(d.Ay.events.SCROLL_OPTIMIZE, t => { t.some(t => !!["TD", "TR", "TBODY", "TABLE"].includes(t.target.tagName) && (this.quill.once(d.Ay.events.TEXT_CHANGE, (t, e, i) => { i === d.Ay.sources.USER && this.balanceTables() }), !0)) }) } } let Q = (0, i(6078).A)("quill:toolbar"); class J extends B.A { constructor(t, e) { if (super(t, e), Array.isArray(this.options.container)) { var i, r; let n = document.createElement("div"); n.setAttribute("role", "toolbar"), i = n, Array.isArray((r = this.options.container)[0]) || (r = [r]), r.forEach(t => { let e = document.createElement("span"); e.classList.add("ql-formats"), t.forEach(t => { if ("string" == typeof t) Y(e, t); else { let i = Object.keys(t)[0], r = t[i]; Array.isArray(r) ? function (t, e, i) { let r = document.createElement("select"); r.classList.add(`ql-${e}`), i.forEach(t => { let e = document.createElement("option"); !1 !== t ? e.setAttribute("value", String(t)) : e.setAttribute("selected", "selected"), r.appendChild(e) }), t.appendChild(r) }(e, i, r) : Y(e, i, r) } }), i.appendChild(e) }), t.container?.parentNode?.insertBefore(n, t.container), this.container = n } else "string" == typeof this.options.container ? this.container = document.querySelector(this.options.container) : this.container = this.options.container; this.container instanceof HTMLElement ? (this.container.classList.add("ql-toolbar"), this.controls = [], this.handlers = {}, this.options.handlers && Object.keys(this.options.handlers).forEach(t => { let e = this.options.handlers?.[t]; e && this.addHandler(t, e) }), Array.from(this.container.querySelectorAll("button, select")).forEach(t => { this.attach(t) }), this.quill.on(d.Ay.events.EDITOR_CHANGE, () => { let [t] = this.quill.selection.getRange(); this.update(t) })) : Q.error("Container required for toolbar", this.options) } addHandler(t, e) { this.handlers[t] = e } attach(t) { let e = Array.from(t.classList).find(t => 0 === t.indexOf("ql-")); if (!e) return; if (e = e.slice(3), "BUTTON" === t.tagName && t.setAttribute("type", "button"), null == this.handlers[e] && null == this.quill.scroll.query(e)) return void Q.warn("ignoring attaching to nonexistent format", e, t); let i = "SELECT" === t.tagName ? "change" : "click"; t.addEventListener(i, i => { let r; if ("SELECT" === t.tagName) { if (t.selectedIndex < 0) return; let n = t.options[t.selectedIndex]; r = !n.hasAttribute("selected") && !!n.value } else r = !t.classList.contains("ql-active") && (t.value || !t.hasAttribute("value")), i.preventDefault(); this.quill.focus(); let [l] = this.quill.selection.getRange(); if (null != this.handlers[e]) this.handlers[e].call(this, r); else if (this.quill.scroll.query(e).prototype instanceof s.EmbedBlot) { if (!(r = prompt(`Enter ${e}`))) return; this.quill.updateContents((new (R())).retain(l.index).delete(l.length).insert({ [e]: r }), d.Ay.sources.USER) } else this.quill.format(e, r, d.Ay.sources.USER); this.update(l) }), this.controls.push([e, t]) } update(t) { let e = null == t ? {} : this.quill.getFormat(t); this.controls.forEach(i => { let [r, n] = i; if ("SELECT" === n.tagName) { let s = null; if (null == t) s = null; else if (null == e[r]) s = n.querySelector("option[selected]"); else if (!Array.isArray(e[r])) { let l = e[r]; "string" == typeof l && (l = l.replace(/"/g, '\\"')), s = n.querySelector(`option[value="${l}"]`) } null == s ? (n.value = "", n.selectedIndex = -1) : s.selected = !0 } else if (null == t) n.classList.remove("ql-active"), n.setAttribute("aria-pressed", "false"); else if (n.hasAttribute("value")) { let o = e[r], a = o === n.getAttribute("value") || null != o && o.toString() === n.getAttribute("value") || null == o && !n.getAttribute("value"); n.classList.toggle("ql-active", a), n.setAttribute("aria-pressed", a.toString()) } else { let u = null != e[r]; n.classList.toggle("ql-active", u), n.setAttribute("aria-pressed", u.toString()) } }) } } function Y(t, e, i) { let r = document.createElement("button"); r.setAttribute("type", "button"), r.classList.add(`ql-${e}`), r.setAttribute("aria-pressed", "false"), null != i ? (r.value = i, r.setAttribute("aria-label", `${e}: ${i}`)) : r.setAttribute("aria-label", e), t.appendChild(r) } J.DEFAULTS = {}, J.DEFAULTS = { container: null, handlers: { clean() { let t = this.quill.getSelection(); if (null != t) { if (0 === t.length) { let e = this.quill.getFormat(); Object.keys(e).forEach(t => { null != this.quill.scroll.query(t, s.Scope.INLINE) && this.quill.format(t, !1, d.Ay.sources.USER) }) } else this.quill.removeFormat(t.index, t.length, d.Ay.sources.USER) } }, direction(t) { let { align: e } = this.quill.getFormat(); "rtl" === t && null == e ? this.quill.format("align", "right", d.Ay.sources.USER) : t || "right" !== e || this.quill.format("align", !1, d.Ay.sources.USER), this.quill.format("direction", t, d.Ay.sources.USER) }, indent(t) { let e = this.quill.getSelection(), i = this.quill.getFormat(e), r = parseInt(i.indent || 0, 10); if ("+1" === t || "-1" === t) { let n = "+1" === t ? 1 : -1; "rtl" === i.direction && (n *= -1), this.quill.format("indent", r + n, d.Ay.sources.USER) } }, link(t) { !0 === t && (t = prompt("Enter link URL:")), this.quill.format("link", t, d.Ay.sources.USER) }, list(t) { let e = this.quill.getSelection(), i = this.quill.getFormat(e); "check" === t ? "checked" === i.list || "unchecked" === i.list ? this.quill.format("list", !1, d.Ay.sources.USER) : this.quill.format("list", "unchecked", d.Ay.sources.USER) : this.quill.format("list", t, d.Ay.sources.USER) } } }; let tt = '<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>'; var te = { align: { "": '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>', center: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>', right: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>', justify: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>' }, background: '<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>', blockquote: '<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>', bold: '<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>', clean: '<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>', code: tt, "code-block": tt, color: '<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>', direction: { "": '<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>', rtl: '<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>' }, formula: '<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>', header: { 1: '<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>', 2: '<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>', 3: '<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>', 4: '<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>', 5: '<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>', 6: '<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>' }, italic: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>', image: '<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>', indent: { 1: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>', "-1": '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>' }, link: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>', list: { bullet: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>', check: '<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>', ordered: '<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>' }, script: { sub: '<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>', super: '<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>' }, strike: '<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>', table: '<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>', underline: '<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>', video: '<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>' }; let ti = 0; function tr(t, e) { t.setAttribute(e, `${"true" !== t.getAttribute(e)}`) } var tn = class { constructor(t) { this.select = t, this.container = document.createElement("span"), this.buildPicker(), this.select.style.display = "none", this.select.parentNode.insertBefore(this.container, this.select), this.label.addEventListener("mousedown", () => { this.togglePicker() }), this.label.addEventListener("keydown", t => { switch (t.key) { case "Enter": this.togglePicker(); break; case "Escape": this.escape(), t.preventDefault() } }), this.select.addEventListener("change", this.update.bind(this)) } togglePicker() { this.container.classList.toggle("ql-expanded"), tr(this.label, "aria-expanded"), tr(this.options, "aria-hidden") } buildItem(t) { let e = document.createElement("span"); e.tabIndex = "0", e.setAttribute("role", "button"), e.classList.add("ql-picker-item"); let i = t.getAttribute("value"); return i && e.setAttribute("data-value", i), t.textContent && e.setAttribute("data-label", t.textContent), e.addEventListener("click", () => { this.selectItem(e, !0) }), e.addEventListener("keydown", t => { switch (t.key) { case "Enter": this.selectItem(e, !0), t.preventDefault(); break; case "Escape": this.escape(), t.preventDefault() } }), e } buildLabel() { let t = document.createElement("span"); return t.classList.add("ql-picker-label"), t.innerHTML = '<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>', t.tabIndex = "0", t.setAttribute("role", "button"), t.setAttribute("aria-expanded", "false"), this.container.appendChild(t), t } buildOptions() { let t = document.createElement("span"); t.classList.add("ql-picker-options"), t.setAttribute("aria-hidden", "true"), t.tabIndex = "-1", t.id = `ql-picker-options-${ti}`, ti += 1, this.label.setAttribute("aria-controls", t.id), this.options = t, Array.from(this.select.options).forEach(e => { let i = this.buildItem(e); t.appendChild(i), !0 === e.selected && this.selectItem(i) }), this.container.appendChild(t) } buildPicker() { Array.from(this.select.attributes).forEach(t => { this.container.setAttribute(t.name, t.value) }), this.container.classList.add("ql-picker"), this.label = this.buildLabel(), this.buildOptions() } escape() { this.close(), setTimeout(() => this.label.focus(), 1) } close() { this.container.classList.remove("ql-expanded"), this.label.setAttribute("aria-expanded", "false"), this.options.setAttribute("aria-hidden", "true") } selectItem(t) { let e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = this.container.querySelector(".ql-selected"); t !== i && (null != i && i.classList.remove("ql-selected"), null != t && (t.classList.add("ql-selected"), this.select.selectedIndex = Array.from(t.parentNode.children).indexOf(t), t.hasAttribute("data-value") ? this.label.setAttribute("data-value", t.getAttribute("data-value")) : this.label.removeAttribute("data-value"), t.hasAttribute("data-label") ? this.label.setAttribute("data-label", t.getAttribute("data-label")) : this.label.removeAttribute("data-label"), e && (this.select.dispatchEvent(new Event("change")), this.close()))) } update() { let t; if (this.select.selectedIndex > -1) { let e = this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex]; t = this.select.options[this.select.selectedIndex], this.selectItem(e) } else this.selectItem(null); let i = null != t && t !== this.select.querySelector("option[selected]"); this.label.classList.toggle("ql-active", i) } }, ts = class extends tn { constructor(t, e) { super(t), this.label.innerHTML = e, this.container.classList.add("ql-color-picker"), Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0, 7).forEach(t => { t.classList.add("ql-primary") }) } buildItem(t) { let e = super.buildItem(t); return e.style.backgroundColor = t.getAttribute("value") || "", e } selectItem(t, e) { super.selectItem(t, e); let i = this.label.querySelector(".ql-color-label"), r = t && t.getAttribute("data-value") || ""; i && ("line" === i.tagName ? i.style.stroke = r : i.style.fill = r) } }, tl = class extends tn { constructor(t, e) { super(t), this.container.classList.add("ql-icon-picker"), Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(t => { t.innerHTML = e[t.getAttribute("data-value") || ""] }), this.defaultItem = this.container.querySelector(".ql-selected"), this.selectItem(this.defaultItem) } selectItem(t, e) { super.selectItem(t, e); let i = t || this.defaultItem; if (null != i) { if (this.label.innerHTML === i.innerHTML) return; this.label.innerHTML = i.innerHTML } } }, to = class { constructor(t, e) { this.quill = t, this.boundsContainer = e || document.body, this.root = t.addContainer("ql-tooltip"), this.root.innerHTML = this.constructor.TEMPLATE, (t => { let { overflowY: e } = getComputedStyle(t, null); return "visible" !== e && "clip" !== e })(this.quill.root) && this.quill.root.addEventListener("scroll", () => { this.root.style.marginTop = -1 * this.quill.root.scrollTop + "px" }), this.hide() } hide() { this.root.classList.add("ql-hidden") } position(t) { let e = t.left + t.width / 2 - this.root.offsetWidth / 2, i = t.bottom + this.quill.root.scrollTop; this.root.style.left = `${e}px`, this.root.style.top = `${i}px`, this.root.classList.remove("ql-flip"); let r = this.boundsContainer.getBoundingClientRect(), n = this.root.getBoundingClientRect(), s = 0; if (n.right > r.right && (s = r.right - n.right, this.root.style.left = `${e + s}px`), n.left < r.left && (s = r.left - n.left, this.root.style.left = `${e + s}px`), n.bottom > r.bottom) { let l = n.bottom - n.top, o = t.bottom - t.top + l; this.root.style.top = i - o + "px", this.root.classList.add("ql-flip") } return s } show() { this.root.classList.remove("ql-editing"), this.root.classList.remove("ql-hidden") } }, ta = i(8347), tu = i(5374), tc = i(9609); let th = [!1, "center", "right", "justify"], td = ["#000000", "#e60000", "#ff9900", "#ffff00", "#008a00", "#0066cc", "#9933ff", "#ffffff", "#facccc", "#ffebcc", "#ffffcc", "#cce8cc", "#cce0f5", "#ebd6ff", "#bbbbbb", "#f06666", "#ffc266", "#ffff66", "#66b966", "#66a3e0", "#c285ff", "#888888", "#a10000", "#b26b00", "#b2b200", "#006100", "#0047b2", "#6b24b2", "#444444", "#5c0000", "#663d00", "#666600", "#003700", "#002966", "#3d1466"], tf = [!1, "serif", "monospace"], t$ = ["1", "2", "3", !1], t_ = ["small", !1, "large", "huge"]; class tp extends tc.A { constructor(t, e) { super(t, e); let i = e => { document.body.contains(t.root) ? (null == this.tooltip || this.tooltip.root.contains(e.target) || document.activeElement === this.tooltip.textbox || this.quill.hasFocus() || this.tooltip.hide(), null != this.pickers && this.pickers.forEach(t => { t.container.contains(e.target) || t.close() })) : document.body.removeEventListener("click", i) }; t.emitter.listenDOM("click", document.body, i) } addModule(t) { let e = super.addModule(t); return "toolbar" === t && this.extendToolbar(e), e } buildButtons(t, e) { Array.from(t).forEach(t => { (t.getAttribute("class") || "").split(/\s+/).forEach(i => { if (i.startsWith("ql-") && null != e[i = i.slice(3)]) { if ("direction" === i) t.innerHTML = e[i][""] + e[i].rtl; else if ("string" == typeof e[i]) t.innerHTML = e[i]; else { let r = t.value || ""; null != r && e[i][r] && (t.innerHTML = e[i][r]) } } }) }) } buildPickers(t, e) { this.pickers = Array.from(t).map(t => { if (t.classList.contains("ql-align") && (null == t.querySelector("option") && tm(t, th), "object" == typeof e.align)) return new tl(t, e.align); if (t.classList.contains("ql-background") || t.classList.contains("ql-color")) { let i = t.classList.contains("ql-background") ? "background" : "color"; return null == t.querySelector("option") && tm(t, td, "background" === i ? "#ffffff" : "#000000"), new ts(t, e[i]) } return null == t.querySelector("option") && (t.classList.contains("ql-font") ? tm(t, tf) : t.classList.contains("ql-header") ? tm(t, t$) : t.classList.contains("ql-size") && tm(t, t_)), new tn(t) }), this.quill.on(tu.A.events.EDITOR_CHANGE, () => { this.pickers.forEach(t => { t.update() }) }) } } tp.DEFAULTS = (0, ta.A)({}, tc.A.DEFAULTS, { modules: { toolbar: { handlers: { formula() { this.quill.theme.tooltip.edit("formula") }, image() { let t = this.container.querySelector("input.ql-image[type=file]"); null == t && ((t = document.createElement("input")).setAttribute("type", "file"), t.setAttribute("accept", this.quill.uploader.options.mimetypes.join(", ")), t.classList.add("ql-image"), t.addEventListener("change", () => { let e = this.quill.getSelection(!0); this.quill.uploader.upload(e, t.files), t.value = "" }), this.container.appendChild(t)), t.click() }, video() { this.quill.theme.tooltip.edit("video") } } } } }); class tg extends to { constructor(t, e) { super(t, e), this.textbox = this.root.querySelector('input[type="text"]'), this.listen() } listen() { this.textbox.addEventListener("keydown", t => { "Enter" === t.key ? (this.save(), t.preventDefault()) : "Escape" === t.key && (this.cancel(), t.preventDefault()) }) } cancel() { this.hide(), this.restoreFocus() } edit() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "link", e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; if (this.root.classList.remove("ql-hidden"), this.root.classList.add("ql-editing"), null == this.textbox) return; null != e ? this.textbox.value = e : t !== this.root.getAttribute("data-mode") && (this.textbox.value = ""); let i = this.quill.getBounds(this.quill.selection.savedRange); null != i && this.position(i), this.textbox.select(), this.textbox.setAttribute("placeholder", this.textbox.getAttribute(`data-${t}`) || ""), this.root.setAttribute("data-mode", t) } restoreFocus() { this.quill.focus({ preventScroll: !0 }) } save() { let { value: t } = this.textbox; switch (this.root.getAttribute("data-mode")) { case "link": { let { scrollTop: e } = this.quill.root; this.linkRange ? (this.quill.formatText(this.linkRange, "link", t, tu.A.sources.USER), delete this.linkRange) : (this.restoreFocus(), this.quill.format("link", t, tu.A.sources.USER)), this.quill.root.scrollTop = e; break } case "video": var i; let r; t = (r = (i = t).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/) || i.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/)) ? `${r[1] || "https"}://www.youtube.com/embed/${r[2]}?showinfo=0` : (r = i.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/)) ? `${r[1] || "https"}://player.vimeo.com/video/${r[2]}/` : i; case "formula": { if (!t) break; let n = this.quill.getSelection(!0); if (null != n) { let s = n.index + n.length; this.quill.insertEmbed(s, this.root.getAttribute("data-mode"), t, tu.A.sources.USER), "formula" === this.root.getAttribute("data-mode") && this.quill.insertText(s + 1, " ", tu.A.sources.USER), this.quill.setSelection(s + 2, tu.A.sources.USER) } } }this.textbox.value = "", this.hide() } } function tm(t, e) { let i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; e.forEach(e => { let r = document.createElement("option"); e === i ? r.setAttribute("selected", "selected") : r.setAttribute("value", String(e)), t.appendChild(r) }) } var tb = i(8298); class ty extends tg { static TEMPLATE = '<span class="ql-tooltip-arrow"></span><div class="ql-tooltip-editor"><input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL"><a class="ql-close"></a></div>'; constructor(t, e) { super(t, e), this.quill.on(tu.A.events.EDITOR_CHANGE, (t, e, i, r) => { if (t === tu.A.events.SELECTION_CHANGE) { if (null != e && e.length > 0 && r === tu.A.sources.USER) { this.show(), this.root.style.left = "0px", this.root.style.width = "", this.root.style.width = `${this.root.offsetWidth}px`; let n = this.quill.getLines(e.index, e.length); if (1 === n.length) { let s = this.quill.getBounds(e); null != s && this.position(s) } else { let l = n[n.length - 1], o = this.quill.getIndex(l), a = Math.min(l.length() - 1, e.index + e.length - o), u = this.quill.getBounds(new tb.Q(o, a)); null != u && this.position(u) } } else document.activeElement !== this.textbox && this.quill.hasFocus() && this.hide() } }) } listen() { super.listen(), this.root.querySelector(".ql-close").addEventListener("click", () => { this.root.classList.remove("ql-editing") }), this.quill.on(tu.A.events.SCROLL_OPTIMIZE, () => { setTimeout(() => { if (this.root.classList.contains("ql-hidden")) return; let t = this.quill.getSelection(); if (null != t) { let e = this.quill.getBounds(t); null != e && this.position(e) } }, 1) }) } cancel() { this.show() } position(t) { let e = super.position(t), i = this.root.querySelector(".ql-tooltip-arrow"); return i.style.marginLeft = "", 0 !== e && (i.style.marginLeft = -1 * e - i.offsetWidth / 2 + "px"), e } } class tv extends tp { constructor(t, e) { null != e.modules.toolbar && null == e.modules.toolbar.container && (e.modules.toolbar.container = [["bold", "italic", "link"], [{ header: 1 }, { header: 2 }, "blockquote"]]), super(t, e), this.quill.container.classList.add("ql-bubble") } extendToolbar(t) { this.tooltip = new ty(this.quill, this.options.bounds), null != t.container && (this.tooltip.root.appendChild(t.container), this.buildButtons(t.container.querySelectorAll("button"), te), this.buildPickers(t.container.querySelectorAll("select"), te)) } } tv.DEFAULTS = (0, ta.A)({}, tp.DEFAULTS, { modules: { toolbar: { handlers: { link(t) { t ? this.quill.theme.tooltip.edit() : this.quill.format("link", !1, d.Ay.sources.USER) } } } } }); class tA extends tg { static TEMPLATE = '<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a><input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL"><a class="ql-action"></a><a class="ql-remove"></a>'; preview = this.root.querySelector("a.ql-preview"); listen() { super.listen(), this.root.querySelector("a.ql-action").addEventListener("click", t => { this.root.classList.contains("ql-editing") ? this.save() : this.edit("link", this.preview.textContent), t.preventDefault() }), this.root.querySelector("a.ql-remove").addEventListener("click", t => { if (null != this.linkRange) { let e = this.linkRange; this.restoreFocus(), this.quill.formatText(e, "link", !1, tu.A.sources.USER), delete this.linkRange } t.preventDefault(), this.hide() }), this.quill.on(tu.A.events.SELECTION_CHANGE, (t, e, i) => { if (null != t) { if (0 === t.length && i === tu.A.sources.USER) { let [r, n] = this.quill.scroll.descendant(A, t.index); if (null != r) { this.linkRange = new tb.Q(t.index - n, r.length()); let s = A.formats(r.domNode); this.preview.textContent = s, this.preview.setAttribute("href", s), this.show(); let l = this.quill.getBounds(this.linkRange); return void (null != l && this.position(l)) } } else delete this.linkRange; this.hide() } }) } show() { super.show(), this.root.removeAttribute("data-mode") } } class t0 extends tp { constructor(t, e) { null != e.modules.toolbar && null == e.modules.toolbar.container && (e.modules.toolbar.container = [[{ header: ["1", "2", "3", !1] }], ["bold", "italic", "underline", "link"], [{ list: "ordered" }, { list: "bullet" }], ["clean"]]), super(t, e), this.quill.container.classList.add("ql-snow") } extendToolbar(t) { null != t.container && (t.container.classList.add("ql-snow"), this.buildButtons(t.container.querySelectorAll("button"), te), this.buildPickers(t.container.querySelectorAll("select"), te), this.tooltip = new tA(this.quill, this.options.bounds), t.container.querySelector(".ql-link") && this.quill.keyboard.addBinding({ key: "k", shortKey: !0 }, (e, i) => { t.handlers.link.call(t, !i.format.link) })) } } t0.DEFAULTS = (0, ta.A)({}, tp.DEFAULTS, { modules: { toolbar: { handlers: { link(t) { if (t) { let e = this.quill.getSelection(); if (null == e || 0 === e.length) return; let i = this.quill.getText(e); /^\S+@\S+\.\S+$/.test(i) && 0 !== i.indexOf("mailto:") && (i = `mailto:${i}`); let { tooltip: r } = this.quill.theme; r.edit("link", i) } else this.quill.format("link", !1, d.Ay.sources.USER) } } } } }), t.default.register({ "attributors/attribute/direction": n.Mc, "attributors/class/align": e.qh, "attributors/class/background": _.l, "attributors/class/color": p.g3, "attributors/class/direction": n.sY, "attributors/class/font": g.q, "attributors/class/size": m.U, "attributors/style/align": e.Hu, "attributors/style/background": _.s, "attributors/style/color": p.JM, "attributors/style/direction": n.VL, "attributors/style/font": g.z, "attributors/style/size": m.r }, !0), t.default.register({ "formats/align": e.qh, "formats/direction": n.sY, "formats/indent": o, "formats/background": _.s, "formats/color": p.JM, "formats/font": g.q, "formats/size": m.U, "formats/blockquote": u, "formats/code-block": C.Ay, "formats/header": c, "formats/list": $, "formats/bold": v, "formats/code": C.Cy, "formats/italic": class extends v { static blotName = "italic"; static tagName = ["EM", "I"] }, "formats/link": A, "formats/script": N, "formats/strike": class extends v { static blotName = "strike"; static tagName = ["S", "STRIKE"] }, "formats/underline": E, "formats/formula": q, "formats/image": L, "formats/video": T, "modules/syntax": F, "modules/table": X, "modules/toolbar": J, "themes/bubble": tv, "themes/snow": t0, "ui/icons": te, "ui/picker": tn, "ui/icon-picker": tl, "ui/color-picker": ts, "ui/tooltip": to }, !0); var t3 = t.default
        }(), r.default
    }()
});